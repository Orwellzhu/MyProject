;UE.I18N['zh-cn'] = {
	'labelMap': {
		'anchor': '锚点',
		'undo': '撤销',
		'redo': '重做',
		'bold': '加粗',
		'indent': '首行缩进',
		'snapscreen': '截图',
		'italic': '斜体',
		'underline': '下划线',
		'strikethrough': '删除线',
		'subscript': '下标',
		'fontborder': '字符边框',
		'superscript': '上标',
		'formatmatch': '格式刷',
		'source': '源代码',
		'blockquote': '引用',
		'pasteplain': '纯文本粘贴模式',
		'selectall': '全选',
		'print': '打印',
		'preview': '预览',
		'horizontal': '分隔线',
		'removeformat': '清除格式',
		'time': '时间',
		'date': '日期',
		'unlink': '取消链接',
		'insertrow': '前插入行',
		'insertcol': '前插入列',
		'mergeright': '右合并单元格',
		'mergedown': '下合并单元格',
		'deleterow': '删除行',
		'deletecol': '删除列',
		'splittorows': '拆分成行',
		'splittocols': '拆分成列',
		'splittocells': '完全拆分单元格',
		'deletecaption': '删除表格标题',
		'inserttitle': '插入标题',
		'mergecells': '合并多个单元格',
		'deletetable': '删除表格',
		'cleardoc': '清空文档',
		'insertparagraphbeforetable': "表格前插入行",
		'insertcode': '代码语言',
		'fontfamily': '字体',
		'fontsize': '字号 10~72px',
		'paragraph': '段落格式',
		'simpleupload': '单图上传',
		'insertimage': '多图上传',
		'edittable': '表格属性',
		'edittd': '单元格属性',
		'link': '超链接',
		'emotion': '表情',
		'spechars': '特殊字符',
		'searchreplace': '查询替换',
		'map': 'Baidu地图',
		'gmap': 'Google地图',
		'insertvideo': '视频',
		'help': '帮助',
		'justifyleft': '居左对齐',
		'justifyright': '居右对齐',
		'justifycenter': '居中对齐',
		'justifyjustify': '两端对齐',
		'forecolor': '字体颜色',
		'backcolor': '背景色',
		'insertorderedlist': '有序列表',
		'insertunorderedlist': '无序列表',
		'fullscreen': '全屏',
		'directionalityltr': '从左向右输入',
		'directionalityrtl': '从右向左输入',
		'rowspacingtop': '段前距',
		'rowspacingbottom': '段后距',
		'pagebreak': '分页',
		'insertframe': '插入Iframe',
		'imagenone': '默认',
		'imageleft': '左浮动',
		'imageright': '右浮动',
		'attachment': '附件',
		'imagecenter': '居中',
		'wordimage': '图片转存',
		'lineheight': '行间距',
		'edittip': '编辑提示',
		'customstyle': '自定义标题',
		'autotypeset': '自动排版',
		'webapp': '百度应用',
		'touppercase': '字母大写',
		'tolowercase': '字母小写',
		'background': '背景',
		'template': '模板',
		'scrawl': '涂鸦',
		'music': '音乐',
		'inserttable': '插入表格',
		'drafts': '从草稿箱加载',
		'charts': '图表'
	},
	'insertorderedlist': {
		'num': '1,2,3...',
		'num1': '1),2),3)...',
		'num2': '(1),(2),(3)...',
		'cn': '一,二,三....',
		'cn1': '一),二),三)....',
		'cn2': '(一),(二),(三)....',
		'decimal': '1,2,3...',
		'lower-alpha': 'a,b,c...',
		'lower-roman': 'i,ii,iii...',
		'upper-alpha': 'A,B,C...',
		'upper-roman': 'I,II,III...'
	},
	'insertunorderedlist': {
		'circle': '○ 大圆圈',
		'disc': '● 小黑点',
		'square': '■ 小方块 ',
		'dash': '— 破折号',
		'dot': ' 。 小圆圈'
	},
	'paragraph': {
		'p': '段落',
		'h1': '一级标题',
		'h2': '二级标题',
		'h3': '三级标题',
		'h4': '四级标题',
		'h5': '五级标题',
		'h6': '六级标题'
	},
	'fontfamily': {
		'songti': '宋体',
		'kaiti': '楷体',
		'heiti': '黑体',
		'lishu': '隶书',
		'yahei': '微软雅黑',
		'andaleMono': 'andale mono',
		'arial': 'arial',
		'arialBlack': 'arial black',
		'comicSansMs': 'comic sans ms',
		'impact': 'impact',
		'timesNewRoman': 'times new roman'
	},
	'customstyle': {
		'tc': '标题居中',
		'tl': '标题居左',
		'im': '强调',
		'hi': '明显强调'
	},
	'autoupload': {
		'exceedSizeError': '文件大小超出限制',
		'exceedTypeError': '文件格式不允许',
		'jsonEncodeError': '服务器返回格式错误',
		'loading': "正在上传...",
		'loadError': "上传错误",
		'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'
	},
	'simpleupload': {
		'exceedSizeError': '文件大小超出限制',
		'exceedTypeError': '文件格式不允许',
		'jsonEncodeError': '服务器返回格式错误',
		'loading': "正在上传...",
		'loadError': "上传错误",
		'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'
	},
	'elementPathTip': "元素路径",
	'wordCountTip': "字数统计",
	'wordCountMsg': '当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ',
	'wordOverFlowMsg': '<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',
	'ok': "确认",
	'cancel': "取消",
	'closeDialog': "关闭对话框",
	'tableDrag': "表格拖动必须引入uiUtils.js文件！",
	'autofloatMsg': "工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",
	'loadconfigError': '获取后台配置项请求出错，上传功能将不能正常使用！',
	'loadconfigFormatError': '后台配置项返回格式出错，上传功能将不能正常使用！',
	'loadconfigHttpError': '请求后台配置项http错误，上传功能将不能正常使用！',
	'snapScreen_plugin': {
		'browserMsg': "仅支持IE浏览器！",
		'callBackErrorMsg': "服务器返回数据有误，请检查配置项之后重试。",
		'uploadErrorMsg': "截图上传失败，请检查服务器端环境! "
	},
	'insertcode': {
		'as3': 'ActionScript 3',
		'bash': 'Bash/Shell',
		'cpp': 'C/C++',
		'css': 'CSS',
		'cf': 'ColdFusion',
		'c#': 'C#',
		'delphi': 'Delphi',
		'diff': 'Diff',
		'erlang': 'Erlang',
		'groovy': 'Groovy',
		'html': 'HTML',
		'java': 'Java',
		'jfx': 'JavaFX',
		'js': 'JavaScript',
		'pl': 'Perl',
		'php': 'PHP',
		'plain': 'Plain Text',
		'ps': 'PowerShell',
		'python': 'Python',
		'ruby': 'Ruby',
		'scala': 'Scala',
		'sql': 'SQL',
		'vb': 'Visual Basic',
		'xml': 'XML'
	},
	'confirmClear': "确定清空当前文档么？",
	'contextMenu': {
		'delete': "删除",
		'selectall': "全选",
		'deletecode': "删除代码",
		'cleardoc': "清空文档",
		'confirmclear': "确定清空当前文档么？",
		'unlink': "删除超链接",
		'paragraph': "段落格式",
		'edittable': "表格属性",
		'aligntd': "单元格对齐方式",
		'aligntable': '表格对齐方式',
		'tableleft': '左浮动',
		'tablecenter': '居中显示',
		'tableright': '右浮动',
		'edittd': "单元格属性",
		'setbordervisible': '设置表格边线可见',
		'justifyleft': '左对齐',
		'justifyright': '右对齐',
		'justifycenter': '居中对齐',
		'justifyjustify': '两端对齐',
		'table': "表格",
		'inserttable': '插入表格',
		'deletetable': "删除表格",
		'insertparagraphbefore': "前插入段落",
		'insertparagraphafter': '后插入段落',
		'deleterow': "删除当前行",
		'deletecol': "删除当前列",
		'insertrow': "前插入行",
		'insertcol': "左插入列",
		'insertrownext': '后插入行',
		'insertcolnext': '右插入列',
		'insertcaption': '插入表格名称',
		'deletecaption': '删除表格名称',
		'inserttitle': '插入表格标题行',
		'deletetitle': '删除表格标题行',
		'inserttitlecol': '插入表格标题列',
		'deletetitlecol': '删除表格标题列',
		'averageDiseRow': '平均分布各行',
		'averageDisCol': '平均分布各列',
		'mergeright': "向右合并",
		'mergeleft': "向左合并",
		'mergedown': "向下合并",
		'mergecells': "合并单元格",
		'splittocells': "完全拆分单元格",
		'splittocols': "拆分成列",
		'splittorows': "拆分成行",
		'tablesort': '表格排序',
		'enablesort': '设置表格可排序',
		'disablesort': '取消表格可排序',
		'reversecurrent': '逆序当前',
		'orderbyasc': '按ASCII字符升序',
		'reversebyasc': '按ASCII字符降序',
		'orderbynum': '按数值大小升序',
		'reversebynum': '按数值大小降序',
		'borderbk': '边框底纹',
		'setcolor': '表格隔行变色',
		'unsetcolor': '取消表格隔行变色',
		'setbackground': '选区背景隔行',
		'unsetbackground': '取消选区背景',
		'redandblue': '红蓝相间',
		'threecolorgradient': '三色渐变',
		'copy': "复制(Ctrl + c)",
		'copymsg': "浏览器不支持,请使用 'Ctrl + c'",
		'paste': "粘贴(Ctrl + v)",
		'pastemsg': "浏览器不支持,请使用 'Ctrl + v'"
	},
	'copymsg': "浏览器不支持,请使用 'Ctrl + c'",
	'pastemsg': "浏览器不支持,请使用 'Ctrl + v'",
	'anthorMsg': "链接",
	'clearColor': '清空颜色',
	'standardColor': '标准颜色',
	'themeColor': '主题颜色',
	'property': '属性',
	'default': '默认',
	'modify': '修改',
	'justifyleft': '左对齐',
	'justifyright': '右对齐',
	'justifycenter': '居中',
	'justify': '默认',
	'changeImage': '换图',
	'edit': '编辑',
	'radiusCircle': '圆形',
	'cancelRadius': '取消圆形',
	'ok': '确定',
	'recentlyColor': '最近使用颜色',
	'clear': '清除',
	'anchorMsg': '锚点',
	'delete': '删除',
	'clickToUpload': "点击上传",
	'unset': '尚未设置语言文件',
	't_row': '行',
	't_col': '列',
	'more': '更多',
	'pasteOpt': '粘贴选项',
	'pasteSourceFormat': "保留源格式",
	'tagFormat': '只保留标签',
	'pasteTextFormat': '只保留文本',
	'autoTypeSet': {
		'mergeLine': "合并空行",
		'delLine': "清除空行",
		'removeFormat': "清除格式",
		'indent': "首行缩进",
		'alignment': "对齐方式",
		'imageFloat': "图片浮动",
		'removeFontsize': "清除字号",
		'removeFontFamily': "清除字体",
		'removeHtml': "清除冗余HTML代码",
		'pasteFilter': "粘贴过滤",
		'run': "执行",
		'symbol': '符号转换',
		'bdc2sb': '全角转半角',
		'tobdc': '半角转全角'
	},
	'background': {
		'static': {
			'lang_background_normal': '背景设置',
			'lang_background_local': '在线图片',
			'lang_background_set': '选项',
			'lang_background_none': '无背景色',
			'lang_background_colored': '有背景色',
			'lang_background_color': '颜色设置',
			'lang_background_netimg': '网络图片',
			'lang_background_align': '对齐方式',
			'lang_background_position': '精确定位',
			'repeatType': {
				'options': ["居中", "横向重复", "纵向重复", "平铺", "自定义"]
			}
		},
		'noUploadImage': "当前未上传过任何图片！",
		'toggleSelect': "单击可切换选中状态\n原图尺寸: "
	},
	'insertimage': {
		'static': {
			'lang_tab_remote': "插入图片",
			'lang_tab_upload': "本地上传",
			'lang_tab_online': "在线管理",
			'lang_tab_search': "图片搜索",
			'lang_input_url': "地 址：",
			'lang_input_size': "大 小：",
			'lang_input_width': "宽度",
			'lang_input_height': "高度",
			'lang_input_border': "边 框：",
			'lang_input_vhspace': "边 距：",
			'lang_input_title': "描 述：",
			'lang_input_align': '图片浮动方式：',
			'lang_imgLoading': "　图片加载中……",
			'lang_start_upload': "开始上传",
			'lock': {
				'title': "锁定宽高比例"
			},
			'searchType': {
				'title': "图片类型",
				'options': ["新闻", "壁纸", "表情", "头像"]
			},
			'searchTxt': {
				'value': "请输入搜索关键词"
			},
			'searchBtn': {
				'value': "百度一下"
			},
			'searchReset': {
				'value': "清空搜索"
			},
			'noneAlign': {
				'title': '无浮动'
			},
			'leftAlign': {
				'title': '左浮动'
			},
			'rightAlign': {
				'title': '右浮动'
			},
			'centerAlign': {
				'title': '居中独占一行'
			}
		},
		'uploadSelectFile': '点击选择图片',
		'uploadAddFile': '继续添加',
		'uploadStart': '开始上传',
		'uploadPause': '暂停上传',
		'uploadContinue': '继续上传',
		'uploadRetry': '重试上传',
		'uploadDelete': '删除',
		'uploadTurnLeft': '向左旋转',
		'uploadTurnRight': '向右旋转',
		'uploadPreview': '预览中',
		'uploadNoPreview': '不能预览',
		'updateStatusReady': '选中_张图片，共_KB。',
		'updateStatusConfirm': '已成功上传_张照片，_张照片上传失败',
		'updateStatusFinish': '共_张（_KB），_张上传成功',
		'updateStatusError': '，_张上传失败。',
		'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
		'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
		'errorExceedSize': '文件大小超出',
		'errorFileType': '文件格式不允许',
		'errorInterrupt': '文件传输中断',
		'errorUploadRetry': '上传失败，请重试',
		'errorHttp': 'http请求错误',
		'errorServerUpload': '服务器返回出错',
		'remoteLockError': "宽高不正确,不能所定比例",
		'numError': "请输入正确的长度或者宽度值！例如：123，400",
		'imageUrlError': "不允许的图片格式或者图片域！",
		'imageLoadError': "图片加载失败！请检查链接地址或网络状态！",
		'searchRemind': "请输入搜索关键词",
		'searchLoading': "图片加载中，请稍后……",
		'searchRetry': " :( ，抱歉，没有找到图片！请重试一次！"
	},
	'attachment': {
		'static': {
			'lang_tab_upload': '上传附件',
			'lang_tab_online': '在线附件',
			'lang_start_upload': "开始上传",
			'lang_drop_remind': "可以将文件拖到这里，单次最多可选100个文件"
		},
		'uploadSelectFile': '点击选择文件',
		'uploadAddFile': '继续添加',
		'uploadStart': '开始上传',
		'uploadPause': '暂停上传',
		'uploadContinue': '继续上传',
		'uploadRetry': '重试上传',
		'uploadDelete': '删除',
		'uploadTurnLeft': '向左旋转',
		'uploadTurnRight': '向右旋转',
		'uploadPreview': '预览中',
		'updateStatusReady': '选中_个文件，共_KB。',
		'updateStatusConfirm': '已成功上传_个文件，_个文件上传失败',
		'updateStatusFinish': '共_个（_KB），_个上传成功',
		'updateStatusError': '，_张上传失败。',
		'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
		'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
		'errorExceedSize': '文件大小超出',
		'errorFileType': '文件格式不允许',
		'errorInterrupt': '文件传输中断',
		'errorUploadRetry': '上传失败，请重试',
		'errorHttp': 'http请求错误',
		'errorServerUpload': '服务器返回出错'
	},
	'insertvideo': {
		'static': {
			'lang_tab_insertV': "插入视频",
			'lang_tab_searchV': "搜索视频",
			'lang_tab_uploadV': "上传视频",
			'lang_video_url': "视频网址",
			'lang_video_size': "视频尺寸",
			'lang_videoW': "宽度",
			'lang_videoH': "高度",
			'lang_alignment': "对齐方式",
			'videoSearchTxt': {
				'value': "请输入搜索关键字！"
			},
			'videoType': {
				'options': ["全部", "热门", "娱乐", "搞笑", "体育", "科技", "综艺"]
			},
			'videoSearchBtn': {
				'value': "百度一下"
			},
			'videoSearchReset': {
				'value': "清空结果"
			},
			'lang_input_fileStatus': ' 当前未上传文件',
			'startUpload': {
				'style': "background:url(upload.png) no-repeat;"
			},
			'lang_upload_size': "视频尺寸",
			'lang_upload_width': "宽度",
			'lang_upload_height': "高度",
			'lang_upload_alignment': "对齐方式",
			'lang_format_advice': "建议使用mp4格式."
		},
		'numError': "请输入正确的数值，如123,400",
		'floatLeft': "左浮动",
		'floatRight': "右浮动",
		'"default"': "默认",
		'block': "独占一行",
		'urlError': "输入的视频地址有误，请检查后再试！",
		'loading': " &nbsp;视频加载中，请等待……",
		'clickToSelect': "点击选中",
		'goToSource': '访问源视频',
		'noVideo': " &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",
		'browseFiles': '浏览文件',
		'uploadSuccess': '上传成功!',
		'delSuccessFile': '从成功队列中移除',
		'delFailSaveFile': '移除保存失败文件',
		'statusPrompt': ' 个文件已上传！ ',
		'flashVersionError': '当前Flash版本过低，请更新FlashPlayer后重试！',
		'flashLoadingError': 'Flash加载失败!请检查路径或网络状态',
		'fileUploadReady': '等待上传……',
		'delUploadQueue': '从上传队列中移除',
		'limitPrompt1': '单次不能选择超过',
		'limitPrompt2': '个文件！请重新选择！',
		'delFailFile': '移除失败文件',
		'fileSizeLimit': '文件大小超出限制！',
		'emptyFile': '空文件无法上传！',
		'fileTypeError': '文件类型不允许！',
		'unknownError': '未知错误！',
		'fileUploading': '上传中，请等待……',
		'cancelUpload': '取消上传',
		'netError': '网络错误',
		'failUpload': '上传失败!',
		'serverIOError': '服务器IO错误！',
		'noAuthority': '无权限！',
		'fileNumLimit': '上传个数限制',
		'failCheck': '验证失败，本次上传被跳过！',
		'fileCanceling': '取消中，请等待……',
		'stopUploading': '上传已停止……',
		'uploadSelectFile': '点击选择文件',
		'uploadAddFile': '继续添加',
		'uploadStart': '开始上传',
		'uploadPause': '暂停上传',
		'uploadContinue': '继续上传',
		'uploadRetry': '重试上传',
		'uploadDelete': '删除',
		'uploadTurnLeft': '向左旋转',
		'uploadTurnRight': '向右旋转',
		'uploadPreview': '预览中',
		'updateStatusReady': '选中_个文件，共_KB。',
		'updateStatusConfirm': '成功上传_个，_个失败',
		'updateStatusFinish': '共_个(_KB)，_个成功上传',
		'updateStatusError': '，_张上传失败。',
		'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',
		'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',
		'errorExceedSize': '文件大小超出',
		'errorFileType': '文件格式不允许',
		'errorInterrupt': '文件传输中断',
		'errorUploadRetry': '上传失败，请重试',
		'errorHttp': 'http请求错误',
		'errorServerUpload': '服务器返回出错'
	},
	'webapp': {
		'tip1': "本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",
		'tip2': "申请完成之后请至ueditor.config.js中配置获得的appkey! ",
		'applyFor': "点此申请",
		'anthorApi': "百度API"
	},
	'template': {
		'static': {
			'lang_template_bkcolor': '背景颜色',
			'lang_template_clear': '保留原有内容',
			'lang_template_select': '选择模板'
		},
		'blank': "空白文档",
		'blog': "博客文章",
		'resume': "个人简历",
		'richText': "图文混排",
		'sciPapers': "科技论文"
	},
	'scrawl': {
		'static': {
			'lang_input_previousStep': "上一步",
			'lang_input_nextsStep': "下一步",
			'lang_input_clear': '清空',
			'lang_input_addPic': '添加背景',
			'lang_input_ScalePic': '缩放背景',
			'lang_input_removePic': '删除背景',
			'J_imgTxt': {
				title: '添加背景图片'
			}
		},
		'noScarwl': "尚未作画，白纸一张~",
		'scrawlUpLoading': "涂鸦上传中,别急哦~",
		'continueBtn': "继续",
		'imageError': "糟糕，图片读取失败了！",
		'backgroundUploading': '背景图片上传中,别急哦~'
	},
	'music': {
		'static': {
			'lang_input_tips': "输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",
			'J_searchBtn': {
				value: '搜索歌曲'
			}
		},
		'emptyTxt': '未搜索到相关音乐结果，请换一个关键词试试。',
		'chapter': '歌曲',
		'singer': '歌手',
		'special': '专辑',
		'listenTest': '试听'
	},
	'anchor': {
		'static': {
			'lang_input_anchorName': '锚点名字：'
		}
	},
	'charts': {
		'static': {
			'lang_data_source': '数据源：',
			'lang_chart_format': '图表格式：',
			'lang_data_align': '数据对齐方式',
			'lang_chart_align_same': '数据源与图表X轴Y轴一致',
			'lang_chart_align_reverse': '数据源与图表X轴Y轴相反',
			'lang_chart_title': '图表标题',
			'lang_chart_main_title': '主标题：',
			'lang_chart_sub_title': '子标题：',
			'lang_chart_x_title': 'X轴标题：',
			'lang_chart_y_title': 'Y轴标题：',
			'lang_chart_tip': '提示文字',
			'lang_cahrt_tip_prefix': '提示文字前缀：',
			'lang_cahrt_tip_description': '仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀',
			'lang_chart_data_unit': '数据单位',
			'lang_chart_data_unit_title': '单位：',
			'lang_chart_data_unit_description': '显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃',
			'lang_chart_type': '图表类型：',
			'lang_prev_btn': '上一个',
			'lang_next_btn': '下一个'
		}
	},
	'emotion': {
		'static': {
			'lang_input_choice': '精选',
			'lang_input_Tuzki': '兔斯基',
			'lang_input_BOBO': 'BOBO',
			'lang_input_lvdouwa': '绿豆蛙',
			'lang_input_babyCat': 'baby猫',
			'lang_input_bubble': '泡泡',
			'lang_input_youa': '有啊'
		}
	},
	'gmap': {
		'static': {
			'lang_input_address': '地址',
			'lang_input_search': '搜索',
			'address': {
				value: "北京"
			}
		},
		searchError: '无法定位到该地址!'
	},
	'help': {
		'static': {
			'lang_input_about': '关于UEditor',
			'lang_input_shortcuts': '快捷键',
			'lang_input_introduction': 'UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。',
			'lang_Txt_shortcuts': '快捷键',
			'lang_Txt_func': '功能',
			'lang_Txt_bold': '给选中字设置为加粗',
			'lang_Txt_copy': '复制选中内容',
			'lang_Txt_cut': '剪切选中内容',
			'lang_Txt_Paste': '粘贴',
			'lang_Txt_undo': '重新执行上次操作',
			'lang_Txt_redo': '撤销上一次操作',
			'lang_Txt_italic': '给选中字设置为斜体',
			'lang_Txt_underline': '给选中字加下划线',
			'lang_Txt_selectAll': '全部选中',
			'lang_Txt_visualEnter': '软回车',
			'lang_Txt_fullscreen': '全屏'
		}
	},
	'insertframe': {
		'static': {
			'lang_input_address': '地址：',
			'lang_input_width': '宽度：',
			'lang_input_height': '高度：',
			'lang_input_isScroll': '允许滚动条：',
			'lang_input_frameborder': '显示框架边框：',
			'lang_input_alignMode': '对齐方式：',
			'align': {
				title: "对齐方式",
				options: ["默认", "左对齐", "右对齐", "居中"]
			}
		},
		'enterAddress': '请输入地址!'
	},
	'link': {
		'static': {
			'lang_input_text': '文本内容：',
			'lang_input_url': '链接地址：',
			'lang_input_title': '标题：',
			'lang_input_target': '是否在新窗口打开：'
		},
		'validLink': '只支持选中一个链接时生效',
		'httpPrompt': '您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀'
	},
	'map': {
		'static': {
			lang_city: "城市",
			lang_address: "地址",
			city: {
				value: "北京"
			},
			lang_search: "搜索",
			lang_dynamicmap: "插入动态地图"
		},
		cityMsg: "请选择城市",
		errorMsg: "抱歉，找不到该位置！"
	},
	'searchreplace': {
		'static': {
			lang_tab_search: "查找",
			lang_tab_replace: "替换",
			lang_search1: "查找",
			lang_search2: "查找",
			lang_replace: "替换",
			lang_searchReg: '支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',
			lang_searchReg1: '支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',
			lang_case_sensitive1: "区分大小写",
			lang_case_sensitive2: "区分大小写",
			nextFindBtn: {
				value: "下一个"
			},
			preFindBtn: {
				value: "上一个"
			},
			nextReplaceBtn: {
				value: "下一个"
			},
			preReplaceBtn: {
				value: "上一个"
			},
			repalceBtn: {
				value: "替换"
			},
			repalceAllBtn: {
				value: "全部替换"
			}
		},
		getEnd: "已经搜索到文章末尾！",
		getStart: "已经搜索到文章头部",
		countMsg: "总共替换了{#count}处！"
	},
	'snapscreen': {
		'static': {
			lang_showMsg: "截图功能需要首先安装UEditor截图插件！ ",
			lang_download: "点此下载",
			lang_step1: "第一步，下载UEditor截图插件并运行安装。",
			lang_step2: "第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"
		}
	},
	'spechars': {
		'static': {},
		tsfh: "特殊字符",
		lmsz: "罗马字符",
		szfh: "数学字符",
		rwfh: "日文字符",
		xlzm: "希腊字母",
		ewzm: "俄文字符",
		pyzm: "拼音字母",
		yyyb: "英语音标",
		zyzf: "其他"
	},
	'edittable': {
		'static': {
			'lang_tableStyle': '表格样式',
			'lang_insertCaption': '添加表格名称行',
			'lang_insertTitle': '添加表格标题行',
			'lang_insertTitleCol': '添加表格标题列',
			'lang_orderbycontent': "使表格内容可排序",
			'lang_tableSize': '自动调整表格尺寸',
			'lang_autoSizeContent': '按表格文字自适应',
			'lang_autoSizePage': '按页面宽度自适应',
			'lang_example': '示例',
			'lang_borderStyle': '表格边框',
			'lang_color': '颜色:'
		},
		captionName: '表格名称',
		titleName: '标题',
		cellsName: '内容',
		errorMsg: '有合并单元格，不可排序'
	},
	'edittip': {
		'static': {
			lang_delRow: '删除整行',
			lang_delCol: '删除整列'
		}
	},
	'edittd': {
		'static': {
			lang_tdBkColor: '背景颜色:'
		}
	},
	'formula': {
		'static': {}
	},
	'wordimage': {
		'static': {
			lang_resave: "转存步骤",
			uploadBtn: {
				src: "upload.png",
				alt: "上传"
			},
			clipboard: {
				style: "background: url(copy.png) -153px -1px no-repeat;"
			},
			lang_step: "1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"
		},
		'fileType': "图片",
		'flashError': "FLASH初始化失败，请检查FLASH插件是否正确安装！",
		'netError': "网络连接错误，请重试！",
		'copySuccess': "图片地址已经复制！",
		'flashI18n': {}
	},
	'autosave': {
		'saving': '保存中...',
		'success': '本地保存成功'
	}
};;

(function(factory) {
	if(typeof define === 'function' && define.amd) {
		define(['jquery'], factory);
	} else if(typeof exports === 'object') {
		module.exports = factory(require('jquery'));
	} else {
		factory(jQuery);
	}
}(function($) {
	var pluses = /\+/g;

	function encode(s) {
		return config.raw ? s : encodeURIComponent(s);
	}

	function decode(s) {
		return config.raw ? s : decodeURIComponent(s);
	}

	function stringifyCookieValue(value) {
		return encode(config.json ? JSON.stringify(value) : String(value));
	}

	function parseCookieValue(s) {
		if(s.indexOf('"') === 0) {
			s = s.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, '\\');
		}
		try {
			s = decodeURIComponent(s.replace(pluses, ' '));
			return config.json ? JSON.parse(s) : s;
		} catch(e) {}
	}

	function read(s, converter) {
		var value = config.raw ? s : parseCookieValue(s);
		return $.isFunction(converter) ? converter(value) : value;
	}
	var config = $.cookie = function(key, value, options) {
		if(arguments.length > 1 && !$.isFunction(value)) {
			options = $.extend({}, config.defaults, options);
			if(typeof options.expires === 'number') {
				var days = options.expires,
					t = options.expires = new Date();
				t.setMilliseconds(t.getMilliseconds() + days * 864e+5);
			}
			return(document.cookie = [encode(key), '=', stringifyCookieValue(value), options.expires ? '; expires=' + options.expires.toUTCString() : '', options.path ? '; path=' + options.path : '', options.domain ? '; domain=' + options.domain : '', options.secure ? '; secure' : ''].join(''));
		}
		var result = key ? undefined : {},
			cookies = document.cookie ? document.cookie.split('; ') : [],
			i = 0,
			l = cookies.length;
		for(; i < l; i++) {
			var parts = cookies[i].split('='),
				name = decode(parts.shift()),
				cookie = parts.join('=');
			if(key === name) {
				result = read(cookie, value);
				break;
			}
			if(!key && (cookie = read(cookie)) !== undefined) {
				result[name] = cookie;
			}
		}
		return result;
	};
	config.defaults = {};
	$.removeCookie = function(key, options) {
		$.cookie(key, '', $.extend({}, options, {
			expires: -1
		}));
		return !$.cookie(key);
	};
}));;
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.12
 *
 * Requires: jQuery 1.2.2+
 */
! function(a) {
	"function" == typeof define && define.amd ? define(["jquery"], a) : "object" == typeof exports ? module.exports = a : a(jQuery)
}(function(a) {
	function b(b) {
		var g = b || window.event,
			h = i.call(arguments, 1),
			j = 0,
			l = 0,
			m = 0,
			n = 0,
			o = 0,
			p = 0;
		if(b = a.event.fix(g), b.type = "mousewheel", "detail" in g && (m = -1 * g.detail), "wheelDelta" in g && (m = g.wheelDelta), "wheelDeltaY" in g && (m = g.wheelDeltaY), "wheelDeltaX" in g && (l = -1 * g.wheelDeltaX), "axis" in g && g.axis === g.HORIZONTAL_AXIS && (l = -1 * m, m = 0), j = 0 === m ? l : m, "deltaY" in g && (m = -1 * g.deltaY, j = m), "deltaX" in g && (l = g.deltaX, 0 === m && (j = -1 * l)), 0 !== m || 0 !== l) {
			if(1 === g.deltaMode) {
				var q = a.data(this, "mousewheel-line-height");
				j *= q, m *= q, l *= q
			} else if(2 === g.deltaMode) {
				var r = a.data(this, "mousewheel-page-height");
				j *= r, m *= r, l *= r
			}
			if(n = Math.max(Math.abs(m), Math.abs(l)), (!f || f > n) && (f = n, d(g, n) && (f /= 40)), d(g, n) && (j /= 40, l /= 40, m /= 40), j = Math[j >= 1 ? "floor" : "ceil"](j / f), l = Math[l >= 1 ? "floor" : "ceil"](l / f), m = Math[m >= 1 ? "floor" : "ceil"](m / f), k.settings.normalizeOffset && this.getBoundingClientRect) {
				var s = this.getBoundingClientRect();
				o = b.clientX - s.left, p = b.clientY - s.top
			}
			return b.deltaX = l, b.deltaY = m, b.deltaFactor = f, b.offsetX = o, b.offsetY = p, b.deltaMode = 0, h.unshift(b, j, l, m), e && clearTimeout(e), e = setTimeout(c, 200), (a.event.dispatch || a.event.handle).apply(this, h)
		}
	}

	function c() {
		f = null
	}

	function d(a, b) {
		return k.settings.adjustOldDeltas && "mousewheel" === a.type && b % 120 === 0
	}
	var e, f, g = ["wheel", "mousewheel", "DOMMouseScroll", "MozMousePixelScroll"],
		h = "onwheel" in document || document.documentMode >= 9 ? ["wheel"] : ["mousewheel", "DomMouseScroll", "MozMousePixelScroll"],
		i = Array.prototype.slice;
	if(a.event.fixHooks)
		for(var j = g.length; j;) a.event.fixHooks[g[--j]] = a.event.mouseHooks;
	var k = a.event.special.mousewheel = {
		version: "3.1.12",
		setup: function() {
			if(this.addEventListener)
				for(var c = h.length; c;) this.addEventListener(h[--c], b, !1);
			else this.onmousewheel = b;
			a.data(this, "mousewheel-line-height", k.getLineHeight(this)), a.data(this, "mousewheel-page-height", k.getPageHeight(this))
		},
		teardown: function() {
			if(this.removeEventListener)
				for(var c = h.length; c;) this.removeEventListener(h[--c], b, !1);
			else this.onmousewheel = null;
			a.removeData(this, "mousewheel-line-height"), a.removeData(this, "mousewheel-page-height")
		},
		getLineHeight: function(b) {
			var c = a(b),
				d = c["offsetParent" in a.fn ? "offsetParent" : "parent"]();
			return d.length || (d = a("body")), parseInt(d.css("fontSize"), 10) || parseInt(c.css("fontSize"), 10) || 16
		},
		getPageHeight: function(b) {
			return a(b).height()
		},
		settings: {
			adjustOldDeltas: !0,
			normalizeOffset: !0
		}
	};
	a.fn.extend({
		mousewheel: function(a) {
			return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
		},
		unmousewheel: function(a) {
			return this.unbind("mousewheel", a)
		}
	})
});;

! function() {
	function tinycolor(color, opts) {
		if(color = color ? color : "", opts = opts || {}, color instanceof tinycolor) return color;
		if(!(this instanceof tinycolor)) return new tinycolor(color, opts);
		var rgb = inputToRGB(color);
		this._originalInput = color, this._r = rgb.r, this._g = rgb.g, this._b = rgb.b, this._a = rgb.a, this._roundA = mathRound(100 * this._a) / 100, this._format = opts.format || rgb.format, this._gradientType = opts.gradientType, this._r < 1 && (this._r = mathRound(this._r)), this._g < 1 && (this._g = mathRound(this._g)), this._b < 1 && (this._b = mathRound(this._b)), this._ok = rgb.ok, this._tc_id = tinyCounter++
	}

	function inputToRGB(color) {
		var rgb = {
				r: 0,
				g: 0,
				b: 0
			},
			a = 1,
			ok = !1,
			format = !1;
		return "string" == typeof color && (color = stringInputToObject(color)), "object" == typeof color && (color.hasOwnProperty("r") && color.hasOwnProperty("g") && color.hasOwnProperty("b") ? (rgb = rgbToRgb(color.r, color.g, color.b), ok = !0, format = "%" === String(color.r).substr(-1) ? "prgb" : "rgb") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("v") ? (color.s = convertToPercentage(color.s), color.v = convertToPercentage(color.v), rgb = hsvToRgb(color.h, color.s, color.v), ok = !0, format = "hsv") : color.hasOwnProperty("h") && color.hasOwnProperty("s") && color.hasOwnProperty("l") && (color.s = convertToPercentage(color.s), color.l = convertToPercentage(color.l), rgb = hslToRgb(color.h, color.s, color.l), ok = !0, format = "hsl"), color.hasOwnProperty("a") && (a = color.a)), a = boundAlpha(a), {
			ok: ok,
			format: color.format || format,
			r: mathMin(255, mathMax(rgb.r, 0)),
			g: mathMin(255, mathMax(rgb.g, 0)),
			b: mathMin(255, mathMax(rgb.b, 0)),
			a: a
		}
	}

	function rgbToRgb(r, g, b) {
		return {
			r: 255 * bound01(r, 255),
			g: 255 * bound01(g, 255),
			b: 255 * bound01(b, 255)
		}
	}

	function rgbToHsl(r, g, b) {
		r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
		var h, s, max = mathMax(r, g, b),
			min = mathMin(r, g, b),
			l = (max + min) / 2;
		if(max == min) h = s = 0;
		else {
			var d = max - min;
			switch(s = l > .5 ? d / (2 - max - min) : d / (max + min), max) {
				case r:
					h = (g - b) / d + (b > g ? 6 : 0);
					break;
				case g:
					h = (b - r) / d + 2;
					break;
				case b:
					h = (r - g) / d + 4
			}
			h /= 6
		}
		return {
			h: h,
			s: s,
			l: l
		}
	}

	function hslToRgb(h, s, l) {
		function hue2rgb(p, q, t) {
			return 0 > t && (t += 1), t > 1 && (t -= 1), 1 / 6 > t ? p + 6 * (q - p) * t : .5 > t ? q : 2 / 3 > t ? p + 6 * (q - p) * (2 / 3 - t) : p
		}
		var r, g, b;
		if(h = bound01(h, 360), s = bound01(s, 100), l = bound01(l, 100), 0 === s) r = g = b = l;
		else {
			var q = .5 > l ? l * (1 + s) : l + s - l * s,
				p = 2 * l - q;
			r = hue2rgb(p, q, h + 1 / 3), g = hue2rgb(p, q, h), b = hue2rgb(p, q, h - 1 / 3)
		}
		return {
			r: 255 * r,
			g: 255 * g,
			b: 255 * b
		}
	}

	function rgbToHsv(r, g, b) {
		r = bound01(r, 255), g = bound01(g, 255), b = bound01(b, 255);
		var h, s, max = mathMax(r, g, b),
			min = mathMin(r, g, b),
			v = max,
			d = max - min;
		if(s = 0 === max ? 0 : d / max, max == min) h = 0;
		else {
			switch(max) {
				case r:
					h = (g - b) / d + (b > g ? 6 : 0);
					break;
				case g:
					h = (b - r) / d + 2;
					break;
				case b:
					h = (r - g) / d + 4
			}
			h /= 6
		}
		return {
			h: h,
			s: s,
			v: v
		}
	}

	function hsvToRgb(h, s, v) {
		h = 6 * bound01(h, 360), s = bound01(s, 100), v = bound01(v, 100);
		var i = math.floor(h),
			f = h - i,
			p = v * (1 - s),
			q = v * (1 - f * s),
			t = v * (1 - (1 - f) * s),
			mod = i % 6,
			r = [v, q, p, p, t, v][mod],
			g = [t, v, v, q, p, p][mod],
			b = [p, p, t, v, v, q][mod];
		return {
			r: 255 * r,
			g: 255 * g,
			b: 255 * b
		}
	}

	function rgbToHex(r, g, b, allow3Char) {
		var hex = [pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];
		return allow3Char && hex[0].charAt(0) == hex[0].charAt(1) && hex[1].charAt(0) == hex[1].charAt(1) && hex[2].charAt(0) == hex[2].charAt(1) ? hex[0].charAt(0) + hex[1].charAt(0) + hex[2].charAt(0) : hex.join("")
	}

	function rgbaToHex(r, g, b, a) {
		var hex = [pad2(convertDecimalToHex(a)), pad2(mathRound(r).toString(16)), pad2(mathRound(g).toString(16)), pad2(mathRound(b).toString(16))];
		return hex.join("")
	}

	function desaturate(color, amount) {
		amount = 0 === amount ? 0 : amount || 10;
		var hsl = tinycolor(color).toHsl();
		return hsl.s -= amount / 100, hsl.s = clamp01(hsl.s), tinycolor(hsl)
	}

	function saturate(color, amount) {
		amount = 0 === amount ? 0 : amount || 10;
		var hsl = tinycolor(color).toHsl();
		return hsl.s += amount / 100, hsl.s = clamp01(hsl.s), tinycolor(hsl)
	}

	function greyscale(color) {
		return tinycolor(color).desaturate(100)
	}

	function lighten(color, amount) {
		amount = 0 === amount ? 0 : amount || 10;
		var hsl = tinycolor(color).toHsl();
		return hsl.l += amount / 100, hsl.l = clamp01(hsl.l), tinycolor(hsl)
	}

	function brighten(color, amount) {
		amount = 0 === amount ? 0 : amount || 10;
		var rgb = tinycolor(color).toRgb();
		return rgb.r = mathMax(0, mathMin(255, rgb.r - mathRound(255 * -(amount / 100)))), rgb.g = mathMax(0, mathMin(255, rgb.g - mathRound(255 * -(amount / 100)))), rgb.b = mathMax(0, mathMin(255, rgb.b - mathRound(255 * -(amount / 100)))), tinycolor(rgb)
	}

	function darken(color, amount) {
		amount = 0 === amount ? 0 : amount || 10;
		var hsl = tinycolor(color).toHsl();
		return hsl.l -= amount / 100, hsl.l = clamp01(hsl.l), tinycolor(hsl)
	}

	function spin(color, amount) {
		var hsl = tinycolor(color).toHsl(),
			hue = (mathRound(hsl.h) + amount) % 360;
		return hsl.h = 0 > hue ? 360 + hue : hue, tinycolor(hsl)
	}

	function complement(color) {
		var hsl = tinycolor(color).toHsl();
		return hsl.h = (hsl.h + 180) % 360, tinycolor(hsl)
	}

	function triad(color) {
		var hsl = tinycolor(color).toHsl(),
			h = hsl.h;
		return [tinycolor(color), tinycolor({
			h: (h + 120) % 360,
			s: hsl.s,
			l: hsl.l
		}), tinycolor({
			h: (h + 240) % 360,
			s: hsl.s,
			l: hsl.l
		})]
	}

	function tetrad(color) {
		var hsl = tinycolor(color).toHsl(),
			h = hsl.h;
		return [tinycolor(color), tinycolor({
			h: (h + 90) % 360,
			s: hsl.s,
			l: hsl.l
		}), tinycolor({
			h: (h + 180) % 360,
			s: hsl.s,
			l: hsl.l
		}), tinycolor({
			h: (h + 270) % 360,
			s: hsl.s,
			l: hsl.l
		})]
	}

	function splitcomplement(color) {
		var hsl = tinycolor(color).toHsl(),
			h = hsl.h;
		return [tinycolor(color), tinycolor({
			h: (h + 72) % 360,
			s: hsl.s,
			l: hsl.l
		}), tinycolor({
			h: (h + 216) % 360,
			s: hsl.s,
			l: hsl.l
		})]
	}

	function analogous(color, results, slices) {
		results = results || 6, slices = slices || 30;
		var hsl = tinycolor(color).toHsl(),
			part = 360 / slices,
			ret = [tinycolor(color)];
		for(hsl.h = (hsl.h - (part * results >> 1) + 720) % 360; --results;) hsl.h = (hsl.h + part) % 360, ret.push(tinycolor(hsl));
		return ret
	}

	function monochromatic(color, results) {
		results = results || 6;
		for(var hsv = tinycolor(color).toHsv(), h = hsv.h, s = hsv.s, v = hsv.v, ret = [], modification = 1 / results; results--;) ret.push(tinycolor({
			h: h,
			s: s,
			v: v
		})), v = (v + modification) % 1;
		return ret
	}

	function flip(o) {
		var flipped = {};
		for(var i in o) o.hasOwnProperty(i) && (flipped[o[i]] = i);
		return flipped
	}

	function boundAlpha(a) {
		return a = parseFloat(a), (isNaN(a) || 0 > a || a > 1) && (a = 1), a
	}

	function bound01(n, max) {
		isOnePointZero(n) && (n = "100%");
		var processPercent = isPercentage(n);
		return n = mathMin(max, mathMax(0, parseFloat(n))), processPercent && (n = parseInt(n * max, 10) / 100), math.abs(n - max) < 1e-6 ? 1 : n % max / parseFloat(max)
	}

	function clamp01(val) {
		return mathMin(1, mathMax(0, val))
	}

	function parseIntFromHex(val) {
		return parseInt(val, 16)
	}

	function isOnePointZero(n) {
		return "string" == typeof n && -1 != n.indexOf(".") && 1 === parseFloat(n)
	}

	function isPercentage(n) {
		return "string" == typeof n && -1 != n.indexOf("%")
	}

	function pad2(c) {
		return 1 == c.length ? "0" + c : "" + c
	}

	function convertToPercentage(n) {
		return 1 >= n && (n = 100 * n + "%"), n
	}

	function convertDecimalToHex(d) {
		return Math.round(255 * parseFloat(d)).toString(16)
	}

	function convertHexToDecimal(h) {
		return parseIntFromHex(h) / 255
	}

	function stringInputToObject(color) {
		color = color.replace(trimLeft, "").replace(trimRight, "").toLowerCase();
		var named = !1;
		if(names[color]) color = names[color], named = !0;
		else if("transparent" == color) return {
			r: 0,
			g: 0,
			b: 0,
			a: 0,
			format: "name"
		};
		var match;
		return(match = matchers.rgb.exec(color)) ? {
			r: match[1],
			g: match[2],
			b: match[3]
		} : (match = matchers.rgba.exec(color)) ? {
			r: match[1],
			g: match[2],
			b: match[3],
			a: match[4]
		} : (match = matchers.hsl.exec(color)) ? {
			h: match[1],
			s: match[2],
			l: match[3]
		} : (match = matchers.hsla.exec(color)) ? {
			h: match[1],
			s: match[2],
			l: match[3],
			a: match[4]
		} : (match = matchers.hsv.exec(color)) ? {
			h: match[1],
			s: match[2],
			v: match[3]
		} : (match = matchers.hsva.exec(color)) ? {
			h: match[1],
			s: match[2],
			v: match[3],
			a: match[4]
		} : (match = matchers.hex8.exec(color)) ? {
			a: convertHexToDecimal(match[1]),
			r: parseIntFromHex(match[2]),
			g: parseIntFromHex(match[3]),
			b: parseIntFromHex(match[4]),
			format: named ? "name" : "hex8"
		} : (match = matchers.hex6.exec(color)) ? {
			r: parseIntFromHex(match[1]),
			g: parseIntFromHex(match[2]),
			b: parseIntFromHex(match[3]),
			format: named ? "name" : "hex"
		} : (match = matchers.hex3.exec(color)) ? {
			r: parseIntFromHex(match[1] + "" + match[1]),
			g: parseIntFromHex(match[2] + "" + match[2]),
			b: parseIntFromHex(match[3] + "" + match[3]),
			format: named ? "name" : "hex"
		} : !1
	}

	function validateWCAG2Parms(parms) {
		var level, size;
		return parms = parms || {
			level: "AA",
			size: "small"
		}, level = (parms.level || "AA").toUpperCase(), size = (parms.size || "small").toLowerCase(), "AA" !== level && "AAA" !== level && (level = "AA"), "small" !== size && "large" !== size && (size = "small"), {
			level: level,
			size: size
		}
	}
	var trimLeft = /^\s+/,
		trimRight = /\s+$/,
		tinyCounter = 0,
		math = Math,
		mathRound = math.round,
		mathMin = math.min,
		mathMax = math.max,
		mathRandom = math.random;
	tinycolor.prototype = {
		isDark: function() {
			return this.getBrightness() < 128
		},
		isLight: function() {
			return !this.isDark()
		},
		isValid: function() {
			return this._ok
		},
		getOriginalInput: function() {
			return this._originalInput
		},
		getFormat: function() {
			return this._format
		},
		getAlpha: function() {
			return this._a
		},
		getBrightness: function() {
			var rgb = this.toRgb();
			return(299 * rgb.r + 587 * rgb.g + 114 * rgb.b) / 1e3
		},
		getLuminance: function() {
			var RsRGB, GsRGB, BsRGB, R, G, B, rgb = this.toRgb();
			return RsRGB = rgb.r / 255, GsRGB = rgb.g / 255, BsRGB = rgb.b / 255, R = .03928 >= RsRGB ? RsRGB / 12.92 : Math.pow((RsRGB + .055) / 1.055, 2.4), G = .03928 >= GsRGB ? GsRGB / 12.92 : Math.pow((GsRGB + .055) / 1.055, 2.4), B = .03928 >= BsRGB ? BsRGB / 12.92 : Math.pow((BsRGB + .055) / 1.055, 2.4), .2126 * R + .7152 * G + .0722 * B
		},
		setAlpha: function(value) {
			return this._a = boundAlpha(value), this._roundA = mathRound(100 * this._a) / 100, this
		},
		toHsv: function() {
			var hsv = rgbToHsv(this._r, this._g, this._b);
			return {
				h: 360 * hsv.h,
				s: hsv.s,
				v: hsv.v,
				a: this._a
			}
		},
		toHsvString: function() {
			var hsv = rgbToHsv(this._r, this._g, this._b),
				h = mathRound(360 * hsv.h),
				s = mathRound(100 * hsv.s),
				v = mathRound(100 * hsv.v);
			return 1 == this._a ? "hsv(" + h + ", " + s + "%, " + v + "%)" : "hsva(" + h + ", " + s + "%, " + v + "%, " + this._roundA + ")"
		},
		toHsl: function() {
			var hsl = rgbToHsl(this._r, this._g, this._b);
			return {
				h: 360 * hsl.h,
				s: hsl.s,
				l: hsl.l,
				a: this._a
			}
		},
		toHslString: function() {
			var hsl = rgbToHsl(this._r, this._g, this._b),
				h = mathRound(360 * hsl.h),
				s = mathRound(100 * hsl.s),
				l = mathRound(100 * hsl.l);
			return 1 == this._a ? "hsl(" + h + ", " + s + "%, " + l + "%)" : "hsla(" + h + ", " + s + "%, " + l + "%, " + this._roundA + ")"
		},
		toHex: function(allow3Char) {
			return rgbToHex(this._r, this._g, this._b, allow3Char)
		},
		toHexString: function(allow3Char) {
			return "#" + this.toHex(allow3Char)
		},
		toHex8: function() {
			return rgbaToHex(this._r, this._g, this._b, this._a)
		},
		toHex8String: function() {
			return "#" + this.toHex8()
		},
		toRgb: function() {
			return {
				r: mathRound(this._r),
				g: mathRound(this._g),
				b: mathRound(this._b),
				a: this._a
			}
		},
		toRgbString: function() {
			return 1 == this._a ? "rgb(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ")" : "rgba(" + mathRound(this._r) + ", " + mathRound(this._g) + ", " + mathRound(this._b) + ", " + this._roundA + ")"
		},
		toPercentageRgb: function() {
			return {
				r: mathRound(100 * bound01(this._r, 255)) + "%",
				g: mathRound(100 * bound01(this._g, 255)) + "%",
				b: mathRound(100 * bound01(this._b, 255)) + "%",
				a: this._a
			}
		},
		toPercentageRgbString: function() {
			return 1 == this._a ? "rgb(" + mathRound(100 * bound01(this._r, 255)) + "%, " + mathRound(100 * bound01(this._g, 255)) + "%, " + mathRound(100 * bound01(this._b, 255)) + "%)" : "rgba(" + mathRound(100 * bound01(this._r, 255)) + "%, " + mathRound(100 * bound01(this._g, 255)) + "%, " + mathRound(100 * bound01(this._b, 255)) + "%, " + this._roundA + ")"
		},
		toName: function() {
			return 0 === this._a ? "transparent" : this._a < 1 ? !1 : hexNames[rgbToHex(this._r, this._g, this._b, !0)] || !1
		},
		toFilter: function(secondColor) {
			var hex8String = "#" + rgbaToHex(this._r, this._g, this._b, this._a),
				secondHex8String = hex8String,
				gradientType = this._gradientType ? "GradientType = 1, " : "";
			if(secondColor) {
				var s = tinycolor(secondColor);
				secondHex8String = s.toHex8String()
			}
			return "progid:DXImageTransform.Microsoft.gradient(" + gradientType + "startColorstr=" + hex8String + ",endColorstr=" + secondHex8String + ")"
		},
		toString: function(format) {
			var formatSet = !!format;
			format = format || this._format;
			var formattedString = !1,
				hasAlpha = this._a < 1 && this._a >= 0,
				needsAlphaFormat = !formatSet && hasAlpha && ("hex" === format || "hex6" === format || "hex3" === format || "name" === format);
			return needsAlphaFormat ? "name" === format && 0 === this._a ? this.toName() : this.toRgbString() : ("rgb" === format && (formattedString = this.toRgbString()), "prgb" === format && (formattedString = this.toPercentageRgbString()), ("hex" === format || "hex6" === format) && (formattedString = this.toHexString()), "hex3" === format && (formattedString = this.toHexString(!0)), "hex8" === format && (formattedString = this.toHex8String()), "name" === format && (formattedString = this.toName()), "hsl" === format && (formattedString = this.toHslString()), "hsv" === format && (formattedString = this.toHsvString()), formattedString || this.toHexString())
		},
		clone: function() {
			return tinycolor(this.toString())
		},
		_applyModification: function(fn, args) {
			var color = fn.apply(null, [this].concat([].slice.call(args)));
			return this._r = color._r, this._g = color._g, this._b = color._b, this.setAlpha(color._a), this
		},
		lighten: function() {
			return this._applyModification(lighten, arguments)
		},
		brighten: function() {
			return this._applyModification(brighten, arguments)
		},
		darken: function() {
			return this._applyModification(darken, arguments)
		},
		desaturate: function() {
			return this._applyModification(desaturate, arguments)
		},
		saturate: function() {
			return this._applyModification(saturate, arguments)
		},
		greyscale: function() {
			return this._applyModification(greyscale, arguments)
		},
		spin: function() {
			return this._applyModification(spin, arguments)
		},
		_applyCombination: function(fn, args) {
			return fn.apply(null, [this].concat([].slice.call(args)))
		},
		analogous: function() {
			return this._applyCombination(analogous, arguments)
		},
		complement: function() {
			return this._applyCombination(complement, arguments)
		},
		monochromatic: function() {
			return this._applyCombination(monochromatic, arguments)
		},
		splitcomplement: function() {
			return this._applyCombination(splitcomplement, arguments)
		},
		triad: function() {
			return this._applyCombination(triad, arguments)
		},
		tetrad: function() {
			return this._applyCombination(tetrad, arguments)
		}
	}, tinycolor.fromRatio = function(color, opts) {
		if("object" == typeof color) {
			var newColor = {};
			for(var i in color) color.hasOwnProperty(i) && (newColor[i] = "a" === i ? color[i] : convertToPercentage(color[i]));
			color = newColor
		}
		return tinycolor(color, opts)
	}, tinycolor.equals = function(color1, color2) {
		return color1 && color2 ? tinycolor(color1).toRgbString() == tinycolor(color2).toRgbString() : !1
	}, tinycolor.random = function() {
		return tinycolor.fromRatio({
			r: mathRandom(),
			g: mathRandom(),
			b: mathRandom()
		})
	}, tinycolor.mix = function(color1, color2, amount) {
		amount = 0 === amount ? 0 : amount || 50;
		var w1, rgb1 = tinycolor(color1).toRgb(),
			rgb2 = tinycolor(color2).toRgb(),
			p = amount / 100,
			w = 2 * p - 1,
			a = rgb2.a - rgb1.a;
		w1 = -1 == w * a ? w : (w + a) / (1 + w * a), w1 = (w1 + 1) / 2;
		var w2 = 1 - w1,
			rgba = {
				r: rgb2.r * w1 + rgb1.r * w2,
				g: rgb2.g * w1 + rgb1.g * w2,
				b: rgb2.b * w1 + rgb1.b * w2,
				a: rgb2.a * p + rgb1.a * (1 - p)
			};
		return tinycolor(rgba)
	}, tinycolor.readability = function(color1, color2) {
		var c1 = tinycolor(color1),
			c2 = tinycolor(color2);
		return(Math.max(c1.getLuminance(), c2.getLuminance()) + .05) / (Math.min(c1.getLuminance(), c2.getLuminance()) + .05)
	}, tinycolor.isReadable = function(color1, color2, wcag2) {
		var wcag2Parms, out, readability = tinycolor.readability(color1, color2);
		switch(out = !1, wcag2Parms = validateWCAG2Parms(wcag2), wcag2Parms.level + wcag2Parms.size) {
			case "AAsmall":
			case "AAAlarge":
				out = readability >= 4.5;
				break;
			case "AAlarge":
				out = readability >= 3;
				break;
			case "AAAsmall":
				out = readability >= 7
		}
		return out
	}, tinycolor.mostReadable = function(baseColor, colorList, args) {
		var readability, includeFallbackColors, level, size, bestColor = null,
			bestScore = 0;
		args = args || {}, includeFallbackColors = args.includeFallbackColors, level = args.level, size = args.size;
		for(var i = 0; i < colorList.length; i++) readability = tinycolor.readability(baseColor, colorList[i]), readability > bestScore && (bestScore = readability, bestColor = tinycolor(colorList[i]));
		return tinycolor.isReadable(baseColor, bestColor, {
			level: level,
			size: size
		}) || !includeFallbackColors ? bestColor : (args.includeFallbackColors = !1, tinycolor.mostReadable(baseColor, ["#fff", "#000"], args))
	};
	var names = tinycolor.names = {
			aliceblue: "f0f8ff",
			antiquewhite: "faebd7",
			aqua: "0ff",
			aquamarine: "7fffd4",
			azure: "f0ffff",
			beige: "f5f5dc",
			bisque: "ffe4c4",
			black: "000",
			blanchedalmond: "ffebcd",
			blue: "00f",
			blueviolet: "8a2be2",
			brown: "a52a2a",
			burlywood: "deb887",
			burntsienna: "ea7e5d",
			cadetblue: "5f9ea0",
			chartreuse: "7fff00",
			chocolate: "d2691e",
			coral: "ff7f50",
			cornflowerblue: "6495ed",
			cornsilk: "fff8dc",
			crimson: "dc143c",
			cyan: "0ff",
			darkblue: "00008b",
			darkcyan: "008b8b",
			darkgoldenrod: "b8860b",
			darkgray: "a9a9a9",
			darkgreen: "006400",
			darkgrey: "a9a9a9",
			darkkhaki: "bdb76b",
			darkmagenta: "8b008b",
			darkolivegreen: "556b2f",
			darkorange: "ff8c00",
			darkorchid: "9932cc",
			darkred: "8b0000",
			darksalmon: "e9967a",
			darkseagreen: "8fbc8f",
			darkslateblue: "483d8b",
			darkslategray: "2f4f4f",
			darkslategrey: "2f4f4f",
			darkturquoise: "00ced1",
			darkviolet: "9400d3",
			deeppink: "ff1493",
			deepskyblue: "00bfff",
			dimgray: "696969",
			dimgrey: "696969",
			dodgerblue: "1e90ff",
			firebrick: "b22222",
			floralwhite: "fffaf0",
			forestgreen: "228b22",
			fuchsia: "f0f",
			gainsboro: "dcdcdc",
			ghostwhite: "f8f8ff",
			gold: "ffd700",
			goldenrod: "daa520",
			gray: "808080",
			green: "008000",
			greenyellow: "adff2f",
			grey: "808080",
			honeydew: "f0fff0",
			hotpink: "ff69b4",
			indianred: "cd5c5c",
			indigo: "4b0082",
			ivory: "fffff0",
			khaki: "f0e68c",
			lavender: "e6e6fa",
			lavenderblush: "fff0f5",
			lawngreen: "7cfc00",
			lemonchiffon: "fffacd",
			lightblue: "add8e6",
			lightcoral: "f08080",
			lightcyan: "e0ffff",
			lightgoldenrodyellow: "fafad2",
			lightgray: "d3d3d3",
			lightgreen: "90ee90",
			lightgrey: "d3d3d3",
			lightpink: "ffb6c1",
			lightsalmon: "ffa07a",
			lightseagreen: "20b2aa",
			lightskyblue: "87cefa",
			lightslategray: "789",
			lightslategrey: "789",
			lightsteelblue: "b0c4de",
			lightyellow: "ffffe0",
			lime: "0f0",
			limegreen: "32cd32",
			linen: "faf0e6",
			magenta: "f0f",
			maroon: "800000",
			mediumaquamarine: "66cdaa",
			mediumblue: "0000cd",
			mediumorchid: "ba55d3",
			mediumpurple: "9370db",
			mediumseagreen: "3cb371",
			mediumslateblue: "7b68ee",
			mediumspringgreen: "00fa9a",
			mediumturquoise: "48d1cc",
			mediumvioletred: "c71585",
			midnightblue: "191970",
			mintcream: "f5fffa",
			mistyrose: "ffe4e1",
			moccasin: "ffe4b5",
			navajowhite: "ffdead",
			navy: "000080",
			oldlace: "fdf5e6",
			olive: "808000",
			olivedrab: "6b8e23",
			orange: "ffa500",
			orangered: "ff4500",
			orchid: "da70d6",
			palegoldenrod: "eee8aa",
			palegreen: "98fb98",
			paleturquoise: "afeeee",
			palevioletred: "db7093",
			papayawhip: "ffefd5",
			peachpuff: "ffdab9",
			peru: "cd853f",
			pink: "ffc0cb",
			plum: "dda0dd",
			powderblue: "b0e0e6",
			purple: "800080",
			rebeccapurple: "663399",
			red: "f00",
			rosybrown: "bc8f8f",
			royalblue: "4169e1",
			saddlebrown: "8b4513",
			salmon: "fa8072",
			sandybrown: "f4a460",
			seagreen: "2e8b57",
			seashell: "fff5ee",
			sienna: "a0522d",
			silver: "c0c0c0",
			skyblue: "87ceeb",
			slateblue: "6a5acd",
			slategray: "708090",
			slategrey: "708090",
			snow: "fffafa",
			springgreen: "00ff7f",
			steelblue: "4682b4",
			tan: "d2b48c",
			teal: "008080",
			thistle: "d8bfd8",
			tomato: "ff6347",
			turquoise: "40e0d0",
			violet: "ee82ee",
			wheat: "f5deb3",
			white: "fff",
			whitesmoke: "f5f5f5",
			yellow: "ff0",
			yellowgreen: "9acd32"
		},
		hexNames = tinycolor.hexNames = flip(names),
		matchers = function() {
			var CSS_INTEGER = "[-\\+]?\\d+%?",
				CSS_NUMBER = "[-\\+]?\\d*\\.\\d+%?",
				CSS_UNIT = "(?:" + CSS_NUMBER + ")|(?:" + CSS_INTEGER + ")",
				PERMISSIVE_MATCH3 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?",
				PERMISSIVE_MATCH4 = "[\\s|\\(]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")[,|\\s]+(" + CSS_UNIT + ")\\s*\\)?";
			return {
				rgb: new RegExp("rgb" + PERMISSIVE_MATCH3),
				rgba: new RegExp("rgba" + PERMISSIVE_MATCH4),
				hsl: new RegExp("hsl" + PERMISSIVE_MATCH3),
				hsla: new RegExp("hsla" + PERMISSIVE_MATCH4),
				hsv: new RegExp("hsv" + PERMISSIVE_MATCH3),
				hsva: new RegExp("hsva" + PERMISSIVE_MATCH4),
				hex3: /^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
				hex6: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
				hex8: /^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/
			}
		}();
	"undefined" != typeof module && module.exports ? module.exports = tinycolor : "function" == typeof define && define.amd ? define(function() {
		return tinycolor
	}) : window.tinycolor = tinycolor
}();;

var random_color_step = 1;
var custom_style_set = false;
var current_edit_img = null;
var allow_upload_img = null;
var current_edit_msg_id = '';
var current_editor;
var replace_full_color = false;
var replace_clear_interval = null;

function strip_stack_span(html) {
	var docObj = $('<div>' + html + '</div>');
	docObj.find('li,colgroup,a').each(function() {
		if($.trim($(this).text()) == "" && $(this).find('img').size() == 0) {
			$(this).remove();
		}
	});
	var has_secspan = false;
	do {
		has_secspan = false;
		docObj.find('span:has(span)').each(function(i) {
			var innerobj = $(this).find('> span');
			if(innerobj.size() > 1) {
				$(this).find('span').each(function() {
					if($.trim($(this).text()) == "") {
						$(this).replaceWith($(this).html());
					}
				});
				return;
			} else if(innerobj.size() == 0) {
				return;
			}
			if($.trim($(this).text()) == $.trim(innerobj.text())) {
				has_secspan = true;
				var style = $(this).attr('style');
				var innserstyle = innerobj.attr('style');
				var newStyle = '';
				if(style && style != "") {
					newStyle += ';' + style;
				}
				if(innserstyle && innserstyle != "") {
					newStyle += ';' + innserstyle;
				}
				var new_html = '';
				$(this).find('> *').each(function() {
					if(this.tagName == "SPAN") {
						new_html += $(innerobj).html();
					} else {
						new_html += $(this).prop('outerHTML');
					}
				});
				$(this).attr('style', newStyle).html(new_html);
			}
		});
	} while (has_secspan);
	return docObj.html();
}

function strip_tags(input, allowed) {
	allowed = (((allowed || '') + '').toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join('');
	var tags = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,
		commentsAndPhpTags = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
	return input.replace(commentsAndPhpTags, '').replace(tags, function($0, $1) {
		return allowed.indexOf('<' + $1.toLowerCase() + '>') > -1 ? $0 : '';
	});
}

function htmlspecialchars_decode(string, quote_style) {
	var optTemp = 0,
		i = 0,
		noquotes = false;
	if(typeof quote_style === 'undefined') {
		quote_style = 2;
	}
	string = string.toString().replace(/&lt;/g, '<').replace(/&gt;/g, '>');
	var OPTS = {
		'ENT_NOQUOTES': 0,
		'ENT_HTML_QUOTE_SINGLE': 1,
		'ENT_HTML_QUOTE_DOUBLE': 2,
		'ENT_COMPAT': 2,
		'ENT_QUOTES': 3,
		'ENT_IGNORE': 4
	};
	if(quote_style === 0) {
		noquotes = true;
	}
	if(typeof quote_style !== 'number') {
		quote_style = [].concat(quote_style);
		for(i = 0; i < quote_style.length; i++) {
			if(OPTS[quote_style[i]] === 0) {
				noquotes = true;
			} else if(OPTS[quote_style[i]]) {
				optTemp = optTemp | OPTS[quote_style[i]];
			}
		}
		quote_style = optTemp;
	}
	if(quote_style & OPTS.ENT_HTML_QUOTE_SINGLE) {
		string = string.replace(/&#0*39;/g, "'");
	}
	if(!noquotes) {
		string = string.replace(/&quot;/g, '"');
	}
	string = string.replace(/&amp;/g, '&');
	return string;
}

function strip_imgthumb_opr(imgurl) {
	var idx = imgurl.indexOf('@');
	if(idx > 0) {
		return imgurl.substring(0, idx);
	}
	return imgurl;
}

function base64_decode(data) {
	var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
	var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
		ac = 0,
		dec = '',
		tmp_arr = [];
	if(!data) {
		return data;
	}
	data += '';
	do {
		h1 = b64.indexOf(data.charAt(i++));
		h2 = b64.indexOf(data.charAt(i++));
		h3 = b64.indexOf(data.charAt(i++));
		h4 = b64.indexOf(data.charAt(i++));
		bits = h1 << 18 | h2 << 12 | h3 << 6 | h4;
		o1 = bits >> 16 & 0xff;
		o2 = bits >> 8 & 0xff;
		o3 = bits & 0xff;
		if(h3 == 64) {
			tmp_arr[ac++] = String.fromCharCode(o1);
		} else if(h4 == 64) {
			tmp_arr[ac++] = String.fromCharCode(o1, o2);
		} else {
			tmp_arr[ac++] = String.fromCharCode(o1, o2, o3);
		}
	} while (i < data.length);
	dec = tmp_arr.join('');
	return decodeURIComponent(escape(dec.replace(/\0+$/, '')));
}

function base64_encode(data) {
	var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
	var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
		ac = 0,
		enc = '',
		tmp_arr = [];
	if(!data) {
		return data;
	}
	data = unescape(encodeURIComponent(data));
	do {
		o1 = data.charCodeAt(i++);
		o2 = data.charCodeAt(i++);
		o3 = data.charCodeAt(i++);
		bits = o1 << 16 | o2 << 8 | o3;
		h1 = bits >> 18 & 0x3f;
		h2 = bits >> 12 & 0x3f;
		h3 = bits >> 6 & 0x3f;
		h4 = bits & 0x3f;
		tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
	} while (i < data.length);
	enc = tmp_arr.join('');
	var r = data.length % 3;
	return(r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);
}

function str_replace(search, replace, subject, count) {
	var i = 0,
		j = 0,
		temp = '',
		repl = '',
		sl = 0,
		fl = 0,
		f = [].concat(search),
		r = [].concat(replace),
		s = subject,
		ra = Object.prototype.toString.call(r) === '[object Array]',
		sa = Object.prototype.toString.call(s) === '[object Array]';
	s = [].concat(s);
	if(count) {
		this.window[count] = 0;
	}
	for(i = 0, sl = s.length; i < sl; i++) {
		if(s[i] === '') {
			continue;
		}
		for(j = 0, fl = f.length; j < fl; j++) {
			temp = s[i] + '';
			repl = ra ? (r[j] !== undefined ? r[j] : '') : r[0];
			s[i] = (temp).split(f[j]).join(repl);
			if(count && s[i] !== temp) {
				this.window[count] += (temp.length - s[i].length) / f[j].length;
			}
		}
	}
	return sa ? s : s[0];
}

function getSelectionHtml(outer) {
	var range = current_editor.selection.getRange();
	if(range.startContainer.tagName == 'BODY' && range.startContainer === range.endContainer && range.endOffset > 0 && range.endOffset === range.startContainer.childNodes.length) {
		return getEditorHtml(outer);
	} else {
		range.select();
		var selectionObj = current_editor.selection.getNative();
		var rangeObj = selectionObj.getRangeAt(0);
		var docFragment = rangeObj.cloneContents();
		var testDiv = document.createElement("div");
		testDiv.appendChild(docFragment);
		var selectHtml = testDiv.innerHTML;
		if(selectHtml == "") {
			return "";
		} else {
			return parse135EditorHtml(selectHtml);
		}
	}
}

function getDealingHtml() {
	var html = getSelectionHtml(true);
	if(html == "") {
		if(current_editor.currentActive135Item()) {
			return $(current_editor.currentActive135Item()).html();
		} else {
			return getEditorHtml(true);
		}
	} else {
		return html;
	}
}

function setDealingHtml(newHtml) {
	newHtml = $.trim(newHtml);
	var html = getSelectionHtml();
	if(html != "") {
		insertHtml(newHtml);
		custom_style_set = true;
		current_editor.undoManger.save();
		return;
	} else if(current_editor.currentActive135Item()) {
		$(current_editor.currentActive135Item()).html(newHtml);
		current_editor.undoManger.save();
		return;
	} else {
		current_editor.setContent(newHtml);
		current_editor.undoManger.save();
		return;
	}
}

function parse135EditorHtml(html, outer_falg) {
	html = parseMmbizUrl(html);
	var htmlObj = $('<div>' + html + ' </div>');
	htmlObj.find('*').each(function() {
		if(this.style.transform) {
			setElementTransform(this, this.style.transform);
			return;
		}
		if(this.tagName == "IMG" || this.tagName == "BR" || this.tagName == "TSPAN" || this.tagName == "TEXT" || this.tagName == "IMAGE") {
			return;
		} else if(this.tagName == "P") {
			$(this).css('white-space', 'normal');
			return;
		} else if(this.tagName == "H1") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '32px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '36px';
			}
			return;
		} else if(this.tagName == "H2") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '27px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '29px';
			}
			return;
		} else if(this.tagName == "H3") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '19px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '23px';
			}
			return;
		} else if(this.tagName == "H4") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '16px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '19px';
			}
			return;
		} else if(this.tagName == "H5") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '14px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '18px';
			}
			return;
		} else if(this.tagName == "H6") {
			$(this).css('font-weight', 'bold');
			if(!this.style.fontSize) {
				this.style.fontSize = '12px';
			}
			if(!this.style.lineHeight) {
				this.style.lineHeight = '14px';
			}
			return;
		} else if(this.tagName == "STRONG" || this.tagName == "SPAN" || this.tagName == "B" || this.tagName == "EM" || this.tagName == "I") {
			return;
		} else if(this.tagName == "OL" || this.tagName == "UL" || this.tagName == "DL") {
			$(this).css({
				'margin': '0px',
				'padding': '0 0 0 30px'
			});
			return;
		}
		$(this).css({
			'box-sizing': 'border-box'
		});
		if(this.style.padding == "" && this.style.paddingLeft == "" && this.style.paddingRight == "" && this.style.paddingTop == "" && this.style.paddingBottom == "") {
			if(this.tagName == "TD" || this.tagName == "TH") {
				this.style.padding = '5px 10px';
			}
		}
	});
	var html = htmlObj.html();
	if($.trim(html) == "") {
		return "";
	}
	return html;
}

function setElementTransform(dom, transform) {
	if(transform == "none") return;
	var sty = $(dom).attr('style');
	sty = sty.replace(/;\s*transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim, ';');
	sty = sty.replace(/\s*\-[a-z]+\-transform\s*:[A-Za-z0-9_%,.\-\(\)\s]*;/gim, '');
	sty = sty + ';transform: ' + transform + ';-webkit-transform: ' + transform + ';-moz-transform: ' + transform + ';-ms-transform: ' + transform + ';-o-transform: ' + transform + ';';
	sty = sty.replace(';;', ';');
	$(dom).attr('style', sty);
}

function parseMmbizUrl(html) {
	html = html.replace(/https:\/mmbiz./g, 'https://mmbiz.');
	html = html.replace(/http:\/\/mmbiz.qpic.cn/g, 'https://mmbiz.qlogo.cn');
	html = html.replace(/https:\/\/mmbiz.qpic.cn/g, 'https://mmbiz.qlogo.cn');
	html = html.replace(/http:\/\/mmbiz.qlogo.cn/g, 'https://mmbiz.qlogo.cn');
	return html;
}

function setEditorHtml(newHtml) {
	newHtml = strip_stack_span(newHtml);
	newHtml = parseMmbizUrl(newHtml);
	current_editor.undoManger.save();
	current_editor.setContent(newHtml);
	current_editor.undoManger.save();
}

function insertHtml(html, rules) {
	html = parseMmbizUrl(html);
	html = current_editor.parseInsertPasteSetHtml(html);
	var select_html = getSelectionHtml(true);
	if(select_html != "") {
		if(rules) {
			var select_obj = $('<div>' + select_html + '</div>');
			select_obj.find('*').each(function() {
				$(this).removeAttr('style');
				$(this).removeAttr('class');
				$(this).removeAttr('placeholder');
			});
			for(var i in rules['replace']) {
				select_obj.find(i).each(function() {
					if(!rules['replace'][i] || rules['replace'][i] == "") {
						$(this).replaceWith($(this).html());
					} else {
						$(this).replaceWith('<' + rules['replace'][i] + '>' + $(this).html() + '</' + rules['replace'][i] + '>');
					}
				});
			}
			for(var i in rules['attributes']) {
				select_obj.find(i).attr(rules['attributes'][i]);
			}
			for(var i in rules.style) {
				select_obj.find(i).attr('style', rules.style[i]);
			}
			for(var i in rules['class']) {
				select_obj.find(i).attr('class', rules['class'][i]);
			}
			for(var i in rules['css']) {
				select_obj.find(i).css(rules['css'][i]);
			}
			html = select_obj.html();
			current_editor.execCommand('insertHtml', html);
			current_editor.undoManger.save();
			return true;
		}
		select_html = strip_tags(select_html, '<br><p><h1><h2><h3><h4><h5><h6><img>');
		var select_obj = $('<div>' + select_html + '</div>');
		select_obj.find('*').each(function() {
			$(this).removeAttr('style');
			$(this).removeAttr('class');
			$(this).removeAttr('placeholder');
		});
		select_obj.find('.assistant').remove();
		var obj = $('<div>' + html + '</div>');
		obj.find('> .135editor').siblings('p').each(function(i) {
			if($(this).html() == "" || $(this).html() == "&nbsp;" || $(this).html() == "<br>" || $(this).html() == "<br/>") {
				if(typeof $(this).attr('style') == 'undefined') {
					$(this).remove();
				}
			}
		});
		select_obj.find('h1,h2,h3,h4,h5,h6').each(function(i) {
			var title = obj.find('.135title').eq(i);
			if(title && title.size() > 0) {
				title.html($.trim($(this).text()));
				$(this).remove();
			} else {
				$(this).replaceWith('<p>' + $(this).text() + '</p>');
			}
		});
		select_obj.find('img').each(function(i) {
			var bgimg = obj.find('.135bg').eq(i);
			if(bgimg && bgimg.size() > 0) {
				bgimg.css('background-image', 'url(' + $(this).attr('src') + ')');
				$(this).remove();
			}
		});
		select_obj.find('img').each(function(i) {
			var img = obj.find('img').eq(i);
			if(img && img.size() > 0 && $(img).parents('.135brush').size() == 0) {
				img.attr('src', $(this).attr('src'));
				$(this).remove();
			}
		});
		select_obj.find('img').each(function(i) {
			var img = obj.find('image').eq(i);
			if(img && img.size() > 0) {
				img.attr('xlink:href', $(this).attr('src'));
				$(this).remove();
			}
		});
		var brushs = obj.find('.135brush');
		var total = brushs.size();
		if(total > 0) {
			if(total == 1) {
				var brush_item = obj.find('.135brush:first');
				if(brush_item.data('brushtype') == 'text') {
					brush_item.html($.trim(select_obj.text()));
				} else {
					select_obj.contents().each(function(i) {
						var $this = this;
						if(this.tagName == "IMG") {
							return;
						};
						if($.trim($($this).text()) == "" || this.tagName == 'BR' || $(this).html() == "" || $(this).html() == "&nbsp;" || $(this).html() == "<br>" || $(this).html() == "<br/>") {
							$(this).remove();
						}
					});
					var style = brush_item.data('style');
					if(style) {
						select_obj.find('*').each(function() {
							$(this).attr('style', style);
						});
					}
					var html = select_obj.html();
					if(html != "") {
						brush_item.html(html);
					}
				}
			} else {
				select_obj.contents().each(function(i) {
					var $this = this;
					if($this.nodeType == 3) {
						$this = $('<p>' + $(this).text() + '</p>').get(0);
					}
					if(i < total) {
						var brush_item = brushs.eq(i);
						if(brush_item.data('brushtype') == 'text') {
							brush_item.html($.trim($($this).text()));
						} else {
							var style = brush_item.data('style');
							if(style) {
								$($this).attr('style', style);
							}
							brush_item.empty().append($($this));
						}
					} else {
						var brush_item = brushs.eq(total - 1);
						if(brush_item.data('brushtype') == 'text') {
							brush_item.append($($this).text());
						} else {
							var style = brush_item.data('style');
							if(style) {
								$($this).attr('style', style);
							}
							brush_item.append($($this));
						}
					}
				});
			}
		}
		html = obj.html();
		current_editor.execCommand('insertHtml', html);
		current_editor.undoManger.save();
		return true;
	} else {}
	current_editor.execCommand('insertHtml', html);
	current_editor.undoManger.save();
	return true;
}

function resetMapUrl() {
	$(current_editor.selection.document).find('img').each(function() {
		var $img = $(this);
		var mapurl = $(this).attr('mapurl');
		if(mapurl) {
			var usemap = $(this).attr('usemap');
			if(usemap) {
				$(usemap).each(function() {
					$(this).remove();
				})
			}
			usemap = randomString(10);
			$img.attr('usemap', usemap);
			$img.after('<map name="' + usemap + '" id="' + usemap + '" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="' + mapurl + '" shape="default" target="_blank"/></map>' +
				'<section>' +
				'<map name="' + usemap + '" id="' + usemap + '" style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;"><area style="margin: 0px; padding: 0px; word-wrap: break-word !important; max-width: 100%; box-sizing: border-box !important;" href="' + mapurl + '" shape="default" target="_blank"/></map>' +
				'</section>');
		}
	});
}

function setBackgroundColor(bgcolor, color, history) {
	if(isGreyColor(bgcolor)) {
		return false;
	}
	if(history) {
		current_editor.undoManger.save();
	}
	var active_item = current_editor.currentActive135Item();
	if(!replace_full_color && active_item) {
		parseObject(active_item, bgcolor, color);
		active_item.attr('data-color', bgcolor);
		active_item.attr('data-custom', bgcolor);
		current_editor.undoManger.save();
		return;
	} else {
		if(!replace_full_color) {
			return;
		}
		parseObject($(current_editor.selection.document), bgcolor, color);
		$(current_editor.selection.document).find('.135editor').each(function() {
			$(this).attr('data-color', bgcolor);
		});
	}
	if(history) {
		current_editor.undoManger.save();
	}
	return;
}

function parseObject(obj, bgcolor, color) {
	if(isGreyColor(bgcolor)) {
		return false;
	}
	obj.find("*").each(function() {
		if(!this.nodeName || this.nodeName == "HTML" || this.nodeName == "HEAD" || this.nodeName == "STYLE" || this.nodeName == "LINK" || this.nodeName == "BODY") {
			return;
		}
		if(this.nodeName == "HR" || this.nodeName == "hr") {
			var style = $(this).attr('style');
			$(this).attr('style', style + ';border-color:' + bgcolor + ';');
			return;
		}
		if(this.nodeName == "" || $(this).attr('style') == "") {
			return;
		}
		if($(this).attr('data-ct') == 'fix') {
			return;
		}
		if($(this).attr('fill')) {
			$(this).attr('fill', bgcolor);
			return;
		}
		var oldColor = $(this).parents('.135editor:first').attr('data-color');
		var style = $(this).attr('style');
		if(oldColor == bgcolor) {
			return;
		}
		if(oldColor && style && style.indexOf('text-shadow') >= 0) {
			var newstyle = str_replace(rgb2hex(oldColor), bgcolor, style);
			newstyle = str_replace(hex2rgb(oldColor), bgcolor, newstyle);
			$(this).attr('style', newstyle);
		}
		var persent = $(this).attr('data-clessp') ? $(this).attr('data-clessp') : '50%';
		var hasSetBgColor = false;
		var txt_color;
		var bgC = $(this).get(0).style.backgroundColor;
		if(!bgC || bgC === 'initial' || bgC === 'transparent' || bgC === "") {
			var fc = $(this).get(0).style.color;
			if(fc && fc != "" && fc != 'inherit' && !isGreyColor(fc)) {
				if($(this).attr('data-txtless')) {
					var txtpersent = $(this).attr('data-txtlessp') ? $(this).attr('data-txtlessp') : '30%';
					txt_color = getColor(rgb2hex(bgcolor), $(this).attr('data-txtless'), txtpersent);
					$(this).css('color', txt_color);
				} else if(isLightenColor(bgcolor)) {
					txt_color = getColor(rgb2hex(bgcolor), 'darken', persent);
					$(this).css('color', txt_color);
				} else {
					var parentBgColor = getPrarentBgColor($(this));
					if(parentBgColor == bgcolor) {
						txt_color = getColor(rgb2hex(bgcolor), 'lighten', persent);
						$(this).css('color', txt_color);
					} else {
						$(this).css('color', bgcolor);
					}
				}
			}
		} else {
			if(typeof($(this).attr('data-bgless')) != "undefined") {
				var bgpersent = $(this).attr('data-bglessp') ? $(this).attr('data-bglessp') : '30%';
				var bg_color;
				if($(this).attr('data-bgless') == "true" || $(this).attr('data-bgless') == true) {
					if(isLightenColor(bgcolor)) {
						bg_color = getColor(rgb2hex(bgcolor), 'darken', bgpersent);
						bg_color = getColor(rgb2hex(bg_color), 'saturate', '20%');
					} else {
						bg_color = getColor(rgb2hex(bgcolor), 'lighten', bgpersent);
					}
				} else {
					bg_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bgless'), bgpersent);
				}
				if($(this).attr('data-bgopacity')) {
					bg_color = getColor(rgb2hex(bg_color), 'fadeout', $(this).attr('data-bgopacity'));
				}
				hasSetBgColor = true;
				$(this).css('backgroundColor', bg_color);
				if(isLightenColor(bg_color)) {
					txt_color = getColor(rgb2hex(bg_color), 'darken', persent);
					txt_color = getColor(rgb2hex(txt_color), 'saturate', '20%');
				} else {
					txt_color = color;
				}
				$(this).css('color', txt_color);
			} else if($(this).attr('data-bgopacity')) {
				var bg_color;
				bg_color = getColor(rgb2hex(bgcolor), 'fadeout', $(this).attr('data-bgopacity'));
				if(isLightenColor(bg_color)) {
					txt_color = getColor(rgb2hex(bg_color), 'darken', persent)
				} else {
					txt_color = color;
				}
				$(this).css('backgroundColor', bg_color);
				$(this).css('color', txt_color);
			} else if(!isGreyColor(bgC)) {
				hasSetBgColor = true;
				$(this).css('backgroundColor', bgcolor);
				var fc = $(this).get(0).style.color;
				if(fc != 'inherit') {
					if(isLightenColor(bgcolor)) {
						txt_color = getColor(rgb2hex(bgcolor), 'darken', persent)
					} else {
						txt_color = color;
					}
					$(this).css('color', txt_color);
				}
			} else {
				var fc = $(this).get(0).style.color;
				if(fc && fc != "" && fc != 'inherit' && !isGreyColor(fc)) {
					if($(this).css('backgroundColor') != bgcolor) {
						$(this).css('color', bgcolor);
					}
				}
			}
		}
		if($(this).attr('data-bcless')) {
			var bc_color = bgcolor;
			if(isLightenColor(bgcolor)) {
				var persent = $(this).attr('data-bclessp') ? $(this).attr('data-bclessp') : '20%';
				if($(this).attr('data-bcless') == 'darken') {
					bc_color = getColor(rgb2hex(bgcolor), 'darken', persent);
					bc_color = getColor(rgb2hex(bc_color), 'saturate', '30%');
				} else {
					bc_color = getColor(rgb2hex(bgcolor), 'darken', persent);
					if($(this).attr('data-bcless') && $(this).attr('data-bcless') != 'auto' && $(this).attr('data-bcless') != 'true') {
						bc_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bcless'), persent);
					}
				}
			} else {
				var persent = $(this).attr('data-bclessp') ? $(this).attr('data-bclessp') : '20%';
				if($(this).attr('data-bcless') == 'lighten' || $(this).attr('data-bcless') == 'auto' || $(this).attr('data-bcless') == 'true') {
					bc_color = getColor(rgb2hex(bgcolor), 'lighten', persent);
					bc_color = getColor(rgb2hex(bc_color), 'desaturate', '20%');
					bc_color = getColor(rgb2hex(bc_color), 'fadein', '20%');
				} else {
					if($(this).attr('data-bcless') && $(this).attr('data-bcless') != 'auto' && $(this).attr('data-bcless') != 'true') {
						bc_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bcless'), persent);
					}
				}
			}
			if($(this).attr('data-bdopacity')) {
				bc_color = getColor(rgb2hex(bc_color), 'fadeout', $(this).attr('data-bdopacity'));
			}
			if(this.style.borderBottomColor || this.style.borderTopColor || this.style.borderLeftColor || this.style.borderRightColor) {
				if(this.style.borderBottomColor != 'transparent' && this.style.borderBottomColor != 'initial') {
					this.style.borderBottomColor = bc_color;
				}
				if(this.style.borderTopColor != 'transparent' && this.style.borderTopColor != 'initial') {
					this.style.borderTopColor = bc_color;
				}
				if(this.style.borderLeftColor != 'transparent' && this.style.borderLeftColor != 'initial') {
					this.style.borderLeftColor = bc_color;
				}
				if(this.style.borderRightColor != 'transparent' && this.style.borderRightColor != 'initial') {
					this.style.borderRightColor = bc_color;
				}
			} else {
				if(this.style.borderColor !== 'transparent' && this.style.borderColor !== 'initial') {
					this.style.borderColor = bc_color;
				}
			}
		} else {
			var bc_color = bgcolor;
			if($(this).attr('data-bdopacity')) {
				bc_color = getColor(rgb2hex(bgcolor), 'fadeout', $(this).attr('data-bdopacity'));
			}
			if(this.style.borderBottomColor || this.style.borderTopColor || this.style.borderLeftColor || this.style.borderRightColor) {
				if(this.style.borderBottomColor != 'transparent' && this.style.borderBottomColor != 'initial') {
					setColor(this, 'borderBottomColor', bc_color);
				}
				if(this.style.borderTopColor != 'transparent' && this.style.borderTopColor != 'initial') {
					setColor(this, 'borderTopColor', bc_color);
				}
				if(this.style.borderLeftColor != 'transparent' && this.style.borderLeftColor != 'initial') {
					setColor(this, 'borderLeftColor', bc_color);
				}
				if(this.style.borderRightColor != 'transparent' && this.style.borderRightColor != 'initial') {
					setColor(this, 'borderRightColor', bc_color);
				}
			} else {
				var c = this.style.borderColor;
				if(c !== 'transparent' && c !== 'initial' && !isGreyColor(c)) {
					this.style.borderColor = bc_color;
				}
			}
		}
		var bgimg = $(this).css('backgroundImage');
		if(bgimg.substring(0, 24) == '-webkit-linear-gradient(') {
			var colors;
			var type;
			if(bgimg.substring(0, 29) == '-webkit-linear-gradient(left,') {
				type = 'left';
				colors = bgimg.substring(29, (bgimg.length - 1));
			} else if(bgimg.substring(0, 28) == '-webkit-linear-gradient(top,') {
				type = 'top';
				colors = bgimg.substring(28, (bgimg.length - 1));
			} else if(bgimg.substring(0, 30) == '-webkit-linear-gradient(right,') {
				type = 'right';
				colors = bgimg.substring(30, (bgimg.length - 1));
			} else if(bgimg.substring(0, 31) == '-webkit-linear-gradient(bottom,') {
				type = 'bottom';
				colors = bgimg.substring(31, (bgimg.length - 1));
			}
			if(colors) {
				var color_arr = colors.split('),');
				var txt_color, gradient_color, main_color;
				if($(this).attr('data-bgless')) {
					var bgpersent = $(this).attr('data-bglessp') ? $(this).attr('data-bglessp') : '30%';
					main_color = getColor(rgb2hex(bgcolor), $(this).attr('data-bgless'), bgpersent);
				} else if(isLightenColor(bgcolor)) {
					main_color = getColor(rgb2hex(bgcolor), 'saturate', '20%');
				} else {
					main_color = getColor(rgb2hex(bgcolor), 'lighten', '5%');
					main_color = getColor(rgb2hex(main_color), 'desaturate', '10%');
					main_color = getColor(rgb2hex(main_color), 'fadein', '20%');
				}
				if(isLightenColor(main_color)) {
					txt_color = getColor(rgb2hex(main_color), 'darken', '50%');
					txt_color = getColor(rgb2hex(txt_color), 'saturate', '30%');
				} else {
					txt_color = getColor(rgb2hex(main_color), 'lighten', '50%');
				}
				if($(this).attr('data-gradient')) {
					gradient_color = $(this).attr('data-gradient');
				} else {
					gradient_color = getColor(rgb2hex(main_color), 'lighten', '30%');
				}
				if(color_arr.length == 3) {
					$(this).css('backgroundImage', '-webkit-linear-gradient(' + type + ', ' + main_color + ', ' + gradient_color + ', ' + main_color + ')');
					$(this).css('color', txt_color);
				} else if(color_arr.length == 2) {
					$(this).css('backgroundImage', '-webkit-linear-gradient(' + type + ', ' + main_color + ', ' + gradient_color + ')');
					$(this).css('color', txt_color);
				}
			}
		}
	});
	return obj;
}

function parseHtml(html, bgcolor, color) {
	var obj = $('<div id="editor-content">' + html + "</div>");
	obj = parseObject(obj, bgcolor, color);
	var result = obj.html();
	obj = null;
	return result;
}

function style_click(id) {
	var url = '/editor_styles/click_num';
	ajaxAction(url, {
		id: id
	});
	return false;
}

function setFavorColor(colors, callback) {
	var url = '/editor_styles/setFavorColor';
	ajaxAction(url, {
		colors: colors
	}, null, callback);
}

function color_click(color) {
	color = hex2rgb(color);
	var url = '/colors/click';
	ajaxAction(url, {
		color: color
	});
	return false;
}

function setColor(obj, colorType, color) {
	var c = $(obj).css(colorType);
	if(c === 'transparent' || c === 'initial') {
		return;
	} else {
		if(!isGreyColor(c)) {
			$(obj).css(colorType, color);
		}
	}
}

function getPrarentBgColor($obj) {
	if(!$obj.parent().get(0)) {
		return "";
	}
	if($obj.parent().get(0).tagName && $obj.parent().get(0).tagName == 'BODY') {
		if($obj.parent().get(0).style) {
			var bgC = $obj.parent().get(0).style.backgroundColor;
			return bgC;
		} else {
			return "";
		}
	}
	if($obj.parent().get(0).style) {
		var bgC = $obj.parent().get(0).style.backgroundColor;
		if(!bgC || bgC === 'initial' || bgC === 'transparent' || bgC === "") {
			return getPrarentBgColor($obj.parent());
		} else {
			return bgC;
		}
	} else {
		return "";
	}
}

function rgb2hex(color) {
	rgb = color.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);
	return(rgb && rgb.length === 4) ? "#" +
		("0" + parseInt(rgb[1], 10).toString(16)).slice(-2) +
		("0" + parseInt(rgb[2], 10).toString(16)).slice(-2) +
		("0" + parseInt(rgb[3], 10).toString(16)).slice(-2) : color;
}

function hex2rgb(color) {
	var reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;
	var sColor = color.toLowerCase();
	if(sColor && reg.test(sColor)) {
		if(sColor.length === 4) {
			var sColorNew = "#";
			for(var i = 1; i < 4; i += 1) {
				sColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));
			}
			sColor = sColorNew;
		}
		var sColorChange = [];
		for(var i = 1; i < 7; i += 2) {
			sColorChange.push(parseInt("0x" + sColor.slice(i, i + 2)));
		}
		return "RGB(" + sColorChange.join(",") + ")";
	} else {
		return sColor;
	}
};

function isLightenColor(color) {
	var c = rgb2hex(color);
	var r = ("" + c.substring(1, 3));
	var g = ("" + c.substring(3, 5));
	var b = ("" + c.substring(5, 7));
	if(r > 'C0' && g > 'C0' && b > 'C0') {
		return true;
	} else {
		return false;
	}
}

function isGreyColor(color) {
	var c = rgb2hex(color);
	var r = "" + c.substring(1, 3);
	var g = "" + c.substring(3, 5);
	var b = "" + c.substring(5, 7);
	if(r == g && g == b) {
		return true;
	} else {
		return false;
	}
}

function getColor(color, type, num) {
	var str = '';
	var color_obj = tinycolor(color);
	if(typeof(color_obj[type]) == 'function') {
		num = parseInt(num.replace('%', ''));
		return color_obj[type](num).toString();
	} else if(type == 'fade' || type == 'fadein' || type == 'fadeout') {
		if(num.indexOf('%') > 0) {
			num = num.replace('%', '');
			num = parseInt(num) / 100;
		}
		if(type == 'fadein') {
			num += color_obj.getAlpha();
		} else if(type == 'fadeout') {
			num = color_obj.getAlpha() - num;
		}
		return color_obj.setAlpha(num).toString();
	}
	return color;
}

function LightenDarkenColor(col, amt) {
	var usePound = false;
	if(col[0] == "#") {
		col = col.slice(1);
		usePound = true;
	}
	var num = parseInt(col, 16);
	var r = (num >> 16) + amt;
	if(r > 255) r = 255;
	else if(r < 0) r = 0;
	var b = ((num >> 8) & 0x00FF) + amt;
	if(b > 255) b = 255;
	else if(b < 0) b = 0;
	var g = (num & 0x0000FF) + amt;
	if(g > 255) g = 255;
	else if(g < 0) g = 0;
	return(usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16);
}

function openTplModal() {
	$('#templateModal').modal('show');
	$('#template-modal-body').html('正在加载').load(BASEURL + '/editor_styles/myTemplates #my-templates', function() {
		$('#my-templates .nav-tabs a:first').tab('show')
	})
}

function set_style(styles) {
	ckeditors['WxMsgContent'].execCommand('removeFormat');
	var element = ckeditors['WxMsgContent'].getSelection().getStartElement();
	if(element.getName() == 'img') {
		element.setStyles(styles);
	} else {
		var style = new CKEDITOR.style({
			element: element.getName(),
			styles: styles
		});
		ckeditors['WxMsgContent'].applyStyle(style);
	}
}

function getPreferences(idx) {
	var cookieOpt = current_editor.getPreferences('editor135');
	if(cookieOpt && cookieOpt[idx]) {
		return cookieOpt[idx];
	}
	return null;
}

function setPreferences(key, value) {
	var cookieOpt = current_editor.getPreferences('editor135');
	var obj = {};
	if(typeof(key) == "string") {
		obj[key] = value;
	} else {
		obj = key;
	}
	if(!cookieOpt) cookieOpt = {};
	$.extend(cookieOpt, obj);
	current_editor.setPreferences('editor135', cookieOpt);
}

function applyParagraph(type) {
	var object;
	if(type == 'all') {
		var editor_document = current_editor.selection.document;
		object = $(editor_document);
	} else {
		if(!current_editor.currentActive135Item()) return;
		object = current_editor.currentActive135Item();
	}
	$(object).find('p').each(function() {
		$(this).css('lineHeight', $('#paragraph-lineHeight').val());
		$(this).css('fontFamily', $('#paragraph-fontFamily').val());
		$(this).css('fontSize', $('#paragraph-fontSize').val());
		$(this).css('textIndent', $('#paragraph-textIndent').val());
		$(this).css('paddingTop', $('#paragraph-paddingTop').val());
		$(this).css('paddingBottom', $('#paragraph-paddingBottom').val());
	})
}

function clean_135helper() {
	var editor_document = current_editor.selection.document;
	$(editor_document).find('.135editor').each(function() {
		$(this).css({
			'border': '0 none',
			'padding': 0
		});
	});
	current_editor.sync();
}

function showColorPlan(clientY) {
	if(current_editor) {
		var $container = $(current_editor.container);
		var offset = $container.offset();
		var width = $container.width();
		var height = $container.height();
		if(offset.left + width + $('#color-plan').width() < $(window).width()) {
			$('#color-plan').css('left', offset.left + width - 5);
		} else {
			$('#color-plan').css('left', offset.left - $('#color-plan').width());
		}
		if(clientY) {
			if(clientY - $(window).scrollTop() > $('#color-plan').height() / 2) {
				var top = clientY - $(window).scrollTop() - ($('#color-plan').height() / 2);
				if($(window).height() - top > $('#color-plan').height()) {
					$('#color-plan').css('bottom', 'auto');
					if(top < offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop()) {
						$('#color-plan').css('top', offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop());
					} else if(top + $('#color-plan').height() > offset.top + $container.height() - $(window).scrollTop()) {
						$('#color-plan').css('top', offset.top + $container.height() - $(window).scrollTop() - $('#color-plan').height() + 20);
					} else {
						$('#color-plan').css('top', top);
					}
				} else {
					$('#color-plan').css('top', 'auto');
					$('#color-plan').css('bottom', 0);
				}
			} else {
				if($(window).scrollTop() < offset.top + $container.find('.edui-editor-toolbarbox').height()) {
					$('#color-plan').css('top', offset.top + $container.find('.edui-editor-toolbarbox').height() - $(window).scrollTop());
					$('#color-plan').css('bottom', 'auto');
				} else {
					$('#color-plan').css('top', 0);
					$('#color-plan').css('bottom', 'auto');
				}
			}
		} else {
			$('#color-plan').css('top', offset.top + height / 2 - 120 - $(window).scrollTop());
		}
		$('#color-plan').show();
	} else {
		$('#color-plan').show();
	}
}

function hideColorPlan() {
	$('#color-plan').hide();
}

function meitu_upload() {
	if(sso.check_userlogin()) {
		publishController.open_html_dialog('meitu-full');
		setTimeout(function() {
			$('#meitu-full').find('.modal-body .alert').remove();
		}, 6000);
		xiuxiu.setLaunchVars("titleVisible", 0);
		xiuxiu.setLaunchVars("maxFinalWidth", 600);
		xiuxiu.setLaunchVars("customMenu", ["decorate", "facialMenu", "puzzle"]);
		xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "meitu_full");
		xiuxiu.embedSWF("MeituFullContent", 3, 940, 600, "meitu_full");
		xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
		xiuxiu.setUploadType(2);
		xiuxiu.setUploadDataFieldName("upload");
		xiuxiu.onBeforeUpload = function(data, id) {
			var size = data.size;
			if(size > 2 * 1024 * 1024) {
				alert("图片不能超过2M");
				return false;
			}
			xiuxiu.setUploadArgs({
				'return': "xiuxiu",
				'remote_type': 'wechatUploadimg',
				'no_thumb': 1,
				'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
			}, id);
			return true;
		};
		xiuxiu.onUploadResponse = function(data, id) {
			try {
				var json = eval('(' + data + ')');
			} catch(e) {
				alert(data);
				return;
			}
			if(json.ret == -1) {
				showErrorMessage(json.error);
			} else {
				insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
				publishController.close_dialog();
			}
		};
		xiuxiu.onClose = function(id) {
			publishController.close_dialog();
		}
	} else {
		showErrorMessage('图片拼图属于付费功能。请付费购买图片使用功能后使用');
	}
}

function pingtu_upload() {
	if(sso.check_userlogin()) {
		publishController.open_html_dialog('meitu-pingtu');
		xiuxiu.setLaunchVars("titleVisible", 0);
		xiuxiu.setLaunchVars("maxFinalWidth", 600);
		xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "meitu_pingtu");
		xiuxiu.embedSWF("MeituPingTuContent", 2, 700, 500, "meitu_pingtu");
		xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
		xiuxiu.setUploadType(2);
		xiuxiu.setUploadDataFieldName("upload");
		xiuxiu.onBeforeUpload = function(data, id) {
			var size = data.size;
			if(size > 2 * 1024 * 1024) {
				alert("图片不能超过2M");
				return false;
			}
			xiuxiu.setUploadArgs({
				'return': "xiuxiu",
				'remote_type': 'wechatUploadimg',
				'no_thumb': 1,
				'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
			}, id);
			return true;
		};
		xiuxiu.onUploadResponse = function(data, id) {
			try {
				var json = eval('(' + data + ')');
			} catch(e) {
				alert(data);
				return;
			}
			if(json.ret == -1) {
				showErrorMessage(json.error);
			} else {
				insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
				publishController.close_dialog();
			}
		};
		xiuxiu.onClose = function(id) {
			publishController.close_dialog();
		}
	} else {
		showErrorMessage('图片拼图属于付费功能。请付费购买图片使用功能后使用');
	}
}

function edit_image(url) {
	if(sso.check_userlogin()) {
		publishController.open_html_dialog('meitu-beautify');
		xiuxiu.setLaunchVars("titleVisible", 0);
		xiuxiu.setLaunchVars("maxFinalWidth", 600);
		xiuxiu.setLaunchVars("uploadBtnLabel", "上传", "beautify");
		xiuxiu.embedSWF("MeituContent", 1, 700, 500, "beautify");
		xiuxiu.setUploadURL(BASEURL + '/uploadfiles/upload');
		xiuxiu.setUploadType(2);
		xiuxiu.setUploadDataFieldName("upload");
		xiuxiu.onBeforeUpload = function(data, id) {
			var size = data.size;
			if(size > 2 * 1024 * 1024) {
				alert("图片不能超过2M");
				return false;
			}
			xiuxiu.setUploadArgs({
				'return': "xiuxiu",
				'url': url,
				'remote_type': 'wechatUploadimg',
				'no_thumb': 1,
				'MIAOCMS[Auth][User]': $.cookie('MIAOCMS[Auth][User]')
			}, id);
			return true;
		};
		xiuxiu.onInit = function() {
			if(url) {
				if(url.indexOf('remote.wx135.com') > 0 || (url.indexOf('.135editor.com') < 0 && url.indexOf('.wx135.com') < 0)) {
					url = BASEURL + '/downloads/fetch_url?fu=' + encodeURIComponent(url);
				}
				xiuxiu.loadPhoto(url);
			}
			publishController.focus_close();
		};
		xiuxiu.onUploadResponse = function(data, id) {
			try {
				var json = eval('(' + data + ')');
			} catch(e) {
				alert(data);
				return;
			}
			if(json.ret == -1) {
				showErrorMessage(json.error);
			} else {
				if(url && current_edit_img) {
					var new_url = json.url;
					current_edit_img.src = new_url;
					current_edit_img.setAttribute("_src", new_url);
				} else {
					insertHtml('<img src="' + json.url + '" _src="' + json.url + '">');
				}
				publishController.close_dialog();
			}
		};
		xiuxiu.onClose = function(id) {
			publishController.close_dialog();
		}
	} else {
		showErrorMessage('编辑图片属于付费功能。更换图片请直接双击图片');
	}
};

(function($) {
	var pluginName = 'slider',
		initAllSelector = '[data-role=slider], .slider',
		paramKeys = ['InitValue', 'Accuracy'];
	$[pluginName] = function(element, options) {
		if(!element) {
			return $()[pluginName]({
				initAll: true
			});
		}
		var defaults = {
			initValue: 0,
			accuracy: 1
		};
		var plugin = this;
		plugin.settings = {};
		var $element = $(element);
		var complete, marker, currentValuePerc, sliderLength, sliderOffset, sliderStart, sliderEnd, percentPerPixel, markerSize, vertical = false;
		plugin.init = function() {
			plugin.settings = $.extend({}, defaults, options);
			complete = $('<div class="complete"></div>');
			marker = $('<div class="marker"></div>');
			complete.appendTo($element);
			marker.appendTo($element);
			vertical = $element.hasClass('vertical');
			initGeometry();
			currentValuePerc = correctValuePerc(plugin.settings.initValue);
			placeMarkerByPerc(currentValuePerc);
			marker.on('mousedown', function(e) {
				e.preventDefault();
				startMoveMarker(e);
			});
			$element.on('mousedown', function(e) {
				e.preventDefault();
				startMoveMarker(e);
			});
			$element.trigger('inited', [currentValuePerc]);
		};
		var correctValuePerc = function(value) {
			var accuracy = plugin.settings.accuracy;
			if(accuracy === 0) {
				return value;
			}
			if(value === 100) {
				return 100;
			}
			value = Math.floor(value / accuracy) * accuracy + Math.round(value % accuracy / accuracy) * accuracy;
			if(value > 100) {
				return 100;
			}
			return value;
		};
		var pixToPerc = function(valuePix) {
			var valuePerc;
			valuePerc = valuePix * percentPerPixel;
			return correctValuePerc(valuePerc);
		};
		var percToPix = function(value) {
			if(percentPerPixel === 0) {
				return 0;
			}
			return value / percentPerPixel;
		};
		var placeMarkerByPerc = function(valuePerc) {
			var size, size2;
			if(vertical) {
				size = percToPix(valuePerc) + markerSize;
				size2 = sliderLength - size;
				marker.css('top', size2);
				complete.css('height', size);
			} else {
				size = percToPix(valuePerc);
				marker.css('left', size);
				complete.css('width', size);
			}
		};
		var startMoveMarker = function(e) {
			$(document).on('mousemove.sliderMarker', function(event) {
				movingMarker(event);
			});
			$(document).on('mouseup.sliderMarker', function() {
				$(document).off('mousemove.sliderMarker');
				$(document).off('mouseup.sliderMarker');
				$element.data('value', currentValuePerc);
				$element.trigger('changed', [currentValuePerc]);
			});
			initGeometry();
			movingMarker(e)
		};
		var initGeometry = function() {
			if(vertical) {
				sliderLength = $element.height();
				sliderOffset = $element.offset().top;
				markerSize = marker.height();
			} else {
				sliderLength = $element.width();
				sliderOffset = $element.offset().left;
				markerSize = marker.width();
			}
			percentPerPixel = 100 / (sliderLength - markerSize);
			sliderStart = markerSize / 2;
			sliderEnd = sliderLength - markerSize / 2;
		};
		var movingMarker = function(event) {
			var cursorPos, percents, valuePix;
			if(vertical) {
				cursorPos = event.pageY - sliderOffset;
			} else {
				cursorPos = event.pageX - sliderOffset;
			}
			if(cursorPos < sliderStart) {
				cursorPos = sliderStart;
			} else if(cursorPos > sliderEnd) {
				cursorPos = sliderEnd;
			}
			if(vertical) {
				valuePix = sliderLength - cursorPos - markerSize / 2;
			} else {
				valuePix = cursorPos - markerSize / 2;
			}
			percents = pixToPerc(valuePix);
			placeMarkerByPerc(percents);
			currentValuePerc = percents;
			$element.trigger('change', [currentValuePerc]);
		};
		plugin.val = function(value) {
			if(typeof value !== 'undefined') {
				currentValuePerc = correctValuePerc(value);
				placeMarkerByPerc(currentValuePerc);
				return currentValuePerc;
			} else {
				return currentValuePerc;
			}
		};
		plugin.init();
	};
	$.fn[pluginName] = function(options) {
		var elements = options.initAll ? $(initAllSelector) : this;
		return elements.each(function() {
			var that = $(this),
				params = {},
				plugin;
			if(undefined == that.data(pluginName)) {
				$.each(paramKeys, function(index, key) {
					params[key[0].toLowerCase() + key.slice(1)] = that.data('param' + key);
				});
				plugin = new $[pluginName](this, params);
				that.data(pluginName, plugin);
			}
		});
	};
	$(function() {
		$()[pluginName]({
			initAll: true
		});
	});
})(jQuery);;

function strip_imgthumb_opr(imgurl) {
	var idx = imgurl.indexOf('@');
	if(idx > 0) {
		return imgurl.substring(0, idx);
	}
	return imgurl;
}
UE.plugins["open135"] = function() {
	var me = this,
		editor = this;
	var utils = baidu.editor.utils,
		Popup = baidu.editor.ui.Popup,
		Stateful = baidu.editor.ui.Stateful,
		editorui = baidu.editor.ui,
		uiUtils = baidu.editor.ui.uiUtils,
		UIBase = baidu.editor.ui.UIBase;
	var domUtils = baidu.editor.dom.domUtils;
	var editor_document = null;
	domUtils.on(window, 'scroll', function(evt, el) {
		hideColorPlan();
	});
	me.addListener('autoheightchanged', function(editor) {
		var container = me.container;
		$(container).parent().find('#style-overflow-list').height($(container).height() - 80);
	});
	me.addListener('ready', function(editor) {
		editor_document = me.selection.document;
		var uid = me.uid;
		var container = me.container;
		var width = $(container).width();
		var style_width = me.options.style_width || 360;
		if($(container).find('.edui-editor-sidebar').size() > 0) {
			$(container).find('.edui-editor-mainbar').css({
				'width': (width - style_width - 2) + 'px',
				'border-left': '1px solid #ddd',
				'margin-left': style_width + 'px'
			});
			$(container).find('.edui-editor-sidebar').css({
				'position': 'relative',
				'width': style_width + 'px',
				'float': 'left',
				'box-sizing': 'border-box'
			});
			$(container).find('.edui-editor-sidebar').html('<p style="line-height:32px;margin: 20px;"><img style="float:left;margin-right: 5px;" src="http://static.135editor.com/img/ajax/circle_ball.gif">正在加载样式…</p>');
		} else {
			$(container).parent().css({
				'position': 'relative',
				'padding-left': style_width + 'px',
				'box-sizing': 'border-box'
			});
			container.style.width = (width - style_width) + "px";
		}
		$('<div></div>').load(me.options.style_url, function() {
			var html = $(this).html();
			var obj_id = 'edui' + me.ui.id + '-styles',
				obj = $('<div id="' + obj_id + '" style="position:absolute;width:' + style_width + 'px;left:0;top:0;">' + html + '</div>');
			if($(container).find('.edui-editor-sidebar').size() > 0) {
				$(container).find('.edui-editor-sidebar').html('').append(obj);
			} else {
				$(container).before(obj);
			}
			var height = $(container).height() > 0 ? $(container).height() : (me.options.initialFrameHeight + $('.edui-editor-toolbarbox', container).height());
			$(container).find('.edui-editor-sidebar').css('height', height);
			obj.find('.editor-menus').height(height);
			obj.find('#editor-styles-content').css('height', height);
			obj.css('height', height).find('#style-overflow-list').height(height - 80);
			$('.editor-template-list > li', obj).addClass('mix');
			$('#style-categories >li', obj).hover(function() {
				$(this).addClass('open');
			}, function() {
				$(this).removeClass('open');
			});
			if($('#editor-styles:hidden', obj).size() > 0) {
				$('#style-categories >li:first .filter', obj).addClass('active');
				$(document).on('click', '#style-categories .filter', function() {
					$('#style-overflow-list .mix', obj).hide();
					$($(this).attr('data-filter'), obj).show();
					obj.find('#style-overflow-list').scrollTop(0);
					$('#style-categories .filter', obj).removeClass('active');
					$(this).addClass('active');
				});
			} else {
				$('.editor-template-list', obj).mixItUp({
					layout: {
						display: 'block'
					},
					selectors: {
						filter: '#style-categories .filter'
					},
					callbacks: {
						onMixStart: function(e, state) {
							obj.find('#style-overflow-list').scrollTop(0);
							return true;
						}
					}
				});
			}
			$(obj).on('click', '#editor-styles .editor-menus li', function() {
				$(this).parent().find('li').removeClass('active');
				$(this).parent().next('.tab-content').find('.tab-pane').removeClass('active');
				$($(this).find('a').attr('href'), obj).addClass('active');
				$(this).addClass('active');
				var anchor = $(this).find('a:first');
				var target = anchor.attr('href');
				if($(target).html() == "" || $(this).data('refresh') == "always") {
					if(anchor.data('url')) {
						$(target).html('<section style="padding:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载...</section>');
						$(target).load(anchor.data('url'), function() {
							function tab_loaded() {
								$(target).find('a').click(function() {
									var url = $(this).attr('href');
									var re = /^#/;
									if(typeof($(this).attr('onclick')) != "undefined" || $(this).attr('target') == '_blank' || typeof(url) == "undefined" || re.test(url) || url.substr(0, 10).toLowerCase() == 'javascript') {
										return true;
									}
									$(target).parent().scrollTop(0);
									$(target).prepend('<section style="position:absolute;z-index:100;color: red;width:100%;height:100%;background-color:rgba(0,0,0,0.5);padding:10px;"><img src="http://static.135editor.com/img/ajax/circle_ball.gif"> 正在加载...</section>');
									$(target).load(url, function() {
										tab_loaded();
									});
									return false;
								});
							}
							tab_loaded();
						});
					}
				}
				return false;
			});
			$(obj).on('click', '#online-styles .col-sm-12,#style-overflow-list .ui-portlet-list > li,#styleSearchResultList #style_search_list > ul > li', function() {
				if($(this).hasClass('ignore')) {
					return false;
				}
				var ret = false;
				var num = parseInt($(this).find('.autonum:first').text());
				var id = $(this).data('id');
				$(this).contents().filter(function() {
					return this.nodeType === 3 && $.trim($(this).text()) == "";
				}).remove();
				$(this).find('p').each(function() {
					if($.trim($(this).html()) == "&nbsp;") {
						$(this).html('<br/>');
					}
				});
				$(this).find('*').each(function() {
					if($(this).attr('data-width')) {
						return;
					}
					if(this.style.width && this.style.width != "") {
						$(this).attr('data-width', this.style.width);
					}
				});
				var style_item = $(this).find('> .135editor:first');
				if(style_item.size()) {
					if(style_item.find('> *').size() == 1 && style_item.find('> *').eq(0).hasClass('135editor')) {
						ret = insertHtml(style_item.html());
					} else {
						var html = style_item.prop('outerHTML');
						ret = insertHtml(html);
					}
				} else {
					ret = insertHtml("<section data-id=\"" + id + "\" class=\"135editor\">" + $(this).html() + "</section>");
				}
				if(ret) {
					style_click(id);
					if(typeof num != "undefined") {
						$(this).find('.autonum:first').text(num + 1);
					}
				}
			});
			$(obj).on('click', '#system-template-list .template-cover', function() {
				var template_id = $(this).data('id');
				ajaxAction('http://www.135editor.com/editor_styles/view/' + template_id + '.json?nolazy=1', null, null, function(request) {
					if(request.data) {
						me.undoManger.save();
						if($.trim(me.getPlainTxt()) == "") {
							me.setContent(request.data.EditorStyle.content);
							me.undoManger.save();
						} else if(confirm('正文内容即将替换成模板内容，是否确认？')) {
							me.setContent(request.data.EditorStyle.content);
							me.undoManger.save();
						}
					}
				});
			});
			$(obj).on('click', '.html-parser-rule', function() {
				var rule_id = $(this).data('id');
				var data = {
					html: me.getContent()
				};
				$('#html-parsers-options :input', obj).each(function() {
					data[this.name] = this.value;
				});
				ajaxAction('http://www.135editor.com/html_parsers/parse/' + rule_id, data, null, function(request) {
					if(request.success) {
						me.undoManger.save();
						me.setContent(request.html);
						me.undoManger.save();
					}
				});
			});
			$(obj).on('click', '#system-img-list .appmsg', function() {
				var $image = $(this).find('img:first');
				var src = strip_imgthumb_opr($image.attr('src'));
				var range = me.selection.getRange();
				if(!range.collapsed) {
					var img = range.getClosedNode();
					if(img && img.tagName == 'IMG') {
						img.src = src;
						img.setAttribute('_src', src);
						return;
					}
				}
				insertHtml("<img src=\"" + src + "\">");
				if($image.data('id')) {
					style_click($image.data('id'));
				}
				return false;
			});
			$('#replace-color-all', obj).on('click', function() {
				if(this.checked) {
					window.replace_full_color = true;
				} else {
					window.replace_full_color = false;
				}
			});
			$('#txtStyleSearch', obj).on('keyup blur focus', function() {
				var last = $(this).data('last');
				var word = $.trim(this.value);
				if(word == "" || word == " ") {
					$('#styleSearchResult', obj).hide();
					return false;
				}
				if(last == word) {
					$('#styleSearchResult', obj).show();
					return false;
				} else {
					$(this).data('last', word);
					$('#styleSearchResult', obj).show();
					$('#styleSearchResultList', obj).load('/editor_styles/search?inajax=1&name=' + word + ' #style_search_list', function(data) {;
					});
				}
			});
			$('.autonum', obj).on('mousewheel', function(event) {
				var num = parseInt($(this).html());
				if(event.deltaY < 0) {
					if(num <= 1) return;
					$(this).html(num - 1);
				} else {
					$(this).html(num + 1);
				}
				return false;
			});
			$('.colorPicker', obj).colorPicker({
				customBG: '#FFF',
				size: 2,
				appenTo: 'body',
				mode: 'hsv-h',
				init: function(elm, colors) {
					elm.style.backgroundColor = elm.value;
					elm.style.color = colors.rgbaMixCustom.luminance > 0.22 ? '#222' : '#ddd';
				}
			});
			$('.colorPicker', obj).blur(function() {
				setBackgroundColor(this.value, '#FFF', true);
				this.style.backgroundColor = this.value;
				this.style.color = '#FFF';
			});
			$('.colorPicker', obj).keyup(function() {
				if(this.value.search('#') == 0) {
					if(this.value.length == 7) {
						$(this).trigger('focus.colorPicker');
					}
				} else {
					if(this.value.search('rgb') == 0 && this.value.indexOf(")") > 0) {
						$(this).trigger('focus.colorPicker');
					}
				}
			});
		});
	});
};
$(document).on('click', function(event) {
	var object = event.srcElement ? event.srcElement : event.target;
	if(object && ($(object).parents('#color-plan').size() > 0 || $(object).parents('.cp-app').size() > 0)) {} else {
		hideColorPlan();
	}
});
$(document).on('click', '.color-switch', function(event) {
	$('.color-switch').removeClass('active');
	$(this).addClass('active');
	var color = $(this).data('color');
	var bgcolor = $(this).css('backgroundColor');
	$('#custom-color-text').val(bgcolor).css('backgroundColor', bgcolor);
	if(!color) color = '#FFF';
	setBackgroundColor(bgcolor, color, true);
	event.preventDefault();
	event.stopPropagation();
});
if(typeof(window.showSuccessMessage) == 'undefined') {
	window.showSuccessMessage = function(text) {
		if(current_editor) {
			current_editor.fireEvent('showmessage', {
				'id': 'success-msg',
				'content': text,
				'type': 'success',
				'timeout': 4000
			});
		} else {
			alert(text);
		}
		return true;
	}
}
if(typeof(window.color_click) == 'undefined') {
	window.color_click = function(color) {
		color = hex2rgb(color);
		var url = 'http://www.135editor.com/colors/click';
		ajaxAction(url, {
			color: color
		});
		return false;
	}
}
if(typeof(window.style_click) == 'undefined') {
	window.style_click = function(id) {
		var url = 'http://www.135editor.com/editor_styles/click_num';
		ajaxAction(url, {
			id: id
		});
		return false;
	}
}
if(typeof(window.setFavorColor) == 'undefined') {
	window.setFavorColor = function(colors, callback) {
		var url = 'http://www.135editor.com/editor_styles/setFavorColor';
		ajaxAction(url, {
			colors: colors
		}, null, callback);
	}
}
if(typeof(window.showErrorMessage) == 'undefined') {
	window.showErrorMessage = function(text) {
		if(current_editor) {
			current_editor.fireEvent('showmessage', {
				'id': 'error-msg',
				'content': text,
				'type': 'error',
				'timeout': 4000
			});
		} else {
			alert(text);
		}
		return true;
	}
}
if(typeof(window.strip_imgthumb_opr) == 'undefined') {
	window.strip_imgthumb_opr = function(imgurl) {
		var idx = imgurl.indexOf('@');
		if(idx > 0) {
			return imgurl.substring(0, idx);
		}
		return imgurl;
	}
}
if(typeof(window.ajaxAction) == 'undefined') {
	window.ajaxAction = function(url, postdata, form, callback_func_name, moreags) {
		if(url.search(/\?/) != -1) {
			url += '&inajax=1';
		} else {
			url += '?inajax=1';
		}
		if(form) {
			$(':submit', form).each(function() {
				var html = $(this).html();
				$(this).data('html', html).html('<img src="http://static.135editor.com/img/ajax/circle_ball.gif"> ' + html).attr('disabled', 'disabled');
			});
		}
		$.ajax({
			type: 'post',
			url: url,
			data: postdata,
			complete: function(XMLHttpRequest, textStatus) {
				if(form) {
					$(':submit', form).each(function() {
						var html = $(this).data('html');
						$(this).html(html).removeAttr('disabled');
					})
				}
			},
			success: function(request) {
				if(request.success) {
					showSuccessMessage(request.success);
				} else if(request.error && !request.tasks) {
					showErrorMessage(request.error);
					var errorinfo = '';
					for(var i in request) {
						errorinfo += "<span class='ui-state-error ui-corner-all'><span class='ui-icon ui-icon-alert'></span>" + request[i] + "</span>";
					}
				}
				if(form) {
					$(':submit', form).each(function() {
						var html = $(this).data('html');
						$(this).html(html).removeAttr('disabled');
					})
				}
				if(typeof(callback_func_name) == 'function') {
					callback_func_name(request);
				} else if(callback_func_name && rs_callbacks[callback_func_name]) {
					var func = rs_callbacks[callback_func_name];
					if(moreags) {
						func(request, moreags);
					} else {
						func(request);
					}
				}
				if(request.tasks) {
					$(request.tasks).each(function(i) {
						var task = request.tasks[i];
						if(task.dotype == "html") {
							if($(task.selector, form).size()) {
								$(task.selector, form).html(task.content).show();
							} else {
								$(task.selector).html(task.content).show();
							}
						} else if(task.dotype == "value") {
							if($(task.selector, form).size()) {
								$(task.selector, form).val(task.content);
							} else {
								$(task.selector).val(task.content);
							}
						} else if(task.dotype == "append") {
							$(task.content).appendTo(task.selector);
						} else if(task.dotype == "dialog") {
							$(task.content).appendTo(task.selector);
						} else if(task.dotype == "location") {
							window.location.href = task.url;
						} else if(task.dotype == "reload") {
							window.location.reload();
						} else if(task.dotype == "jquery") {
							if(task.args) {
								$(task.selector)[task.func](task.args);
							} else {
								$(task.selector)[task.func]();
							}
						} else if(task.dotype == "callback") {
							var callback = null,
								thisArg = null;
							eval("callback= " + task.callback + ";");
							eval("thisArg= " + task.thisArg + ";");
							var args = [];
							for(var i in task.callback_args) {
								args[args.length] = task.callback_args[i];
							}
							if(callback) {
								callback.apply(thisArg, args);
							}
						}
					});
				}
			},
			dataType: "json"
		});
		return false;
	}
};
/**!
 * MixItUp v2.1.9
 *
 * @copyright Copyright 2015 KunkaLabs Limited.
 * @author    KunkaLabs Limited.
 * @link      https://mixitup.kunkalabs.com
 *
 * @license   Commercial use requires a commercial license.
 *            https://mixitup.kunkalabs.com/licenses/
 *
 *            Non-commercial use permitted under terms of CC-BY-NC license.
 *            http://creativecommons.org/licenses/by-nc/3.0/
 */
! function(a, b) {
	a.MixItUp = function() {
		var b = this;
		b._execAction("_constructor", 0), a.extend(b, {
			selectors: {
				target: ".mix",
				filter: ".filter",
				sort: ".sort"
			},
			animation: {
				enable: !0,
				effects: "fade scale",
				duration: 600,
				easing: "ease",
				perspectiveDistance: "3000",
				perspectiveOrigin: "50% 50%",
				queue: !0,
				queueLimit: 1,
				animateChangeLayout: !1,
				animateResizeContainer: !0,
				animateResizeTargets: !1,
				staggerSequence: !1,
				reverseOut: !1
			},
			callbacks: {
				onMixLoad: !1,
				onMixStart: !1,
				onMixBusy: !1,
				onMixEnd: !1,
				onMixFail: !1,
				_user: !1
			},
			controls: {
				enable: !0,
				live: !1,
				toggleFilterButtons: !1,
				toggleLogic: "or",
				activeClass: "active"
			},
			layout: {
				display: "inline-block",
				containerClass: "",
				containerClassFail: "fail"
			},
			load: {
				filter: "all",
				sort: !1
			},
			_$body: null,
			_$container: null,
			_$targets: null,
			_$parent: null,
			_$sortButtons: null,
			_$filterButtons: null,
			_suckMode: !1,
			_mixing: !1,
			_sorting: !1,
			_clicking: !1,
			_loading: !0,
			_changingLayout: !1,
			_changingClass: !1,
			_changingDisplay: !1,
			_origOrder: [],
			_startOrder: [],
			_newOrder: [],
			_activeFilter: null,
			_toggleArray: [],
			_toggleString: "",
			_activeSort: "default:asc",
			_newSort: null,
			_startHeight: null,
			_newHeight: null,
			_incPadding: !0,
			_newDisplay: null,
			_newClass: null,
			_targetsBound: 0,
			_targetsDone: 0,
			_queue: [],
			_$show: a(),
			_$hide: a()
		}), b._execAction("_constructor", 1)
	}, a.MixItUp.prototype = {
		constructor: a.MixItUp,
		_instances: {},
		_handled: {
			_filter: {},
			_sort: {}
		},
		_bound: {
			_filter: {},
			_sort: {}
		},
		_actions: {},
		_filters: {},
		extend: function(b) {
			for(var c in b) a.MixItUp.prototype[c] = b[c]
		},
		addAction: function(b, c, d, e) {
			a.MixItUp.prototype._addHook("_actions", b, c, d, e)
		},
		addFilter: function(b, c, d, e) {
			a.MixItUp.prototype._addHook("_filters", b, c, d, e)
		},
		_addHook: function(b, c, d, e, f) {
			var g = a.MixItUp.prototype[b],
				h = {};
			f = 1 === f || "post" === f ? "post" : "pre", h[c] = {}, h[c][f] = {}, h[c][f][d] = e, a.extend(!0, g, h)
		},
		_init: function(b, c) {
			var d = this;
			if(d._execAction("_init", 0, arguments), c && a.extend(!0, d, c), d._$body = a("body"), d._domNode = b, d._$container = a(b), d._$container.addClass(d.layout.containerClass), d._id = b.id, d._platformDetect(), d._brake = d._getPrefixedCSS("transition", "none"), d._refresh(!0), d._$parent = d._$targets.parent().length ? d._$targets.parent() : d._$container, d.load.sort && (d._newSort = d._parseSort(d.load.sort), d._newSortString = d.load.sort, d._activeSort = d.load.sort, d._sort(), d._printSort()), d._activeFilter = "all" === d.load.filter ? d.selectors.target : "none" === d.load.filter ? "" : d.load.filter, d.controls.enable && d._bindHandlers(), d.controls.toggleFilterButtons) {
				d._buildToggleArray();
				for(var e = 0; e < d._toggleArray.length; e++) d._updateControls({
					filter: d._toggleArray[e],
					sort: d._activeSort
				}, !0)
			} else d.controls.enable && d._updateControls({
				filter: d._activeFilter,
				sort: d._activeSort
			});
			d._filter(), d._init = !0, d._$container.data("mixItUp", d), d._execAction("_init", 1, arguments), d._buildState(), d._$targets.css(d._brake), d._goMix(d.animation.enable)
		},
		_platformDetect: function() {
			var a = this,
				c = ["Webkit", "Moz", "O", "ms"],
				d = ["webkit", "moz"],
				e = window.navigator.appVersion.match(/Chrome\/(\d+)\./) || !1,
				f = "undefined" != typeof InstallTrigger,
				g = function(a) {
					for(var b = 0; b < c.length; b++)
						if(c[b] + "Transition" in a.style) return {
							prefix: "-" + c[b].toLowerCase() + "-",
							vendor: c[b]
						};
					return "transition" in a.style ? "" : !1
				},
				h = g(a._domNode);
			a._execAction("_platformDetect", 0), a._chrome = e ? parseInt(e[1], 10) : !1, a._ff = f ? parseInt(window.navigator.userAgent.match(/rv:([^)]+)\)/)[1]) : !1, a._prefix = h.prefix, a._vendor = h.vendor, a._suckMode = window.atob && a._prefix ? !1 : !0, a._suckMode && (a.animation.enable = !1), a._ff && a._ff <= 4 && (a.animation.enable = !1);
			for(var i = 0; i < d.length && !window.requestAnimationFrame; i++) window.requestAnimationFrame = window[d[i] + "RequestAnimationFrame"];
			"function" != typeof Object.getPrototypeOf && ("object" == typeof "test".__proto__ ? Object.getPrototypeOf = function(a) {
				return a.__proto__
			} : Object.getPrototypeOf = function(a) {
				return a.constructor.prototype
			}), a._domNode.nextElementSibling === b && Object.defineProperty(Element.prototype, "nextElementSibling", {
				get: function() {
					for(var a = this.nextSibling; a;) {
						if(1 === a.nodeType) return a;
						a = a.nextSibling
					}
					return null
				}
			}), a._execAction("_platformDetect", 1)
		},
		_refresh: function(a, c) {
			var d = this;
			d._execAction("_refresh", 0, arguments), d._$targets = d._$container.find(d.selectors.target);
			for(var e = 0; e < d._$targets.length; e++) {
				var f = d._$targets[e];
				if(f.dataset === b || c) {
					f.dataset = {};
					for(var g = 0; g < f.attributes.length; g++) {
						var h = f.attributes[g],
							i = h.name,
							j = h.value;
						if(i.indexOf("data-") > -1) {
							var k = d._helpers._camelCase(i.substring(5, i.length));
							f.dataset[k] = j
						}
					}
				}
				f.mixParent === b && (f.mixParent = d._id)
			}
			if(d._$targets.length && a || !d._origOrder.length && d._$targets.length) {
				d._origOrder = [];
				for(var e = 0; e < d._$targets.length; e++) {
					var f = d._$targets[e];
					d._origOrder.push(f)
				}
			}
			d._execAction("_refresh", 1, arguments)
		},
		_bindHandlers: function() {
			var c = this,
				d = a.MixItUp.prototype._bound._filter,
				e = a.MixItUp.prototype._bound._sort;
			c._execAction("_bindHandlers", 0), c.controls.live ? c._$body.on("click.mixItUp." + c._id, c.selectors.sort, function() {
				c._processClick(a(this), "sort")
			}).on("click.mixItUp." + c._id, c.selectors.filter, function() {
				c._processClick(a(this), "filter")
			}) : (c._$sortButtons = a(c.selectors.sort), c._$filterButtons = a(c.selectors.filter), c._$sortButtons.on("click.mixItUp." + c._id, function() {
				c._processClick(a(this), "sort")
			}), c._$filterButtons.on("click.mixItUp." + c._id, function() {
				c._processClick(a(this), "filter")
			})), d[c.selectors.filter] = d[c.selectors.filter] === b ? 1 : d[c.selectors.filter] + 1, e[c.selectors.sort] = e[c.selectors.sort] === b ? 1 : e[c.selectors.sort] + 1, c._execAction("_bindHandlers", 1)
		},
		_processClick: function(c, d) {
			var e = this,
				f = function(c, d, f) {
					var g = a.MixItUp.prototype;
					g._handled["_" + d][e.selectors[d]] = g._handled["_" + d][e.selectors[d]] === b ? 1 : g._handled["_" + d][e.selectors[d]] + 1, g._handled["_" + d][e.selectors[d]] === g._bound["_" + d][e.selectors[d]] && (c[(f ? "remove" : "add") + "Class"](e.controls.activeClass), delete g._handled["_" + d][e.selectors[d]])
				};
			if(e._execAction("_processClick", 0, arguments), !e._mixing || e.animation.queue && e._queue.length < e.animation.queueLimit) {
				if(e._clicking = !0, "sort" === d) {
					var g = c.attr("data-sort");
					(!c.hasClass(e.controls.activeClass) || g.indexOf("random") > -1) && (a(e.selectors.sort).removeClass(e.controls.activeClass), f(c, d), e.sort(g))
				}
				if("filter" === d) {
					var h, i = c.attr("data-filter"),
						j = "or" === e.controls.toggleLogic ? "," : "";
					e.controls.toggleFilterButtons ? (e._buildToggleArray(), c.hasClass(e.controls.activeClass) ? (f(c, d, !0), h = e._toggleArray.indexOf(i), e._toggleArray.splice(h, 1)) : (f(c, d), e._toggleArray.push(i)), e._toggleArray = a.grep(e._toggleArray, function(a) {
						return a
					}), e._toggleString = e._toggleArray.join(j), e.filter(e._toggleString)) : c.hasClass(e.controls.activeClass) || (a(e.selectors.filter).removeClass(e.controls.activeClass), f(c, d), e.filter(i))
				}
				e._execAction("_processClick", 1, arguments)
			} else "function" == typeof e.callbacks.onMixBusy && e.callbacks.onMixBusy.call(e._domNode, e._state, e), e._execAction("_processClickBusy", 1, arguments)
		},
		_buildToggleArray: function() {
			var a = this,
				b = a._activeFilter.replace(/\s/g, "");
			if(a._execAction("_buildToggleArray", 0, arguments), "or" === a.controls.toggleLogic) a._toggleArray = b.split(",");
			else {
				a._toggleArray = b.split("."), !a._toggleArray[0] && a._toggleArray.shift();
				for(var c, d = 0; c = a._toggleArray[d]; d++) a._toggleArray[d] = "." + c
			}
			a._execAction("_buildToggleArray", 1, arguments)
		},
		_updateControls: function(c, d) {
			var e = this,
				f = {
					filter: c.filter,
					sort: c.sort
				},
				g = function(a, b) {
					try {
						d && "filter" === h && "none" !== f.filter && "" !== f.filter ? a.filter(b).addClass(e.controls.activeClass) : a.removeClass(e.controls.activeClass).filter(b).addClass(e.controls.activeClass)
					} catch(c) {}
				},
				h = "filter",
				i = null;
			e._execAction("_updateControls", 0, arguments), c.filter === b && (f.filter = e._activeFilter), c.sort === b && (f.sort = e._activeSort), f.filter === e.selectors.target && (f.filter = "all");
			for(var j = 0; 2 > j; j++) i = e.controls.live ? a(e.selectors[h]) : e["_$" + h + "Buttons"], i && g(i, "[data-" + h + '="' + f[h] + '"]'), h = "sort";
			e._execAction("_updateControls", 1, arguments)
		},
		_filter: function() {
			var b = this;
			b._execAction("_filter", 0);
			for(var c = 0; c < b._$targets.length; c++) {
				var d = a(b._$targets[c]);
				d.is(b._activeFilter) ? b._$show = b._$show.add(d) : b._$hide = b._$hide.add(d)
			}
			b._execAction("_filter", 1)
		},
		_sort: function() {
			var a = this,
				b = function(a) {
					for(var b = a.slice(), c = b.length, d = c; d--;) {
						var e = parseInt(Math.random() * c),
							f = b[d];
						b[d] = b[e], b[e] = f
					}
					return b
				};
			a._execAction("_sort", 0), a._startOrder = [];
			for(var c = 0; c < a._$targets.length; c++) {
				var d = a._$targets[c];
				a._startOrder.push(d)
			}
			switch(a._newSort[0].sortBy) {
				case "default":
					a._newOrder = a._origOrder;
					break;
				case "random":
					a._newOrder = b(a._startOrder);
					break;
				case "custom":
					a._newOrder = a._newSort[0].order;
					break;
				default:
					a._newOrder = a._startOrder.concat().sort(function(b, c) {
						return a._compare(b, c)
					})
			}
			a._execAction("_sort", 1)
		},
		_compare: function(a, b, c) {
			c = c ? c : 0;
			var d = this,
				e = d._newSort[c].order,
				f = function(a) {
					return a.dataset[d._newSort[c].sortBy] || 0
				},
				g = isNaN(1 * f(a)) ? f(a).toLowerCase() : 1 * f(a),
				h = isNaN(1 * f(b)) ? f(b).toLowerCase() : 1 * f(b);
			return h > g ? "asc" === e ? -1 : 1 : g > h ? "asc" === e ? 1 : -1 : g === h && d._newSort.length > c + 1 ? d._compare(a, b, c + 1) : 0
		},
		_printSort: function(a) {
			var b = this,
				c = a ? b._startOrder : b._newOrder,
				d = b._$parent[0].querySelectorAll(b.selectors.target),
				e = d.length ? d[d.length - 1].nextElementSibling : null,
				f = document.createDocumentFragment();
			b._execAction("_printSort", 0, arguments);
			for(var g = 0; g < d.length; g++) {
				var h = d[g],
					i = h.nextSibling;
				"absolute" !== h.style.position && (i && "#text" === i.nodeName && b._$parent[0].removeChild(i), b._$parent[0].removeChild(h))
			}
			for(var g = 0; g < c.length; g++) {
				var j = c[g];
				if("default" !== b._newSort[0].sortBy || "desc" !== b._newSort[0].order || a) f.appendChild(j), f.appendChild(document.createTextNode(" "));
				else {
					var k = f.firstChild;
					f.insertBefore(j, k), f.insertBefore(document.createTextNode(" "), j)
				}
			}
			e ? b._$parent[0].insertBefore(f, e) : b._$parent[0].appendChild(f), b._execAction("_printSort", 1, arguments)
		},
		_parseSort: function(a) {
			for(var b = this, c = "string" == typeof a ? a.split(" ") : [a], d = [], e = 0; e < c.length; e++) {
				var f = "string" == typeof a ? c[e].split(":") : ["custom", c[e]],
					g = {
						sortBy: b._helpers._camelCase(f[0]),
						order: f[1] || "asc"
					};
				if(d.push(g), "default" === g.sortBy || "random" === g.sortBy) break
			}
			return b._execFilter("_parseSort", d, arguments)
		},
		_parseEffects: function() {
			var a = this,
				b = {
					opacity: "",
					transformIn: "",
					transformOut: "",
					filter: ""
				},
				c = function(b, c, d) {
					if(a.animation.effects.indexOf(b) > -1) {
						if(c) {
							var e = a.animation.effects.indexOf(b + "(");
							if(e > -1) {
								var f = a.animation.effects.substring(e),
									g = /\(([^)]+)\)/.exec(f),
									h = g[1];
								return {
									val: h
								}
							}
						}
						return !0
					}
					return !1
				},
				d = function(a, b) {
					return b ? "-" === a.charAt(0) ? a.substr(1, a.length) : "-" + a : a
				},
				e = function(a, e) {
					for(var f = [
							["scale", ".01"],
							["translateX", "20px"],
							["translateY", "20px"],
							["translateZ", "20px"],
							["rotateX", "90deg"],
							["rotateY", "90deg"],
							["rotateZ", "180deg"]
						], g = 0; g < f.length; g++) {
						var h = f[g][0],
							i = f[g][1],
							j = e && "scale" !== h;
						b[a] += c(h) ? h + "(" + d(c(h, !0).val || i, j) + ") " : ""
					}
				};
			return b.opacity = c("fade") ? c("fade", !0).val || "0" : "1", e("transformIn"), a.animation.reverseOut ? e("transformOut", !0) : b.transformOut = b.transformIn, b.transition = {}, b.transition = a._getPrefixedCSS("transition", "all " + a.animation.duration + "ms " + a.animation.easing + ", opacity " + a.animation.duration + "ms linear"), a.animation.stagger = c("stagger") ? !0 : !1, a.animation.staggerDuration = parseInt(c("stagger") && c("stagger", !0).val ? c("stagger", !0).val : 100), a._execFilter("_parseEffects", b)
		},
		_buildState: function(a) {
			var b = this,
				c = {};
			return b._execAction("_buildState", 0), c = {
				activeFilter: "" === b._activeFilter ? "none" : b._activeFilter,
				activeSort: a && b._newSortString ? b._newSortString : b._activeSort,
				fail: !b._$show.length && "" !== b._activeFilter,
				$targets: b._$targets,
				$show: b._$show,
				$hide: b._$hide,
				totalTargets: b._$targets.length,
				totalShow: b._$show.length,
				totalHide: b._$hide.length,
				display: a && b._newDisplay ? b._newDisplay : b.layout.display
			}, a ? b._execFilter("_buildState", c) : (b._state = c, void b._execAction("_buildState", 1))
		},
		_goMix: function(a) {
			var b = this,
				c = function() {
					b._chrome && 31 === b._chrome && f(b._$parent[0]), b._setInter(), d()
				},
				d = function() {
					var a = window.pageYOffset,
						c = window.pageXOffset;
					document.documentElement.scrollHeight;
					b._getInterMixData(), b._setFinal(), b._getFinalMixData(), window.pageYOffset !== a && window.scrollTo(c, a), b._prepTargets(), window.requestAnimationFrame ? requestAnimationFrame(e) : setTimeout(function() {
						e()
					}, 20)
				},
				e = function() {
					b._animateTargets(), 0 === b._targetsBound && b._cleanUp()
				},
				f = function(a) {
					var b = a.parentElement,
						c = document.createElement("div"),
						d = document.createDocumentFragment();
					b.insertBefore(c, a), d.appendChild(a), b.replaceChild(a, c)
				},
				g = b._buildState(!0);
			b._execAction("_goMix", 0, arguments), !b.animation.duration && (a = !1), b._mixing = !0, b._$container.removeClass(b.layout.containerClassFail), "function" == typeof b.callbacks.onMixStart && b.callbacks.onMixStart.call(b._domNode, b._state, g, b), b._$container.trigger("mixStart", [b._state, g, b]), b._getOrigMixData(), a && !b._suckMode ? window.requestAnimationFrame ? requestAnimationFrame(c) : c() : b._cleanUp(), b._execAction("_goMix", 1, arguments)
		},
		_getTargetData: function(a, b) {
			var c, d = this;
			a.dataset[b + "PosX"] = a.offsetLeft, a.dataset[b + "PosY"] = a.offsetTop, d.animation.animateResizeTargets && (c = d._suckMode ? {
				marginBottom: "",
				marginRight: ""
			} : window.getComputedStyle(a), a.dataset[b + "MarginBottom"] = parseInt(c.marginBottom), a.dataset[b + "MarginRight"] = parseInt(c.marginRight), a.dataset[b + "Width"] = a.offsetWidth, a.dataset[b + "Height"] = a.offsetHeight)
		},
		_getOrigMixData: function() {
			var a = this,
				b = a._suckMode ? {
					boxSizing: ""
				} : window.getComputedStyle(a._$parent[0]),
				c = b.boxSizing || b[a._vendor + "BoxSizing"];
			a._incPadding = "border-box" === c, a._execAction("_getOrigMixData", 0), !a._suckMode && (a.effects = a._parseEffects()), a._$toHide = a._$hide.filter(":visible"), a._$toShow = a._$show.filter(":hidden"), a._$pre = a._$targets.filter(":visible"), a._startHeight = a._incPadding ? a._$parent.outerHeight() : a._$parent.height();
			for(var d = 0; d < a._$pre.length; d++) {
				var e = a._$pre[d];
				a._getTargetData(e, "orig")
			}
			a._execAction("_getOrigMixData", 1)
		},
		_setInter: function() {
			var a = this;
			a._execAction("_setInter", 0), a._changingLayout && a.animation.animateChangeLayout ? (a._$toShow.css("display", a._newDisplay), a._changingClass && a._$container.removeClass(a.layout.containerClass).addClass(a._newClass)) : a._$toShow.css("display", a.layout.display), a._execAction("_setInter", 1)
		},
		_getInterMixData: function() {
			var a = this;
			a._execAction("_getInterMixData", 0);
			for(var b = 0; b < a._$toShow.length; b++) {
				var c = a._$toShow[b];
				a._getTargetData(c, "inter")
			}
			for(var b = 0; b < a._$pre.length; b++) {
				var c = a._$pre[b];
				a._getTargetData(c, "inter")
			}
			a._execAction("_getInterMixData", 1)
		},
		_setFinal: function() {
			var a = this;
			a._execAction("_setFinal", 0), a._sorting && a._printSort(), a._$toHide.removeStyle("display"), a._changingLayout && a.animation.animateChangeLayout && a._$pre.css("display", a._newDisplay), a._execAction("_setFinal", 1)
		},
		_getFinalMixData: function() {
			var a = this;
			a._execAction("_getFinalMixData", 0);
			for(var b = 0; b < a._$toShow.length; b++) {
				var c = a._$toShow[b];
				a._getTargetData(c, "final")
			}
			for(var b = 0; b < a._$pre.length; b++) {
				var c = a._$pre[b];
				a._getTargetData(c, "final")
			}
			a._newHeight = a._incPadding ? a._$parent.outerHeight() : a._$parent.height(), a._sorting && a._printSort(!0), a._$toShow.removeStyle("display"), a._$pre.css("display", a.layout.display), a._changingClass && a.animation.animateChangeLayout && a._$container.removeClass(a._newClass).addClass(a.layout.containerClass), a._execAction("_getFinalMixData", 1)
		},
		_prepTargets: function() {
			var b = this,
				c = {
					_in: b._getPrefixedCSS("transform", b.effects.transformIn),
					_out: b._getPrefixedCSS("transform", b.effects.transformOut)
				};
			b._execAction("_prepTargets", 0), b.animation.animateResizeContainer && b._$parent.css("height", b._startHeight + "px");
			for(var d = 0; d < b._$toShow.length; d++) {
				var e = b._$toShow[d],
					f = a(e);
				e.style.opacity = b.effects.opacity, e.style.display = b._changingLayout && b.animation.animateChangeLayout ? b._newDisplay : b.layout.display, f.css(c._in), b.animation.animateResizeTargets && (e.style.width = e.dataset.finalWidth + "px", e.style.height = e.dataset.finalHeight + "px", e.style.marginRight = -(e.dataset.finalWidth - e.dataset.interWidth) + 1 * e.dataset.finalMarginRight + "px", e.style.marginBottom = -(e.dataset.finalHeight - e.dataset.interHeight) + 1 * e.dataset.finalMarginBottom + "px")
			}
			for(var d = 0; d < b._$pre.length; d++) {
				var e = b._$pre[d],
					f = a(e),
					g = {
						x: e.dataset.origPosX - e.dataset.interPosX,
						y: e.dataset.origPosY - e.dataset.interPosY
					},
					c = b._getPrefixedCSS("transform", "translate(" + g.x + "px," + g.y + "px)");
				f.css(c), b.animation.animateResizeTargets && (e.style.width = e.dataset.origWidth + "px", e.style.height = e.dataset.origHeight + "px", e.dataset.origWidth - e.dataset.finalWidth && (e.style.marginRight = -(e.dataset.origWidth - e.dataset.interWidth) + 1 * e.dataset.origMarginRight + "px"), e.dataset.origHeight - e.dataset.finalHeight && (e.style.marginBottom = -(e.dataset.origHeight - e.dataset.interHeight) + 1 * e.dataset.origMarginBottom + "px"))
			}
			b._execAction("_prepTargets", 1)
		},
		_animateTargets: function() {
			var b = this;
			b._execAction("_animateTargets", 0), b._targetsDone = 0, b._targetsBound = 0, b._$parent.css(b._getPrefixedCSS("perspective", b.animation.perspectiveDistance + "px")).css(b._getPrefixedCSS("perspective-origin", b.animation.perspectiveOrigin)), b.animation.animateResizeContainer && b._$parent.css(b._getPrefixedCSS("transition", "height " + b.animation.duration + "ms ease")).css("height", b._newHeight + "px");
			for(var c = 0; c < b._$toShow.length; c++) {
				var d = b._$toShow[c],
					e = a(d),
					f = {
						x: d.dataset.finalPosX - d.dataset.interPosX,
						y: d.dataset.finalPosY - d.dataset.interPosY
					},
					g = b._getDelay(c),
					h = {};
				d.style.opacity = "";
				for(var i = 0; 2 > i; i++) {
					var j = 0 === i ? j = b._prefix : "";
					b._ff && b._ff <= 20 && (h[j + "transition-property"] = "all", h[j + "transition-timing-function"] = b.animation.easing + "ms", h[j + "transition-duration"] = b.animation.duration + "ms"), h[j + "transition-delay"] = g + "ms", h[j + "transform"] = "translate(" + f.x + "px," + f.y + "px)"
				}(b.effects.transform || b.effects.opacity) && b._bindTargetDone(e), b._ff && b._ff <= 20 ? e.css(h) : e.css(b.effects.transition).css(h)
			}
			for(var c = 0; c < b._$pre.length; c++) {
				var d = b._$pre[c],
					e = a(d),
					f = {
						x: d.dataset.finalPosX - d.dataset.interPosX,
						y: d.dataset.finalPosY - d.dataset.interPosY
					},
					g = b._getDelay(c);
				(d.dataset.finalPosX !== d.dataset.origPosX || d.dataset.finalPosY !== d.dataset.origPosY) && b._bindTargetDone(e), e.css(b._getPrefixedCSS("transition", "all " + b.animation.duration + "ms " + b.animation.easing + " " + g + "ms")), e.css(b._getPrefixedCSS("transform", "translate(" + f.x + "px," + f.y + "px)")), b.animation.animateResizeTargets && (d.dataset.origWidth - d.dataset.finalWidth && 1 * d.dataset.finalWidth && (d.style.width = d.dataset.finalWidth + "px", d.style.marginRight = -(d.dataset.finalWidth - d.dataset.interWidth) + 1 * d.dataset.finalMarginRight + "px"), d.dataset.origHeight - d.dataset.finalHeight && 1 * d.dataset.finalHeight && (d.style.height = d.dataset.finalHeight + "px", d.style.marginBottom = -(d.dataset.finalHeight - d.dataset.interHeight) + 1 * d.dataset.finalMarginBottom + "px"))
			}
			b._changingClass && b._$container.removeClass(b.layout.containerClass).addClass(b._newClass);
			for(var c = 0; c < b._$toHide.length; c++) {
				for(var d = b._$toHide[c], e = a(d), g = b._getDelay(c), k = {}, i = 0; 2 > i; i++) {
					var j = 0 === i ? j = b._prefix : "";
					k[j + "transition-delay"] = g + "ms", k[j + "transform"] = b.effects.transformOut, k.opacity = b.effects.opacity
				}
				e.css(b.effects.transition).css(k), (b.effects.transform || b.effects.opacity) && b._bindTargetDone(e)
			}
			b._execAction("_animateTargets", 1)
		},
		_bindTargetDone: function(b) {
			var c = this,
				d = b[0];
			c._execAction("_bindTargetDone", 0, arguments), d.dataset.bound || (d.dataset.bound = !0, c._targetsBound++, b.on("webkitTransitionEnd.mixItUp transitionend.mixItUp", function(e) {
				(e.originalEvent.propertyName.indexOf("transform") > -1 || e.originalEvent.propertyName.indexOf("opacity") > -1) && a(e.originalEvent.target).is(c.selectors.target) && (b.off(".mixItUp"), delete d.dataset.bound, c._targetDone())
			})), c._execAction("_bindTargetDone", 1, arguments)
		},
		_targetDone: function() {
			var a = this;
			a._execAction("_targetDone", 0), a._targetsDone++, a._targetsDone === a._targetsBound && a._cleanUp(), a._execAction("_targetDone", 1)
		},
		_cleanUp: function() {
			var b = this,
				c = b.animation.animateResizeTargets ? "transform opacity width height margin-bottom margin-right" : "transform opacity";
			unBrake = function() {
				b._$targets.removeStyle("transition", b._prefix)
			}, b._execAction("_cleanUp", 0), b._changingLayout ? b._$show.css("display", b._newDisplay) : b._$show.css("display", b.layout.display), b._$targets.css(b._brake), b._$targets.removeStyle(c, b._prefix).removeAttr("data-inter-pos-x data-inter-pos-y data-final-pos-x data-final-pos-y data-orig-pos-x data-orig-pos-y data-orig-height data-orig-width data-final-height data-final-width data-inter-width data-inter-height data-orig-margin-right data-orig-margin-bottom data-inter-margin-right data-inter-margin-bottom data-final-margin-right data-final-margin-bottom"), b._$hide.removeStyle("display"), b._$parent.removeStyle("height transition perspective-distance perspective perspective-origin-x perspective-origin-y perspective-origin perspectiveOrigin", b._prefix), b._sorting && (b._printSort(), b._activeSort = b._newSortString, b._sorting = !1), b._changingLayout && (b._changingDisplay && (b.layout.display = b._newDisplay, b._changingDisplay = !1), b._changingClass && (b._$parent.removeClass(b.layout.containerClass).addClass(b._newClass), b.layout.containerClass = b._newClass, b._changingClass = !1), b._changingLayout = !1), b._refresh(), b._buildState(), b._state.fail && b._$container.addClass(b.layout.containerClassFail), b._$show = a(), b._$hide = a(), window.requestAnimationFrame && requestAnimationFrame(unBrake), b._mixing = !1, "function" == typeof b.callbacks._user && b.callbacks._user.call(b._domNode, b._state, b), "function" == typeof b.callbacks.onMixEnd && b.callbacks.onMixEnd.call(b._domNode, b._state, b), b._$container.trigger("mixEnd", [b._state, b]), b._state.fail && ("function" == typeof b.callbacks.onMixFail && b.callbacks.onMixFail.call(b._domNode, b._state, b), b._$container.trigger("mixFail", [b._state, b])), b._loading && ("function" == typeof b.callbacks.onMixLoad && b.callbacks.onMixLoad.call(b._domNode, b._state, b), b._$container.trigger("mixLoad", [b._state, b])), b._queue.length && (b._execAction("_queue", 0), b.multiMix(b._queue[0][0], b._queue[0][1], b._queue[0][2]), b._queue.splice(0, 1)), b._execAction("_cleanUp", 1), b._loading = !1
		},
		_getPrefixedCSS: function(a, b, c) {
			var d = this,
				e = {},
				f = "",
				g = -1;
			for(g = 0; 2 > g; g++) f = 0 === g ? d._prefix : "", c ? e[f + a] = f + b : e[f + a] = b;
			return d._execFilter("_getPrefixedCSS", e, arguments)
		},
		_getDelay: function(a) {
			var b = this,
				c = "function" == typeof b.animation.staggerSequence ? b.animation.staggerSequence.call(b._domNode, a, b._state) : a,
				d = b.animation.stagger ? c * b.animation.staggerDuration : 0;
			return b._execFilter("_getDelay", d, arguments)
		},
		_parseMultiMixArgs: function(a) {
			for(var b = this, c = {
					command: null,
					animate: b.animation.enable,
					callback: null
				}, d = 0; d < a.length; d++) {
				var e = a[d];
				null !== e && ("object" == typeof e || "string" == typeof e ? c.command = e : "boolean" == typeof e ? c.animate = e : "function" == typeof e && (c.callback = e))
			}
			return b._execFilter("_parseMultiMixArgs", c, arguments)
		},
		_parseInsertArgs: function(b) {
			for(var c = this, d = {
					index: 0,
					$object: a(),
					multiMix: {
						filter: c._state.activeFilter
					},
					callback: null
				}, e = 0; e < b.length; e++) {
				var f = b[e];
				"number" == typeof f ? d.index = f : "object" == typeof f && f instanceof a ? d.$object = f : "object" == typeof f && c._helpers._isElement(f) ? d.$object = a(f) : "object" == typeof f && null !== f ? d.multiMix = f : "boolean" != typeof f || f ? "function" == typeof f && (d.callback = f) : d.multiMix = !1
			}
			return c._execFilter("_parseInsertArgs", d, arguments)
		},
		_execAction: function(a, b, c) {
			var d = this,
				e = b ? "post" : "pre";
			if(!d._actions.isEmptyObject && d._actions.hasOwnProperty(a))
				for(var f in d._actions[a][e]) d._actions[a][e][f].call(d, c)
		},
		_execFilter: function(a, b, c) {
			var d = this;
			if(d._filters.isEmptyObject || !d._filters.hasOwnProperty(a)) return b;
			for(var e in d._filters[a]) return d._filters[a][e].call(d, c)
		},
		_helpers: {
			_camelCase: function(a) {
				return a.replace(/-([a-z])/g, function(a) {
					return a[1].toUpperCase()
				})
			},
			_isElement: function(a) {
				return window.HTMLElement ? a instanceof HTMLElement : null !== a && 1 === a.nodeType && "string" === a.nodeName
			}
		},
		isMixing: function() {
			var a = this;
			return a._execFilter("isMixing", a._mixing)
		},
		filter: function() {
			var a = this,
				b = a._parseMultiMixArgs(arguments);
			a._clicking && (a._toggleString = ""), a.multiMix({
				filter: b.command
			}, b.animate, b.callback)
		},
		sort: function() {
			var a = this,
				b = a._parseMultiMixArgs(arguments);
			a.multiMix({
				sort: b.command
			}, b.animate, b.callback)
		},
		changeLayout: function() {
			var a = this,
				b = a._parseMultiMixArgs(arguments);
			a.multiMix({
				changeLayout: b.command
			}, b.animate, b.callback)
		},
		multiMix: function() {
			var a = this,
				c = a._parseMultiMixArgs(arguments);
			if(a._execAction("multiMix", 0, arguments), a._mixing) a.animation.queue && a._queue.length < a.animation.queueLimit ? (a._queue.push(arguments), a.controls.enable && !a._clicking && a._updateControls(c.command), a._execAction("multiMixQueue", 1, arguments)) : ("function" == typeof a.callbacks.onMixBusy && a.callbacks.onMixBusy.call(a._domNode, a._state, a), a._$container.trigger("mixBusy", [a._state, a]), a._execAction("multiMixBusy", 1, arguments));
			else {
				a.controls.enable && !a._clicking && (a.controls.toggleFilterButtons && a._buildToggleArray(), a._updateControls(c.command, a.controls.toggleFilterButtons)), a._queue.length < 2 && (a._clicking = !1), delete a.callbacks._user, c.callback && (a.callbacks._user = c.callback);
				var d = c.command.sort,
					e = c.command.filter,
					f = c.command.changeLayout;
				a._refresh(), d && (a._newSort = a._parseSort(d), a._newSortString = d, a._sorting = !0, a._sort()), e !== b && (e = "all" === e ? a.selectors.target : e, a._activeFilter = e), a._filter(), f && (a._newDisplay = "string" == typeof f ? f : f.display || a.layout.display, a._newClass = f.containerClass || "", (a._newDisplay !== a.layout.display || a._newClass !== a.layout.containerClass) && (a._changingLayout = !0, a._changingClass = a._newClass !== a.layout.containerClass, a._changingDisplay = a._newDisplay !== a.layout.display)), a._$targets.css(a._brake), a._goMix(c.animate ^ a.animation.enable ? c.animate : a.animation.enable), a._execAction("multiMix", 1, arguments)
			}
		},
		insert: function() {
			var a = this,
				b = a._parseInsertArgs(arguments),
				c = "function" == typeof b.callback ? b.callback : null,
				d = document.createDocumentFragment(),
				e = function() {
					return a._refresh(), a._$targets.length ? b.index < a._$targets.length || !a._$targets.length ? a._$targets[b.index] : a._$targets[a._$targets.length - 1].nextElementSibling : a._$parent[0].children[0]
				}();
			if(a._execAction("insert", 0, arguments), b.$object) {
				for(var f = 0; f < b.$object.length; f++) {
					var g = b.$object[f];
					d.appendChild(g), d.appendChild(document.createTextNode(" "))
				}
				a._$parent[0].insertBefore(d, e)
			}
			a._execAction("insert", 1, arguments), "object" == typeof b.multiMix && a.multiMix(b.multiMix, c)
		},
		prepend: function() {
			var a = this,
				b = a._parseInsertArgs(arguments);
			a.insert(0, b.$object, b.multiMix, b.callback)
		},
		append: function() {
			var a = this,
				b = a._parseInsertArgs(arguments);
			a.insert(a._state.totalTargets, b.$object, b.multiMix, b.callback)
		},
		getOption: function(a) {
			var c = this,
				d = function(a, c) {
					for(var d = c.split("."), e = d.pop(), f = d.length, g = 1, h = d[0] || c;
						(a = a[h]) && f > g;) h = d[g], g++;
					return a !== b ? a[e] !== b ? a[e] : a : void 0
				};
			return a ? c._execFilter("getOption", d(c, a), arguments) : c
		},
		setOptions: function(b) {
			var c = this;
			c._execAction("setOptions", 0, arguments), "object" == typeof b && a.extend(!0, c, b), c._execAction("setOptions", 1, arguments)
		},
		getState: function() {
			var a = this;
			return a._execFilter("getState", a._state, a)
		},
		forceRefresh: function() {
			var a = this;
			a._refresh(!1, !0)
		},
		destroy: function(b) {
			var c = this,
				d = a.MixItUp.prototype._bound._filter,
				e = a.MixItUp.prototype._bound._sort;
			c._execAction("destroy", 0, arguments), c._$body.add(a(c.selectors.sort)).add(a(c.selectors.filter)).off(".mixItUp");
			for(var f = 0; f < c._$targets.length; f++) {
				var g = c._$targets[f];
				b && (g.style.display = ""), delete g.mixParent
			}
			c._execAction("destroy", 1, arguments), d[c.selectors.filter] && d[c.selectors.filter] > 1 ? d[c.selectors.filter]-- : 1 === d[c.selectors.filter] && delete d[c.selectors.filter], e[c.selectors.sort] && e[c.selectors.sort] > 1 ? e[c.selectors.sort]-- : 1 === e[c.selectors.sort] && delete e[c.selectors.sort], delete a.MixItUp.prototype._instances[c._id]
		}
	}, a.fn.mixItUp = function() {
		var c, d = arguments,
			e = [],
			f = function(b, c) {
				var d = new a.MixItUp,
					e = function() {
						return("00000" + (16777216 * Math.random() << 0).toString(16)).substr(-6).toUpperCase()
					};
				d._execAction("_instantiate", 0, arguments), b.id = b.id ? b.id : "MixItUp" + e(), d._instances[b.id] || (d._instances[b.id] = d, d._init(b, c)), d._execAction("_instantiate", 1, arguments)
			};
		return c = this.each(function() {
			if(d && "string" == typeof d[0]) {
				var c = a.MixItUp.prototype._instances[this.id];
				if("isLoaded" === d[0]) e.push(c ? !0 : !1);
				else {
					var g = c[d[0]](d[1], d[2], d[3]);
					g !== b && e.push(g)
				}
			} else f(this, d[0])
		}), e.length ? e.length > 1 ? e : e[0] : c
	}, a.fn.removeStyle = function(c, d) {
		return d = d ? d : "", this.each(function() {
			for(var e = this, f = c.split(" "), g = 0; g < f.length; g++)
				for(var h = 0; 4 > h; h++) {
					switch(h) {
						case 0:
							var i = f[g];
							break;
						case 1:
							var i = a.MixItUp.prototype._helpers._camelCase(i);
							break;
						case 2:
							var i = d + f[g];
							break;
						case 3:
							var i = a.MixItUp.prototype._helpers._camelCase(d + f[g])
					}
					if(e.style[i] !== b && "unknown" != typeof e.style[i] && e.style[i].length > 0 && (e.style[i] = ""), !d && 1 === h) break
				}
			e.attributes && e.attributes.style && e.attributes.style !== b && "" === e.attributes.style.value && e.attributes.removeNamedItem("style")
		})
	}
}(jQuery);;
/*!  https://github.com/PitPik/colorPicker
colorPicker - v1.0.0 2015-01-31 
*/

! function(a, b) {
	"use strict";

	function c(a, c, d, f, g) {
		if("string" == typeof c) {
			var c = u.txt2color(c);
			d = c.type, n[d] = c[d], g = g !== b ? g : c.alpha
		} else if(c)
			for(var h in c) a[d][h] = k(c[h] / l[d][h][1], 0, 1);
		return g !== b && (a.alpha = +g), e(d, f ? a : b)
	}

	function d(a, b, c) {
		var d = m.options.grey,
			e = {};
		return e.RGB = {
			r: a.r,
			g: a.g,
			b: a.b
		}, e.rgb = {
			r: b.r,
			g: b.g,
			b: b.b
		}, e.alpha = c, e.equivalentGrey = Math.round(d.r * a.r + d.g * a.g + d.b * a.b), e.rgbaMixBlack = i(b, {
			r: 0,
			g: 0,
			b: 0
		}, c, 1), e.rgbaMixWhite = i(b, {
			r: 1,
			g: 1,
			b: 1
		}, c, 1), e.rgbaMixBlack.luminance = h(e.rgbaMixBlack, !0), e.rgbaMixWhite.luminance = h(e.rgbaMixWhite, !0), m.options.customBG && (e.rgbaMixCustom = i(b, m.options.customBG, c, 1), e.rgbaMixCustom.luminance = h(e.rgbaMixCustom, !0), m.options.customBG.luminance = h(m.options.customBG, !0)), e
	}

	function e(a, b) {
		var c, e, k, o = b || n,
			p = u,
			q = m.options,
			r = l,
			s = o.RND,
			t = "",
			v = "",
			w = {
				hsl: "hsv",
				cmyk: "cmy",
				rgb: a
			},
			x = s.rgb;
		if("alpha" !== a) {
			for(var y in r)
				if(!r[y][y]) {
					a !== y && "XYZ" !== y && (v = w[y] || "rgb", o[y] = p[v + "2" + y](o[v])), s[y] || (s[y] = {}), c = o[y];
					for(t in c) s[y][t] = Math.round(c[t] * ("Lab" === y ? 1 : r[y][t][1]))
				}
			"Lab" !== a && delete o._rgb, x = s.rgb, o.HEX = p.RGB2HEX(x), o.equivalentGrey = q.grey.r * o.rgb.r + q.grey.g * o.rgb.g + q.grey.b * o.rgb.b, o.webSave = e = f(x, 51), o.webSmart = k = f(x, 17), o.saveColor = x.r === e.r && x.g === e.g && x.b === e.b ? "web save" : x.r === k.r && x.g === k.g && x.b === k.b ? "web smart" : "", o.hueRGB = u.hue2RGB(o.hsv.h), b && (o.background = d(x, o.rgb, o.alpha))
		}
		var z, A, B, C, D, E, F, G = o.rgb,
			H = o.alpha,
			I = "luminance",
			J = o.background;
		return z = i(G, {
			r: 0,
			g: 0,
			b: 0
		}, H, 1), z[I] = h(z, !0), o.rgbaMixBlack = z, A = i(G, {
			r: 1,
			g: 1,
			b: 1
		}, H, 1), A[I] = h(A, !0), o.rgbaMixWhite = A, q.allMixDetails && (z.WCAG2Ratio = j(z[I], 0), A.WCAG2Ratio = j(A[I], 1), q.customBG && (B = i(G, q.customBG, H, 1), B[I] = h(B, !0), B.WCAG2Ratio = j(B[I], q.customBG[I]), o.rgbaMixCustom = B), C = i(G, J.rgb, H, J.alpha), C[I] = h(C, !0), o.rgbaMixBG = C, D = i(G, J.rgbaMixBlack, H, 1), D[I] = h(D, !0), D.WCAG2Ratio = j(D[I], J.rgbaMixBlack[I]), D.luminanceDelta = Math.abs(D[I] - J.rgbaMixBlack[I]), D.hueDelta = g(J.rgbaMixBlack, D, !0), o.rgbaMixBGMixBlack = D, E = i(G, J.rgbaMixWhite, H, 1), E[I] = h(E, !0), E.WCAG2Ratio = j(E[I], J.rgbaMixWhite[I]), E.luminanceDelta = Math.abs(E[I] - J.rgbaMixWhite[I]), E.hueDelta = g(J.rgbaMixWhite, E, !0), o.rgbaMixBGMixWhite = E), q.customBG && (F = i(G, J.rgbaMixCustom, H, 1), F[I] = h(F, !0), F.WCAG2Ratio = j(F[I], J.rgbaMixCustom[I]), o.rgbaMixBGMixCustom = F, F.luminanceDelta = Math.abs(F[I] - J.rgbaMixCustom[I]), F.hueDelta = g(J.rgbaMixCustom, F, !0)), o.RGBLuminance = h(x), o.HUELuminance = h(o.hueRGB), q.convertCallback && q.convertCallback(o, a), o
	}

	function f(a, b) {
		var c = {},
			d = 0,
			e = b / 2;
		for(var f in a) d = a[f] % b, c[f] = a[f] + (d > e ? b - d : -d);
		return c
	}

	function g(a, b, c) {
		return(Math.max(a.r - b.r, b.r - a.r) + Math.max(a.g - b.g, b.g - a.g) + Math.max(a.b - b.b, b.b - a.b)) * (c ? 255 : 1) / 765
	}

	function h(a, b) {
		for(var c = b ? 1 : 255, d = [a.r / c, a.g / c, a.b / c], e = m.options.luminance, f = d.length; f--;) d[f] = d[f] <= .03928 ? d[f] / 12.92 : Math.pow((d[f] + .055) / 1.055, 2.4);
		return e.r * d[0] + e.g * d[1] + e.b * d[2]
	}

	function i(a, c, d, e) {
		var f = {},
			g = d !== b ? d : 1,
			h = e !== b ? e : 1,
			i = g + h * (1 - g);
		for(var j in a) f[j] = (a[j] * g + c[j] * h * (1 - g)) / i;
		return f.a = i, f
	}

	function j(a, b) {
		var c = 1;
		return c = a >= b ? (a + .05) / (b + .05) : (b + .05) / (a + .05), Math.round(100 * c) / 100
	}

	function k(a, b, c) {
		return a > c ? c : b > a ? b : a
	}
	var l = {
			rgb: {
				r: [0, 255],
				g: [0, 255],
				b: [0, 255]
			},
			hsv: {
				h: [0, 360],
				s: [0, 100],
				v: [0, 100]
			},
			hsl: {
				h: [0, 360],
				s: [0, 100],
				l: [0, 100]
			},
			cmy: {
				c: [0, 100],
				m: [0, 100],
				y: [0, 100]
			},
			cmyk: {
				c: [0, 100],
				m: [0, 100],
				y: [0, 100],
				k: [0, 100]
			},
			Lab: {
				L: [0, 100],
				a: [-128, 127],
				b: [-128, 127]
			},
			XYZ: {
				X: [0, 100],
				Y: [0, 100],
				Z: [0, 100]
			},
			alpha: {
				alpha: [0, 1]
			},
			HEX: {
				HEX: [0, 16777215]
			}
		},
		m = {},
		n = {},
		o = {
			X: [.4124564, .3575761, .1804375],
			Y: [.2126729, .7151522, .072175],
			Z: [.0193339, .119192, .9503041],
			R: [3.2404542, -1.5371385, -.4985314],
			G: [-.969266, 1.8760108, .041556],
			B: [.0556434, -.2040259, 1.0572252]
		},
		p = {
			r: .298954,
			g: .586434,
			b: .114612
		},
		q = {
			r: .2126,
			g: .7152,
			b: .0722
		},
		r = a.Colors = function(a) {
			this.colors = {
				RND: {}
			}, this.options = {
				color: "rgba(204, 82, 37, 0.8)",
				XYZMatrix: o,
				grey: p,
				luminance: q,
				valueRanges: l
			}, s(this, a || {})
		},
		s = function(a, d) {
			var e, f, g = a.options;
			t(a);
			for(var h in d) d[h] !== b && (g[h] = d[h]);
			e = g.XYZMatrix, d.XYZReference || (g.XYZReference = {
				X: e.X[0] + e.X[1] + e.X[2],
				Y: e.Y[0] + e.Y[1] + e.Y[2],
				Z: e.Z[0] + e.Z[1] + e.Z[2]
			}), f = g.customBG, g.customBG = "string" == typeof f ? u.txt2color(f).rgb : f, n = c(a.colors, g.color, b, !0)
		},
		t = function(a) {
			m !== a && (m = a, n = a.colors)
		};
	r.prototype.setColor = function(a, d, f) {
		return t(this), a ? c(this.colors, a, d, b, f) : (f !== b && (this.colors.alpha = f), e(d))
	}, r.prototype.getColor = function(a) {
		var c = this.colors,
			d = 0;
		if(a) {
			for(a = a.split("."); c[a[d]];) c = c[a[d++]];
			a.length !== d && (c = b)
		}
		return c
	}, r.prototype.setCustomBackground = function(a) {
		return t(this), this.options.customBG = "string" == typeof a ? u.txt2color(a).rgb : a, c(this.colors, b, "rgb")
	}, r.prototype.saveAsBackground = function() {
		return t(this), c(this.colors, b, "rgb", !0)
	}, r.prototype.convertColor = function(a, b) {
		var c = u,
			d = l,
			e = b.split("2"),
			f = e[0],
			g = e[1],
			h = /(?:RG|HS|CM|LA)/,
			i = h.test(f),
			j = h.test(g),
			k = {
				LAB: "Lab"
			},
			m = function(a, b, c) {
				var e = {},
					f = "Lab" === b ? 1 : 0;
				for(var g in a) e[g] = c ? Math.round(a[g] * (f || d[b][g][1])) : a[g] / (f || d[b][g][1]);
				return e
			};
		return f = d[f] ? f : k[f] || f.toLowerCase(), g = d[g] ? g : k[g] || g.toLowerCase(), i && "RGB2HEX" !== b && (a = m(a, f)), a = f === g ? a : c[f + "2" + g] ? c[f + "2" + g](a, !0) : "HEX" === g ? c.RGB2HEX("RGB2HEX" === b ? a : m("rgb" === f ? a : c[f + "2rgb"](a, !0), "rgb", !0)) : c["rgb2" + g](c[f + "2rgb"](a, !0), !0), j && (a = m(a, g, !0)), a
	};
	var u = {
		txt2color: function(a) {
			var b = {},
				c = a.replace(/(?:#|\)|%)/g, "").split("("),
				d = (c[1] || "").split(/,\s*/),
				e = c[1] ? c[0].substr(0, 3) : "rgb",
				f = "";
			if(b.type = e, b[e] = {}, c[1])
				for(var g = 3; g--;) f = e[g] || e.charAt(g), b[e][f] = +d[g] / l[e][f][1];
			else b.rgb = u.HEX2rgb(c[0]);
			return b.alpha = d[3] ? +d[3] : 1, b
		},
		RGB2HEX: function(a) {
			return((a.r < 16 ? "0" : "") + a.r.toString(16) + (a.g < 16 ? "0" : "") + a.g.toString(16) + (a.b < 16 ? "0" : "") + a.b.toString(16)).toUpperCase()
		},
		HEX2rgb: function(a) {
			return a = a.split(""), {
				r: parseInt(a[0] + a[a[3] ? 1 : 0], 16) / 255,
				g: parseInt(a[a[3] ? 2 : 1] + (a[3] || a[1]), 16) / 255,
				b: parseInt((a[4] || a[2]) + (a[5] || a[2]), 16) / 255
			}
		},
		hue2RGB: function(a) {
			var b = 6 * a,
				c = ~~b % 6,
				d = 6 === b ? 0 : b - c;
			return {
				r: Math.round(255 * [1, 1 - d, 0, 0, d, 1][c]),
				g: Math.round(255 * [d, 1, 1, 1 - d, 0, 0][c]),
				b: Math.round(255 * [0, 0, d, 1, 1, 1 - d][c])
			}
		},
		rgb2hsv: function(a) {
			var b, c, d, e = a.r,
				f = a.g,
				g = a.b,
				h = 0;
			return g > f && (f = g + (g = f, 0), h = -1), c = g, f > e && (e = f + (f = e, 0), h = -2 / 6 - h, c = Math.min(f, g)), b = e - c, d = e ? b / e : 0, {
				h: 1e-15 > d ? n && n.hsl && n.hsl.h || 0 : b ? Math.abs(h + (f - g) / (6 * b)) : 0,
				s: e ? b / e : n && n.hsv && n.hsv.s || 0,
				v: e
			}
		},
		hsv2rgb: function(a) {
			var b = 6 * a.h,
				c = a.s,
				d = a.v,
				e = ~~b,
				f = b - e,
				g = d * (1 - c),
				h = d * (1 - f * c),
				i = d * (1 - (1 - f) * c),
				j = e % 6;
			return {
				r: [d, h, g, g, i, d][j],
				g: [i, d, d, h, g, g][j],
				b: [g, g, i, d, d, h][j]
			}
		},
		hsv2hsl: function(a) {
			var b = (2 - a.s) * a.v,
				c = a.s * a.v;
			return c = a.s ? 1 > b ? b ? c / b : 0 : c / (2 - b) : 0, {
				h: a.h,
				s: a.v || c ? c : n && n.hsl && n.hsl.s || 0,
				l: b / 2
			}
		},
		rgb2hsl: function(a, b) {
			var c = u.rgb2hsv(a);
			return u.hsv2hsl(b ? c : n.hsv = c)
		},
		hsl2rgb: function(a) {
			var b = 6 * a.h,
				c = a.s,
				d = a.l,
				e = .5 > d ? d * (1 + c) : d + c - c * d,
				f = d + d - e,
				g = e ? (e - f) / e : 0,
				h = ~~b,
				i = b - h,
				j = e * g * i,
				k = f + j,
				l = e - j,
				m = h % 6;
			return {
				r: [e, l, f, f, k, e][m],
				g: [k, e, e, l, f, f][m],
				b: [f, f, k, e, e, l][m]
			}
		},
		rgb2cmy: function(a) {
			return {
				c: 1 - a.r,
				m: 1 - a.g,
				y: 1 - a.b
			}
		},
		cmy2cmyk: function(a) {
			var b = Math.min(Math.min(a.c, a.m), a.y),
				c = 1 - b || 1e-20;
			return {
				c: (a.c - b) / c,
				m: (a.m - b) / c,
				y: (a.y - b) / c,
				k: b
			}
		},
		cmyk2cmy: function(a) {
			var b = a.k;
			return {
				c: a.c * (1 - b) + b,
				m: a.m * (1 - b) + b,
				y: a.y * (1 - b) + b
			}
		},
		cmy2rgb: function(a) {
			return {
				r: 1 - a.c,
				g: 1 - a.m,
				b: 1 - a.y
			}
		},
		rgb2cmyk: function(a, b) {
			var c = u.rgb2cmy(a);
			return u.cmy2cmyk(b ? c : n.cmy = c)
		},
		cmyk2rgb: function(a, b) {
			var c = u.cmyk2cmy(a);
			return u.cmy2rgb(b ? c : n.cmy = c)
		},
		XYZ2rgb: function(a, b) {
			var c = m.options.XYZMatrix,
				d = a.X,
				e = a.Y,
				f = a.Z,
				g = d * c.R[0] + e * c.R[1] + f * c.R[2],
				h = d * c.G[0] + e * c.G[1] + f * c.G[2],
				i = d * c.B[0] + e * c.B[1] + f * c.B[2],
				j = 1 / 2.4;
			return c = .0031308, g = g > c ? 1.055 * Math.pow(g, j) - .055 : 12.92 * g, h = h > c ? 1.055 * Math.pow(h, j) - .055 : 12.92 * h, i = i > c ? 1.055 * Math.pow(i, j) - .055 : 12.92 * i, b || (n._rgb = {
				r: g,
				g: h,
				b: i
			}), {
				r: k(g, 0, 1),
				g: k(h, 0, 1),
				b: k(i, 0, 1)
			}
		},
		rgb2XYZ: function(a) {
			var b = m.options.XYZMatrix,
				c = a.r,
				d = a.g,
				e = a.b,
				f = .04045;
			return c = c > f ? Math.pow((c + .055) / 1.055, 2.4) : c / 12.92, d = d > f ? Math.pow((d + .055) / 1.055, 2.4) : d / 12.92, e = e > f ? Math.pow((e + .055) / 1.055, 2.4) : e / 12.92, {
				X: c * b.X[0] + d * b.X[1] + e * b.X[2],
				Y: c * b.Y[0] + d * b.Y[1] + e * b.Y[2],
				Z: c * b.Z[0] + d * b.Z[1] + e * b.Z[2]
			}
		},
		XYZ2Lab: function(a) {
			var b = m.options.XYZReference,
				c = a.X / b.X,
				d = a.Y / b.Y,
				e = a.Z / b.Z,
				f = 16 / 116,
				g = 1 / 3,
				h = .008856,
				i = 7.787037;
			return c = c > h ? Math.pow(c, g) : i * c + f, d = d > h ? Math.pow(d, g) : i * d + f, e = e > h ? Math.pow(e, g) : i * e + f, {
				L: 116 * d - 16,
				a: 500 * (c - d),
				b: 200 * (d - e)
			}
		},
		Lab2XYZ: function(a) {
			var b = m.options.XYZReference,
				c = (a.L + 16) / 116,
				d = a.a / 500 + c,
				e = c - a.b / 200,
				f = Math.pow(d, 3),
				g = Math.pow(c, 3),
				h = Math.pow(e, 3),
				i = 16 / 116,
				j = .008856,
				k = 7.787037;
			return {
				X: (f > j ? f : (d - i) / k) * b.X,
				Y: (g > j ? g : (c - i) / k) * b.Y,
				Z: (h > j ? h : (e - i) / k) * b.Z
			}
		},
		rgb2Lab: function(a, b) {
			var c = u.rgb2XYZ(a);
			return u.XYZ2Lab(b ? c : n.XYZ = c)
		},
		Lab2rgb: function(a, b) {
			var c = u.Lab2XYZ(a);
			return u.XYZ2rgb(b ? c : n.XYZ = c, b)
		}
	}
}(window),
function(a) {
	"use strict";
	var b = '^§app alpha-bg-w">^§slds">^§sldl-1">$^§sldl-2">$^§sldl-3">$^§curm">$^§sldr-1">$^§sldr-2">$^§sldr-4">$^§curl">$^§curr">$$^§opacity">|^§opacity-slider">$$$^§memo">^§raster">$^§raster-bg">$|$|$|$|$|$|$|$|$^§memo-store">$^§memo-cursor">$$^§panel">^§hsv">^hsl-mode §ß">$^hsv-h-ß §ß">H$^hsv-h-~ §~">-^§nsarrow">$$^hsl-h-@ §@">H$^hsv-s-ß §ß">S$^hsv-s-~ §~">-$^hsl-s-@ §@">S$^hsv-v-ß §ß">B$^hsv-v-~ §~">-$^hsl-l-@ §@">L$$^§hsl §hide">^hsv-mode §ß">$^hsl-h-ß §ß">H$^hsl-h-~ §~">-$^hsv-h-@ §@">H$^hsl-s-ß §ß">S$^hsl-s-~ §~">-$^hsv-s-@ §@">S$^hsl-l-ß §ß">L$^hsl-l-~ §~">-$^hsv-v-@ §@">B$$^§rgb">^rgb-r-ß §ß">R$^rgb-r-~ §~">-$^rgb-r-@ §ß">&nbsp;$^rgb-g-ß §ß">G$^rgb-g-~ §~">-$^rgb-g-@ §ß">&nbsp;$^rgb-b-ß §ß">B$^rgb-b-~ §~">-$^rgb-b-@ §ß">&nbsp;$$^§cmyk">^Lab-mode §ß">$^cmyk-c-ß §@">C$^cmyk-c-~ §~">-$^Lab-L-@ §@">L$^cmyk-m-ß §@">M$^cmyk-m-~ §~">-$^Lab-a-@ §@">a$^cmyk-y-ß §@">Y$^cmyk-y-~ §~">-$^Lab-b-@ §@">b$^cmyk-k-ß §@">K$^cmyk-k-~ §~">-$^Lab-x-@ §ß">&nbsp;$$^§Lab §hide">^cmyk-mode §ß">$^Lab-L-ß §@">L$^Lab-L-~ §~">-$^cmyk-c-@ §@">C$^Lab-a-ß §@">a$^Lab-a-~ §~">-$^cmyk-m-@ §@">M$^Lab-b-ß §@">b$^Lab-b-~ §~">-$^cmyk-y-@ §@">Y$^Lab-x-ß §@">&nbsp;$^Lab-x-~ §~">-$^cmyk-k-@ §@">K$$^§alpha">^alpha-ß §ß">A$^alpha-~ §~">-$^alpha-@ §ß">W$$^§HEX">^HEX-ß §ß">#$^HEX-~ §~">-$^HEX-@ §ß">M$$^§ctrl">^§raster">$^§cont">$^§cold">$^§col1">|&nbsp;$$^§col2">|&nbsp;$$^§bres">RESET$^§bsav">SAVE$$$^§exit">$^§resize">$^§resizer">|$$$'.replace(/\^/g, '<div class="').replace(/\$/g, "</div>").replace(/~/g, "disp").replace(/ß/g, "butt").replace(/@/g, "labl").replace(/\|/g, "<div>"),
		c = "är^1,äg^1,äb^1,öh^1,öh?1,öh?2,ös?1,öv?1,üh^1,üh?1,üh?2,üs?1,ül?1,.no-rgb-r är?2,.no-rgb-r är?3,.no-rgb-r är?4,.no-rgb-g äg?2,.no-rgb-g äg?3,.no-rgb-g äg?4,.no-rgb-b äb?2,.no-rgb-b äb?3,.no-rgb-b äb?4{visibility:hidden}är^2,är^3,äg^2,äg^3,äb^2,äb^3{@-image:url(_patches.png)}.§slds div{@-image:url(_vertical.png)}öh^2,ös^1,öv^1,üh^2,üs^1,ül^1{@-image:url(_horizontal.png)}ös?4,öv^3,üs?4,ül^3{@:#000}üs?3,ül^4{@:#fff}är?1{@-color:#f00}äg?1{@-color:#0f0}äb?1{@-color:#00f}är^2{@|-1664px 0}är^3{@|-896px 0}är?1,äg?1,äb?1,öh^3,ös^2,öv?2Ü-2432Öär?2Ü-2944Öär?3Ü-4480Öär?4Ü-3202Öäg^2Äöh^2{@|-640px 0}äg^3{@|-384px 0}äg?2Ü-4736Öäg?3Ü-3968Öäg?4Ü-3712Öäb^2{@|-1152px 0}äb^3{@|-1408px 0}äb?2Ü-3456Öäb?3Ü-4224Öäb?4Ü-2688Ööh^2Äär^3Ääb?4Ü0}öh?4,üh?4Ü-1664Öös^1,öv^1,üs^1,ül^1Ääg^3{@|-256px 0}ös^3,öv?4,üs^3,ül?4Ü-2176Öös?2,öv^2Ü-1920Öüh^2{@|-768px 0}üh^3,üs^2,ül?2Ü-5184Öüs?2,ül^2Ü-5824Ö.S är^2{@|-128px -128Ö.S är?1Ääg?1Ääb?1Äöh^3Äös^2Äöv?2Ü-1408Ö.S är?2Ääb^3Ü-128Ö.S är?3Ü-896Ö.S är?4Ü-256Ö.S äg^2{@|-256px -128Ö.S äg?2Ü-1024Ö.S äg?3Ü-640Ö.S äg?4Ü-512Ö.S äb^2{@|-128px 0}.S äb?2Ü-384Ö.S äb?3Ü-768Ö.S öh?4Äüh?4Ü-1536Ö.S ös^1Äöv^1Äüs^1Äül^1{@|-512px 0}.S ös^3Äöv?4Äüs^3Äül?4Ü-1280Ö.S ös?2Äöv^2Ü-1152Ö.S üh^2{@|-1024px 0}.S üh^3Äüs^2Äül?2Ü-5440Ö.S üs?2Äül^2Ü-5696Ö.XXS ös^2,.XXS öv?2Ü-5120Ö.XXS ös^3,.XXS öv?4,.XXS üs^3,.XXS ül^3,.XXS ül?4Ü-5056Ö.XXS ös?2,.XXS öv^2Ü-4992Ö.XXS üs^2,.XXS ül?2Ü-5568Ö.XXS üs?2,.XXS ül^2Ü-5632Ö".replace(/Ü/g, "{@|0 ").replace(/Ö/g, "px}").replace(/Ä/g, ",.S ").replace(/\|/g, "-position:").replace(/@/g, "background").replace(/ü/g, ".hsl-").replace(/ö/g, ".hsv-").replace(/ä/g, ".rgb-").replace(/~/g, " .no-rgb-}").replace(/\?/g, " .§sldr-").replace(/\^/g, " .§sldl-"),
		d = '∑{@#bbb;font-family:monospace, "Courier New", Courier, mono;font-size:12¥line-ä15¥font-weight:bold;cursor:default;~412¥ä323¥?top-left-radius:7¥?top-Ü-radius:7¥?bottom-Ü-radius:7¥?bottom-left-radius:7¥ö@#444}.S{~266¥ä177px}.XS{~158¥ä173px}.XXS{ä105¥~154px}.no-alpha{ä308px}.no-alpha .§opacity,.no-alpha .§alpha{display:none}.S.no-alpha{ä162px}.XS.no-alpha{ä158px}.XXS.no-alpha{ä90px}∑,∑ div{border:none;padding:0¥float:none;margin:0¥outline:none;box-sizing:content-box}∑ div{|absolute}^s .§curm,«§disp,«§nsarrow,∑ .§exit,∑ ø-cursor,∑ .§resize{öimage:url(_icons.png)}∑ .do-drag div{cursor:url(_blank.png), auto}∑ .§opacity,ø .§raster-bg,∑ .§raster{öimage:url(_bgs.png)}∑ ^s{~287¥ä256¥top:10¥left:10¥overflow:hidden;cursor:crosshair}.S ^s{~143¥ä128¥left:9¥top:9px}.XS ^s{left:7¥top:7px}.XXS ^s{left:5¥top:5px}^s div{~256¥ä256¥left:0px}.S ^l-1,.S ^l-2,.S ^l-3,.S ^l-4{~128¥ä128px}.XXS ^s,.XXS ^s ^l-1,.XXS ^s ^l-2,.XXS ^s ^l-3,.XXS ^s ^l-4{ä64px}^s ^r-1,^s ^r-2,^s ^r-3,^s ^r-4{~31¥left:256¥cursor:default}.S ^r-1,.S ^r-2,.S ^r-3,.S ^r-4{~15¥ä128¥left:128px}^s .§curm{margin:-5¥~11¥ä11¥ö|-36px -30px}.light .§curm{ö|-7px -30px}^s .§curl,^s .§curr{~0¥ä0¥margin:-3px -4¥border:4px solid;cursor:default;left:auto;öimage:none}^s .§curl,∑ ^s .§curl-dark,.hue-dark div.§curl{Ü:27¥?@† † † #fff}.light .§curl,∑ ^s .§curl-light,.hue-light .§curl{?@† † † #000}.S ^s .§curl,.S ^s .§curr{?~3px}.S ^s .§curl-light,.S ^s .§curl{Ü:13px}^s .§curr,∑ ^s .§curr-dark{Ü:4¥?@† #fff † †}.light .§curr,∑ ^s .§curr-light{?@† #000 † †}∑ .§opacity{bottom:44¥left:10¥ä10¥~287¥ö|0 -87px}.S .§opacity{bottom:27¥left:9¥~143¥ö|0 -100px}.XS .§opacity{left:7¥bottom:25px}.XXS .§opacity{left:5¥bottom:23px}.§opacity div{~100%;ä16¥margin-top:-3¥overflow:hidden}.§opacity .§opacity-slider{margin:0 -4¥~0¥ä8¥?~4¥?style:solid;?@#eee †}∑ ø{bottom:10¥left:10¥~288¥ä31¥ö@#fff}.S ø{ä15¥~144¥left:9¥bottom:9px}.XS ø{left:7¥bottom:7px}.XXS ø{left:5¥bottom:5px}ø div{|relative;float:left;~31¥ä31¥margin-Ü:1px}.S ø div{~15¥ä15px}∑ .§raster,ø .§raster-bg,.S ø .§raster,.S ø .§raster-bg{|absolute;top:0¥Ü:0¥bottom:0¥left:0¥~100%}.S ø .§raster-bg{ö|0 -31px}∑ .§raster{opacity:0.2;ö|0 -49px}.alpha-bg-b ø{ö@#333}.alpha-bg-b .§raster{opacity:1}ø ø-cursor{|absolute;Ü:0¥ö|-26px -87px}∑ .light ø-cursor{ö|3px -87px}.S ø-cursor{ö|-34px -95px}.S .light ø-cursor{ö|-5px -95px}∑ .§panel{|absolute;top:10¥Ü:10¥bottom:10¥~94¥?~1¥?style:solid;?@#222 #555 #555 #222;overflow:hidden;ö@#333}.S .§panel{top:9¥Ü:9¥bottom:9px}.XS .§panel{display:none}.§panel div{|relative}«§hsv,«§hsl,«§rgb,«§cmyk,«§Lab,«§alpha,.no-alpha «§HEX,«§HEX{~86¥margin:-1px 0px 1px 4¥padding:1px 0px 3¥?top-~1¥?top-style:solid;?top-@#444;?bottom-~1¥?bottom-style:solid;?bottom-@#222;float:Ö«§hsv,«§hsl{padding-top:2px}.S .§hsv,.S .§hsl{padding-top:1px}«§HEX{?bottom-style:none;?top-~0¥margin-top:-4¥padding-top:0px}.no-alpha «§HEX{?bottom-style:none}«§alpha{?bottom-style:none}.S .rgb-r .§hsv,.S .rgb-g .§hsv,.S .rgb-b .§hsv,.S .rgb-r .§hsl,.S .rgb-g .§hsl,.S .rgb-b .§hsl,.S .hsv-h .§rgb,.S .hsv-s .§rgb,.S .hsv-v .§rgb,.S .hsl-h .§rgb,.S .hsl-s .§rgb,.S .hsl-l .§rgb,.S .§cmyk,.S .§Lab{display:none}«§butt,«§labl{float:left;~14¥ä14¥margin-top:2¥text-align:center;border:1px solid}«§butt{?@#555 #222 #222 #555}«§butt:active{ö@#444}«§labl{?@†}«Lab-mode,«cmyk-mode,«hsv-mode,«hsl-mode{|absolute;Ü:0¥top:1¥ä50px}«hsv-mode,«hsl-mode{top:2px}«cmyk-mode{ä68px}.hsl-h .hsl-h-labl,.hsl-s .hsl-s-labl,.hsl-l .hsl-l-labl,.hsv-h .hsv-h-labl,.hsv-s .hsv-s-labl,.hsv-v .hsv-v-labl{@#f90}«cmyk-mode,«hsv-mode,.rgb-r .rgb-r-butt,.rgb-g .rgb-g-butt,.rgb-b .rgb-b-butt,.hsv-h .hsv-h-butt,.hsv-s .hsv-s-butt,.hsv-v .hsv-v-butt,.hsl-h .hsl-h-butt,.hsl-s .hsl-s-butt,.hsl-l .hsl-l-butt,«rgb-r-labl,«rgb-g-labl,«rgb-b-labl,«alpha-butt,«HEX-butt,«Lab-x-labl{?@#222 #555 #555 #222;ö@#444}.no-rgb-r .rgb-r-labl,.no-rgb-g .rgb-g-labl,.no-rgb-b .rgb-b-labl,.mute-alpha .alpha-butt,.no-HEX .HEX-butt,.cmy-only .Lab-x-labl{?@#555 #222 #222 #555;ö@#333}.Lab-x-disp,.cmy-only .cmyk-k-disp,.cmy-only .cmyk-k-butt{visibility:hidden}«HEX-disp{öimage:none}«§disp{float:left;~48¥ä14¥margin:2px 2px 0¥cursor:text;text-align:left;text-indent:3¥?~1¥?style:solid;?@#222 #555 #555 #222}∑ .§nsarrow{|absolute;top:0¥left:-13¥~8¥ä16¥display:none;ö|-87px -23px}∑ .start-change .§nsarrow{display:block}∑ .do-change .§nsarrow{display:block;ö|-87px -36px}.do-change .§disp{cursor:default}«§hide{display:none}«§cont,«§cold{|absolute;top:-5¥left:0¥ä3¥border:1px solid #333}«§cold{z-index:1;ö@#c00}«§cont{margin-Ü:-1¥z-index:2}«contrast .§cont{z-index:1;ö@#ccc}«orange .§cold{ö@#f90}«green .§cold{ö@#4d0}«§ctrl{|absolute;bottom:0¥left:0¥~100%;ö@#fff}.alpha-bg-b .§ctrl,«§bres,«§bsav{ö@#333}«§col1,«§col2,«§bres,«§bsav{?~1¥?style:solid;?@#555 #222 #222 #555;float:left;~45¥line-ä28¥text-align:center;top:0px}.§panel div div{ä100%}.S .§ctrl div{line-ä25px}.S «§bres,.S «§bsav{line-ä26px}∑ .§exit,∑ .§resize{Ü:3¥top:3¥~15¥ä15¥ö|0 -52px}∑ .§resize{top:auto;bottom:3¥cursor:nwse-resize;ö|-15px -52px}.S .§exit{ö|1px -52px}.XS .§resize,.XS .§exit{~10¥ä10¥Ü:0¥öimage:none}.XS .§exit{top:0px}.XS .§resize{bottom:0px}∑ .§resizer,∑ .§resizer div{|absolute;border:1px solid #888;top:-1¥Ü:-1¥bottom:-1¥left:-1¥z-index:2;display:none;cursor:nwse-resize}∑ .§resizer div{border:1px dashed #333;opacity:0.3;display:block;ö@#bbb}'.replace(/Ü/g, "right").replace(/Ö/g, "left}").replace(/∑/g, ".§app").replace(/«/g, ".§panel .").replace(/¥/g, "px;").replace(/\|/g, "position:").replace(/@/g, "color:").replace(/ö/g, "background-").replace(/ä/g, "height:").replace(/ø/g, ".§memo").replace(/†/g, "transparent").replace(/\~/g, "width:").replace(/\?/g, "border-").replace(/\^/g, ".§sld"),
		e = "iVBORw0KGgoAAAANSUhEUgAABIAAAAABCAYAAACmC9U0AAABT0lEQVR4Xu2S3Y6CMBCFhyqIsjGBO1/B9/F5DC/pK3DHhVkUgc7Zqus2DVlGU/cnQZKTjznttNPJBABA149HyRf1iN//4mIBCg0jV4In+j9xJiuihly1V/Z9X88v//kNeDXVvyO/lK+IPR76B019+1Riab3H1zkmeqerKnL+Bzwxx6PAgZxaSQU8vB62T28pxcQeRQ2sHw6GxCOWHvP78zwHAARBABOfdYtd30rwxXOEPDF+dj2+91r6vV/id3k+/brrXmaGUkqKhX3i+ffSt16HQ/dorTGZTHrs7ev7Tl7XdZhOpzc651nfsm1bRFF0YRiGaJoGs9nsQuN/xafTCXEco65rzOdzHI9HJEmCqqqwXC6x3++RZRnKssRqtUJRFFiv19jtdthutyAi5Hl+Jo9VZg7+7f3yXuvZf5c3KaXYzByb+WIzO5ymKW82G/0BNcFhO/tOuuMAAAAASUVORK5CYII=",
		f = "iVBORw0KGgoAAAANSUhEUgAAAAEAABfACAYAAABn2KvYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABHtJREFUeNrtnN9SqzAQxpOF1to6zuiVvoI+j6/gva/lA/kKeqUzjtX+QTi7SzSYBg49xdIzfL34+e1usoQQklCnmLwoCjImNwDQA2xRGMqNAYB+gPEH9IdCgIUA6Aem0P1fLoMQAPYNHYDoCKAv8OMHFgKgX2AjDPQDXn4t1l+gt/1fId//yWgE/hUJ+mAn8EyY5wCwXxhrbaHzn8E9iPlv79DdHxXTqciZ4KROnXRVZMF/6U2OPhcEavtAbZH1SM7wRDD7VoHZItCiyEQf4t6+MW9UOxaZybmdCGKqNrB9Eb5SfMg3wTyiagMtigTmWofiSDCOYNTSNz6sLDIoaCU9GWDd0tdhoMMsRm+r8U/EfB0GfjmLXiqzimDd0tdhoLMsI7la45+I+ToM/HIW0kfGVQTrlr7tA91kaUr//fxrKo8jUFB7VAn6AKpHJf+EKwAAAIYD/f7F7/8MVgMo7P+gBqDKr57Lf72V8x8AAMDgYIuvH4EAAAAMDQX6AACAQcI9GGMjDADA4MA/P2KlP8IEAAAYFCz6AACAgaLA8y8AAIN+CMYXoQAADA7u/UPYCAMAMDjI7z9S+SdwDFQX2C9Gh9GMEOWriz8/Pw1lWQZsi/L3R4czzP678Ve+P8f9nCv/C7hwLq99ah8NfKrU15zPB5pVcwtiJt9qGy0IfEE+jQa+Fn0VtI/fkxUPqBlEfRENeF+tqUpbGpi1iu8epwJzvV5XA4GpWC6XGz7F+/u766EgwJ+ckiTJKU3TnI6OjnI6OzvLZf6zMggt3dzckPhIoiTlSGpQ+eEsVegdz0fbCCi4fRs+Po+4yWdeDXiT+6pBSTeHple1pkz3FZ+avpyavoiPxgLN0B7yprY08PlyQTTm0+PWmkH7ynedNKraar4F/lRj1WpTtYh+ozL/cY2sAvZl0gcbZm0gSLBLvkxGoaogiy/HDXemQk2t5pUm8OAhH8/HH6e0mkJ9q9XKKQXfb07xfZnJbZrRxcVFVt6/t7e3Kc1ms5RGo1Eq5VIZuyl9fHw4k/M5xYeoKj64A7eqCt1ZeqWFVSl8NV9OTV3fmvP5qE9VmzSoEcsXpArK1UHen/hZbgL53BZSdyEXalGau/hU8TEW0u3VcoFPy3EDFrTgT+njydeZ0+l0UV7fu7u7iVzziQQmUm4iqRw4n/NxMxw4s/Mp1NSALxf4NEtQ10cjMDwSl+b+/j6hp6enVGb+jUvrn05iKobm6PboOt8vPISY5Pr6OqGXlxe3fOokoGtAbMUJZmqvYmaLQDP+sdrecOjtO/SXeH69P8Imutm5urqy9PDwYOny8tLS4+OjpfPzc0vPz8+WTk9PLb2+vlpZbCzN53NLx8fHVtYZS5PJxMoEZWWqsjKULY3HYytTi1Pex5OMldXKRVXxuLcy/20onmms3BBOxcr5qCrZtsrd45SPel8sGlOxGoGy0neynQ6VL9fsa1YtWlCrtj9G83G7PjdVush5n5q1iJWLZW6u21a1bUvbVnVzlru0pe3RdmlV1/23fZtbZv4Dx+7FBypx77kAAAAASUVORK5CYII=",
		g = "iVBORw0KGgo^NSUhEUgAAB4^EACAI#DdoPxz#L0UlEQVR4Xu3cQWrDQBREwR7FF8/BPR3wXktnQL+KvxfypuEhvLJXcp06d/bXd71OPt+trIw95zr33Z1bk1/fudEv79wa++7OfayZ59wrO2PBzklcGQmAZggAAOBYgAYBmpWRAGg^BGgRofAENgAAN#I0CBA6w8AG^ECABgEa/QH§AI0CNDoDwAY^QIAGAVp/AM§AjQI0OgPAAY^QoEGARn8Aw§CNAjQ+gMABg#BCgQYCmGQmABgAAEKBBgEZ/AM§AjQI0PoDAAY^QoEGARn8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCgaUYCoAE#RoEKDRHwAw^gAANArT+AIAB^BGgQoNEfAAw^gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBg§EaBGj0BwAM^IECDAK0/AG§ARoEaJqRAGg^BGgRo9AcAD^CBAgwCtPwBg§EaBGj0BwAD^CNAgQKM/AG§ARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGAZpmJACaBw^RoEKD1BwAM^IECDAK0/AG§ARoEaPQHAAw^gQIMArT8AY§BGgRo/QEAAw^jQIECjPwBg§EaBGj9AQAD^CNAgQOsPABg#BAgAYBGv0BAANwCwAAGB6gYeckmpEAa^AEaBGj0BwAM^IECDAK0/AG§ARoEaPQHAAM^I0CBAoz8AY§BGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9Ac§AjQI0OgPABg#BAgAYBWn8Aw§CNAjQ6A8ABg#BCgQYBGfwD§AI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8Aw§CNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AG§ARoEaPQHAAw^gQIMArT8AY§BGgRomsMAM^IAADQK0/gCAAQ^RoEKDRHwAw^gAANO7fQHwAw^gAANArT+AIAB^BGgQoNEfAGg^BGgRo9AcAD^CBAgwCtPwBg§EaBGj0BwAD^RIB+Ntg5iea5AD^DAIwI0CND6AwAG^EKBBgEZ/AKAB#EaBCg0R8AM^IAADQK0/gCAAQ^RoEKDRHwAM^IECDAI3+AIAB^BGgQoPUHAAw^gQIMAjf4AY§BGgRo9AcAD^CBAgwCtPwBg§EaBGiakQBo^ARoEaPQHAAw^gQIMArT8AY§BGgRo9AcAAw^jQIECjPwBg§EaBGj9AQAD^CNAgQKM/ABg#BAgAYBGv0BAAM^I0CBA6w8AG^ECABgGaZiQAGgAAQIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0Bw§CNAjQ6A8AG^ECABgFafwD§AI0CNDoDwAG^EKBBgEZ/AM§AjQI0PoDAAY^QoEGApjkMAAM^I0CBA6w8AG^ECABgEa/QEAAw^jQsIP+AIAB^BGgQoPUHAAw^gQIMAjf4AgAE#Bea/fK+3P5/3PJOvh8t1cO4nflmQAQoAEAAF9Aw/7JHfQHAAw^gQIMArT8AY§BGvwHNPoDAA0AACBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AG§ARoEaPQHAAw^gQIMArT8AY§BGgRo9AcAAw^jQIECjPwBg§EaBGj9AQAD^CNAgQNOMBEAD#I0CBAoz8AY§BGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBGv0Bw§CNAjQ6A8AG^ECABgFafwD§AI0CNA0IwHQ^AjQI0OgPABg#BAgAYBWn8Aw§CNAjQ6A8ABg#BCgQYBGfwD§AI0CND6AwAG^EKBBgEZ/AD^C#0CNPoDAAY^QoEGA1h8AM^IAADQI0DQAG^EKBBgEZ/AM§AjQI0PoDAAY^QoEGA1h8AM^IAADQI0+gMABg#BCgQYDWHwAw^gAANArT+AIAB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg9QcAD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAK0/AG§ARoEaPQHAAw^gQIMArT8AY§BGgRo/QEAAw^jQIECjPwBgACDhFgC#07t9AfAD^C#0CtP4AgAE^EaBCg0R8Aa^AEaBGj0BwAM^IECDAK0/AG§ARoEaPQHAAM^I0CBAoz8AY§BGgRo/QEAAw^jQIECjPwAY^QIAGARr9AQAD^CNAgQOsPABg#BAgAYBmmYkABoAAECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9Ac§AjQI0OgPABg#BAgAYBWn8Aw§CNAjQ6A8ABg#BCgQYBGfwD§AI0CND6AwAG^EKBBgKYZCYAG#QoEGARn8Aw§CNAjQ+gMABg#BCgQYBGfwAw^gAANAjT6AwAG^EKBBgNYfAD^C#0CNPoDgAE^EaBCg0R8AM^IAADQK0/gCAAQ^RoEKBpRgKgAQAABGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AG§ARoEaPQHAAw^gQIMArT8AY§BGgRommEAM^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAI3+AIAB^ARoEaPQHAAw^gQIMArT8AY§BGgRo9AcAGgAAQICGCNBfRfNcABg#BgeICGnVvoDwAY^QIAGAVp/AM§AjQI0OgPADQAAIAADQI0+gMABg#BCgQYDWHwAw^gAANAjT6A4AB^BGgQoNEfAD^C#0CtP4AgAE^EaBCg0R8AD^CBAgwCN/gCAAQ^RoEKD1BwAM^IECDAE0zEgAN#gQIMAjf4AgAE^EaBCg9QcAD^CBAgwCN/gBg§EaBGj0BwAM^IECDAK0/AG§ARoEaPQHAAM^I0CBAoz8AY§BGgRo/QEAAw^jQIEDTjARAAwAACNAgQKM/AG§ARoEaP0BAAM^I0CBAoz8AG^ECABgEa/QEAAw^jQIEDrDwAY^QIAGARr9Ac§AjQI0OgPABg#BAgAYBWn8Aw§CNAjQNIcBY§BGgRo/QEAAw^jQIECjPwBg§EadtAfAD^C#0CtP4AgAE^EaBCgAQABGgAA+AO2TAbHupOgH^ABJRU5ErkJggg==".replace(/§/g, "AAAAAA").replace(/\^/g, "AAAA").replace(/#/g, "AAA"),
		h = "iVBORw0KGgoAAAANSUhEUgAAAGEAAABDCAMAAAC7vJusAAAAkFBMVEUAAAAvLy9ERERubm7///8AAAD///9EREREREREREREREQAAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8AAAD///8cHBwkJCQnJycoKCgpKSkqKiouLi4vLy8/Pz9AQEBCQkJDQ0NdXV1ubm58fHykpKRERERVVVUzMzPx7Ab+AAAAHXRSTlMAAAAAAAQEBQ4QGR4eIyMtLUVFVVVqapKSnJy7u9JKTggAAAFUSURBVHja7dXbUoMwEAbgSICqLYeW88F6KIogqe//dpoYZ0W4AXbv8g9TwkxmvtndZMrEwlw/F8YIRjCCEYxgBCOsFmzqGMEI28J5zzmt0Pc9rdDL0NYgMxIYC5KiKpKAzZphWtZlGm4SjlnkOV6UHeeEUx77rh/npw1dCrI9k9lnwUwF+UG9D3m4ftJJxH4SJdPtaawXcbr+tBaeFrxiur309cIv19+4ytGCU0031a5euPVigLYGqjlAqM4ShOQ+QAYQUO80AMMAAkUGGfMfR9Ul+kmvPq2QGxXKOQBAKdjUgk0t2NiCGEVP+rHT3/iCUMBT90YrPMsKsIWP3x/VolaonJEETchHCS8AYAmaUICQQwaAQnjoXgHAES7jLkEFaHO4bdq/k25HAIpgWY34FwAE5xjCffM+D2DV8B0gRsAZT7hr5gE8wdrJcU+CJqhcqQD7Cx5L7Ph4WnrKAAAAAElFTkSuQmCC",
		i = "iVBORw0KGgoAAAANSUhEUgAAASAAAABvCAYAAABM+h2NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABORJREFUeNrs3VtTW1UYBuCEcxAI4YydWqTWdqr1V7T/2QsvvPDCCy9qjxZbamsrhZIQUHsCEtfafpmJe8qFjpUxfZ4Zuvt2feydJvAOARZUut1u5bRerl692nV913f99/f6QxWAU6KAAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIAAFBCggAAUEKCAABQQoIEABASggQAEBKCBAAQEoIEABASggQAEBKCBAAQEoIGBQC+jatWvd07zxrv9+Xx8fAQEoIEABASggQAEBKCBAAQEoIEABAQoIQAEBCghAAQEKCEABAQOk2u36kS6AAgLetwJKL29toFRM1be+QrVq3rx58//KvM8BAadGAQEKCFBAAAoIGHwnfhneZ+/Nmzf/LufzrI+AAE/BAAUEoIAABQTwztgLZt68eXvBAE/BABQQoIAAFBAweOwFM2/evL1ggKdgAAoIUEAACggYPPaCmTdv3l4wwFMwAAUEKCAABQQMHnvBzJs3by8Y4CkYgAICFBCAAgIGz4lfBQNQQMDgFlCtVisaaHV1tThubW1VInciD0U+ysdnz54N5+PKysphOnRTHsvHlN9EHo/1l5FrkV9Enoz8W87b29tTOS8vLx9EnoncjlyPvBe5EbkZeT4fU96NvBDr2znv7Ows57y0tLQVeSXy08gf5mNfPhPrjyOfrVarlcXFxZ9yfv78+bl8TPlh5LU8n/KDyOuxfj/y+VjfyHl3d/dCKv28fi/yp/m4sLDwQ+SLke9GvhT5Tinfjnw5f4/F/Pz8rZybzeZn+ZjyzVK+EfnzUr4S+Xopf9/L+fxzc3M5d1qt1hf531Mu5k/IxzGf85VYL+fefHH+RqNRrO/t7RW3L+UbkS9Hvhk5/386Kd/qW8/5duRLMV/OdyJfzNebnZ0t7t92u53v/07K9yJfiLwROT9+ef7HyOux/iDyWuSHkT+K+eLtZX9//2xer9frjyOfyY9/Wn8S86v59qT1p7Ge315zLt4RU16K19+O9YXIu5HnYn435hux3opcj9yOPB3z+5E/iPXf43y1yMX778HBQS3f3pTz+28l5bHIr2N+LN3+zszMzGHkoh/S+mHMF98XlNaP8zHd/0W/pMe943NAwKlSQIACAhQQgAICFBCAAgIUEIACAhQQgAIC/n9GqtXqYbfbHa38+RtSu32llPdqdNL6aOSj+LfxyMVekLTem39Ryr/mPDQ0NBznzXtROikPRW6W8k7k3m9rzXthOsPDw73bUuylGRkZ6cR63nvTSfko8oPIr+Pnz96P/DLW816ezujoaN6DdtyX9+P8eS9QZ2xs7Hxf7qa8Xlr/JO6Ljcjrcf6cj1P+OO+N6V1/fHz8XLz+/Tjfubh+sZcorZ+N9Ycxfybyo8ircf6fc56YmFiJ1/8l8mLk7cjzkfP92U15Ns63G+u9nPcKdWq12lQ8Xu3Ixd6f9Pd8P3UmJycnUszzL2N9LM7/anNzs9V7Q2q32395w/q7ubdH6L/KrVbrpPxlKX9Vyl+X8jel/G0pf5f/aDabvXy9tH6ztH63lDdKebOUH5Xyk1LeKuWd/ry2tlap9P125Onp6Zf9eWpq6lW3b8f6zMzM6/71er3+ppSP+u/XNN/pz41Go+sjIMBTMEABASggQAEBKCBAAQEoIEABASggQAEB/CN/CDAAw78uW9AVDw4AAAAASUVORK5CYII=",
		j = "iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQI12P4//8/MwAI/wMBbrqo4gAAAABJRU5ErkJggg==";
	a.ColorPicker = {
		_html: b,
		_cssFunc: c,
		_cssMain: d,
		_horizontalPng: e,
		_verticalPng: f,
		_patchesPng: g,
		_iconsPng: h,
		_bgsPng: i,
		_blankPng: j
	}
}(window),
function(a, b) {
	"use strict";

	function c(a, c) {
		var e, j = "",
			k = "";
		for(var l in c) a.options[l] = c[l];
		_ = new Colors(a.options), delete a.options, bb = _.options, bb.scale = 1, k = bb.CSSPrefix, a.color = _, S = bb.valueRanges, a.nodes = cb = g(f(a), a), q(bb.mode), d(a), u(), j = " " + bb.mode.type + "-" + bb.mode.z, cb.slds.className += j, cb.panel.className += j, bb.noHexButton && C(cb.HEX_butt, k + "butt", k + "labl"), bb.size !== b && p(b, bb.size), e = {
			alphaBG: cb.alpha_labl,
			cmyOnly: cb.HEX_labl
		};
		for(var m in e) bb[m] !== b && o({
			target: e[m],
			data: bb[m]
		});
		bb.noAlpha && (cb.colorPicker.className += " no-alpha"), a.renderMemory(bb.memoryColors), h(a), I = !0, i(b, "init"), N && (d(N), w())
	}

	function d(a) {
		Y = !0, M !== a && (M = a, ab = a.color.colors, bb = a.color.options, cb = a.nodes, _ = a.color, $ = {}, v(ab))
	}

	function e() {
		var a = ["L", "S", "XS", "XXS"];
		bb.sizes = {}, cb.testNode.style.cssText = "position:absolute;left:-1000px;top:-1000px;", document.body.appendChild(cb.testNode);
		for(var b = a.length; b--;) cb.testNode.className = bb.CSSPrefix + "app " + a[b], bb.sizes[a[b]] = [cb.testNode.offsetWidth, cb.testNode.offsetHeight];
		cb.testNode.removeNode ? cb.testNode.removeNode(!0) : document.body.removeChild(cb.testNode)
	}

	function f(a) {
		var b = document.createElement("div"),
			c = bb.CSSPrefix,
			d = "data:image/png;base64,",
			e = function(a, b) {
				var c = document.createElement("style");
				c.setAttribute("type", "text/css"), b && c.setAttribute("id", b), c.styleSheet || c.appendChild(document.createTextNode(a)), document.getElementsByTagName("head")[0].appendChild(c), c.styleSheet && (document.styleSheets[document.styleSheets.length - 1].cssText = a)
			},
			f = function(a) {
				O._cssFunc = O._cssFunc.replace(/§/g, c).replace("_patches.png", a ? d + O._patchesPng : bb.imagePath + "_patches.png").replace("_vertical.png", a ? d + O._verticalPng : bb.imagePath + "_vertical.png").replace("_horizontal.png", a ? d + O._horizontalPng : bb.imagePath + "_horizontal.png"), e(O._cssFunc, "colorPickerCSS"), bb.customCSS || (O._cssMain = O._cssMain.replace(/§/g, c).replace("_bgs.png", a ? d + O._bgsPng : bb.imagePath + "_bgs.png").replace("_icons.png", a ? d + O._iconsPng : bb.imagePath + "_icons.png").replace("_blank.png", Q ? bb.imagePath + "_blank.cur" : d + O._blankPng).replace(/opacity:(\d*\.*(\d+))/g, function(a, b) {
					return R ? "-moz-opacity: " + b + "; -khtml-opacity: " + b + "; opacity: " + b : '-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=' + Math.round(100 * +b) + ')";filter: alpha(opacity=' + Math.round(100 * +b) + ")"
				}), e(O._cssMain))
			},
			g = document.createElement("img");
		return P ? a.color.options.devPicker : (document.getElementById("colorPickerCSS") || (g.onload = g.onerror = function() {
			O._cssFunc && f(1 === this.width && 1 === this.height)
		}, g.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="), (N = M) && r(), b.insertAdjacentHTML("afterbegin", M ? M.nodes.colorPicker.outerHTML || (new XMLSerializer).serializeToString(M.nodes.colorPicker) : O._html.replace(/§/g, c)), b = b.children[0], b.style.cssText = bb.initStyle || "", (bb.appendTo || document.body).appendChild(b))
	}

	function g(a) {
		var b, c, d = a.getElementsByTagName("*"),
			e = {
				colorPicker: a
			},
			f = new RegExp(bb.CSSPrefix);
		e.styles = {}, e.textNodes = {}, e.memos = [], e.testNode = document.createElement("div");
		for(var g = 0, h = d.length; h > g; g++) b = d[g], (c = b.className) && f.test(c) ? (c = c.split(" ")[0].replace(bb.CSSPrefix, "").replace(/-/g, "_"), /_disp/.test(c) ? (c = c.replace("_disp", ""), e.styles[c] = b.style, e.textNodes[c] = b.firstChild, b.contentEditable = !0) : (/(?:hs|cmyk|Lab).*?(?:butt|labl)/.test(c) || (e[c] = b), /(?:cur|sld[^s]|opacity|cont|col)/.test(c) && (e.styles[c] = /(?:col\d)/.test(c) ? b.children[0].style : b.style))) : /memo/.test(b.parentNode.className) && e.memos.push(b);
		return e.panelCover = e.panel.appendChild(document.createElement("div")), e
	}

	function h(c, f) {
		var g = f ? G : F;
		g(cb.colorPicker, "mousedown", function(f) {
			var g = f || a.event,
				h = E(g),
				n = g.target || g.srcElement,
				o = n.className;
			return d(c), J = n, i(b, "resetEventListener"), U = "", n === cb.sldl_3 || n === cb.curm ? (J = cb.sldl_3, I = j, U = "changeXYValue", C(cb.slds, "do-drag")) : /sldr/.test(o) || n === cb.curl || n === cb.curr ? (J = cb.sldr_4, I = k, U = "changeZValue") : n === cb.opacity.children[0] || n === cb.opacity_slider ? (J = cb.opacity, I = l, U = "changeOpacityValue") : /-disp/.test(o) && !/HEX-/.test(o) ? (I = m, U = "changeInputValue", (3 === n.nextSibling.nodeType ? n.nextSibling.nextSibling : n.nextSibling).appendChild(cb.nsarrow), K = o.split("-disp")[0].split("-"), K = {
				type: K[0],
				z: K[1] || ""
			}, C(cb.panel, "start-change"), V = 0) : n !== cb.resize || bb.noResize ? I = b : (bb.sizes || e(), J = cb.resizer, I = p, U = "resizeApp"), I && (W = {
				pageX: h.X,
				pageY: h.Y
			}, J.style.display = "block", X = D(J), X.width = cb.opacity.offsetWidth, X.childWidth = cb.opacity_slider.offsetWidth, J.style.display = "", I(g), F(Q ? document.body : a, "mousemove", I), L = a[eb](w)), /-disp/.test(o) ? void 0 : B(g)
		}), g(cb.colorPicker, "click", function(a) {
			d(c), o(a)
		}), g(cb.colorPicker, "dblclick", o), g(cb.colorPicker, "keydown", function(a) {
			d(c), n(a)
		}), g(cb.colorPicker, "keypress", n), g(cb.colorPicker, "paste", function(a) {
			return a.target.firstChild.data = a.clipboardData.getData("Text"), B(a)
		})
	}

	function i(c, d) {
		var e = I;
		I && (a[fb](L), G(Q ? document.body : a, "mousemove", I), V && (K = {
			type: "alpha"
		}, w()), ("function" == typeof I || "number" == typeof I) && delete bb.webUnsave, V = 1, I = b, C(cb.slds, "do-drag", ""), C(cb.panel, "(?:start-change|do-change)", ""), cb.resizer.style.cssText = "", cb.panelCover.style.cssText = "", cb.memo_store.style.cssText = "background-color: " + y(ab.RND.rgb) + "; " + A(ab.alpha), cb.memo.className = cb.memo.className.replace(/\s+(?:dark|light)/, "") + (ab["rgbaMix" + T[bb.alphaBG]].luminance < .22 ? " dark" : " light"), K = b, s(), bb.actionCallback && bb.actionCallback(c, U || e.name || d || "external"))
	}

	function j(b) {
		var c = b || a.event,
			d = bb.scale,
			e = E(c),
			f = (e.X - X.left) * (4 === d ? 2 : d),
			g = (e.Y - X.top) * d,
			h = bb.mode;
		return ab[h.type][h.x] = z(f / 255, 0, 1), ab[h.type][h.y] = 1 - z(g / 255, 0, 1), t(), B(c)
	}

	function k(b) {
		var c = b || a.event,
			d = E(c),
			e = (d.Y - X.top) * bb.scale,
			f = bb.mode;
		return ab[f.type][f.z] = 1 - z(e / 255, 0, 1), t(), B(c)
	}

	function l(b) {
		var c = b || a.event,
			d = E(c);
		return Y = !0, ab.alpha = z(Math.round((d.X - X.left) / X.width * 100), 0, 100) / 100, t("alpha"), B(c)
	}

	function m(b) {
		var c, d = b || a.event,
			e = E(d),
			f = W.pageY - e.Y,
			g = bb.delayOffset,
			h = K.type,
			i = "alpha" === h;
		return V || Math.abs(f) >= g ? (V || (V = (f > 0 ? -g : g) + +J.firstChild.data * (i ? 100 : 1), W.pageY += V, f += V, V = 1, C(cb.panel, "start-change", "do-change"), cb.panelCover.style.cssText = "position:absolute;left:0;top:0;right:0;bottom:0", document.activeElement.blur(), L = a[eb](w)), "cmyk" === h && bb.cmyOnly && (h = "cmy"), i ? (Y = !0, ab.alpha = z(f / 100, 0, 1)) : (c = S[h][K.z], ab[h][K.z] = "Lab" === h ? z(f, c[0], c[1]) : z(f / c[1], 0, 1)), t(i ? "alpha" : h), B(d)) : void 0
	}

	function n(c) {
		var d, e = c || a.event,
			f = e.which || e.keyCode,
			g = String.fromCharCode(f),
			h = document.activeElement,
			j = h.className.replace(bb.CSSPrefix, "").split("-"),
			k = j[0],
			l = j[1],
			m = "alpha" === k,
			n = "HEX" === k,
			o = {
				k40: -1,
				k38: 1,
				k34: -10,
				k33: 10
			}["k" + f] / (m ? 100 : 1),
			p = {
				HEX: /[0-9a-fA-F]/,
				Lab: /[\-0-9]/,
				alpha: /[\.0-9]/
			}[k] || /[0-9]/,
			q = S[k][k] || S[k][l],
			r = h.firstChild,
			s = H(h),
			u = r.data,
			w = "0" !== u || n ? u.split("") : [];
		return /^(?:27|13)$/.test(f) ? (B(e), h.blur()) : "keydown" === e.type ? (o ? d = z(Math.round(1e6 * (+u + o)) / 1e6, q[0], q[1]) : /^(?:8|46)$/.test(f) && (s.range || (s.range++, s.start -= 8 === f ? 1 : 0), w.splice(s.start, s.range), d = w.join("") || "0"), d !== b && B(e, !0)) : "keypress" === e.type && (/^(?:37|39|8|46|9)$/.test(f) || B(e, !0), p.test(g) && (w.splice(s.start, s.range, g), d = w.join("")), s.start++), 13 === f && n ? r.data.length % 3 === 0 || "0" === r.data ? M.setColor("0" === r.data ? "000" : r.data, "rgb", ab.alpha, !0) : (B(e, !0), h.focus()) : (n && d !== b && (d = /^0+/.test(d) ? d : parseInt("" + d, 16) || 0), void(d !== b && "" !== d && +d >= q[0] && +d <= q[1] && (n && (d = d.toString(16).toUpperCase() || "0"), m ? ab[k] = +d : n || (ab[k][l] = +d / ("Lab" === k ? 1 : q[1])), t(m ? "alpha" : k), v(ab), I = !0, i(c, e.type), r.data = d, H(h, Math.min(h.firstChild.data.length, s.start < 0 ? 0 : s.start)))))
	}

	function o(c) {
		var d, e, f = c || a.event,
			g = f.target || f.srcElement,
			h = g.className,
			j = g.parentNode,
			k = bb,
			l = ab.RND.rgb,
			m = bb.mode,
			n = "",
			o = k.CSSPrefix,
			p = /(?:hs|rgb)/.test(j.className) && /^[HSBLRG]$/.test(g.firstChild ? g.firstChild.data : ""),
			q = /dblc/.test(f.type),
			r = "";
		if(!q || p) {
			if(-1 !== h.indexOf("-labl " + o + "labl")) C(cb[h.split("-")[0]], o + "hide", ""), C(cb[j.className.split("-")[1]], o + "hide");
			else if(-1 !== h.indexOf(o + "butt"))
				if(p) q && 2 === bb.scale && (n = /hs/.test(m.type) ? "rgb" : /hide/.test(cb.hsl.className) ? "hsv" : "hsl", n = n + "-" + n[m.type.indexOf(m.z)]), M.setMode(n ? n : h.replace("-butt", "").split(" ")[0]), r = "modeChange";
				else if(/^[rgb]/.test(h)) n = h.split("-")[1], C(cb.colorPicker, "no-rgb-" + n, (k["noRGB" + n] = !k["noRGB" + n]) ? b : ""), r = "noRGB" + n;
			else if(g === cb.alpha_labl) d = k.customBG, e = k.alphaBG, C(cb.colorPicker, "alpha-bg-" + e, "alpha-bg-" + (e = k.alphaBG = c.data || ("w" === e ? d ? "c" : "b" : "c" === e ? "b" : "w"))), g.firstChild.data = e.toUpperCase(), cb.ctrl.style.backgroundColor = cb.memo.style.backgroundColor = "c" !== e ? "" : "rgb(" + Math.round(255 * d.r) + ", " + Math.round(255 * d.g) + ", " + Math.round(255 * d.b) + ")", cb.raster.style.cssText = cb.raster_bg.previousSibling.style.cssText = "c" !== e ? "" : A(d.luminance < .22 ? .5 : .4), r = "alphaBackground";
			else if(g === cb.alpha_butt) C(cb.colorPicker, "mute-alpha", (k.muteAlpha = !k.muteAlpha) ? b : ""), r = "alphaState";
			else if(g === cb.HEX_butt) C(cb.colorPicker, "no-HEX", (k.HEXState = !k.HEXState) ? b : ""), r = "HEXState";
			else if(g === cb.HEX_labl) {
				var s = "web save" === ab.saveColor;
				"web smart" === ab.saveColor || s ? s ? M.setColor(k.webUnsave, "rgb") : (k.webUnsave || (k.webUnsave = x(l)), M.setColor(ab.webSave, "rgb")) : (k.webUnsave = x(l), M.setColor(ab.webSmart, "rgb")), r = "webColorState"
			} else /Lab-x-labl/.test(h) && (C(cb.colorPicker, "cmy-only", (k.cmyOnly = !k.cmyOnly) ? b : ""), r = "cmykState");
			else if(g === cb.bsav) u(), r = "saveAsBackground";
			else if(g === cb.bres) {
				var w = x(l),
					y = ab.alpha;
				M.setColor(k.color), u(), M.setColor(w, "rgb", y), r = "resetColor"
			} else if(j === cb.col1) ab.hsv.h -= ab.hsv.h > .5 ? .5 : -.5, t("hsv"), r = "shiftColor";
			else if(j === cb.col2) M.setColor(g.style.backgroundColor, "rgb", ab.background.alpha), r = "setSavedColor";
			else if(j === cb.memo) {
				var z = function() {
						cb.memos.blinker && (cb.memos.blinker.style.cssText = cb.memos.cssText)
					},
					B = function(b) {
						cb.memos.blinker = b, b.style.cssText = "background-color:" + (ab.RGBLuminance > .22 ? "#333" : "#DDD"), a.setTimeout(z, 200)
					};
				if(g === cb.memo_cursor) {
					z(), cb.memos.blinker = b, cb.testNode.style.cssText = cb.memo_store.style.cssText, cb.memos.cssText = cb.testNode.style.cssText;
					for(var D = cb.memos.length - 1; D--;)
						if(cb.memos.cssText === cb.memos[D].style.cssText) {
							B(cb.memos[D]);
							break
						}
					if(!cb.memos.blinker) {
						for(var D = cb.memos.length - 1; D--;) cb.memos[D + 1].style.cssText = cb.memos[D].style.cssText;
						cb.memos[0].style.cssText = cb.memo_store.style.cssText
					}
					r = "toMemery"
				} else z(), M.setColor(g.style.backgroundColor, "rgb", g.style.opacity || 1), cb.memos.cssText = g.style.cssText, B(g), I = 1, r = "fromMemory"
			}
			r && (v(ab), I = I || !0, i(c, r))
		}
	}

	function p(c, d) {
		var e, f = c || a.event,
			g = f ? E(f) : {},
			h = d !== b,
			i = h ? d : g.X - X.left + 8,
			j = h ? d : g.Y - X.top + 8,
			k = [" S XS XXS", " S XS", " S", ""],
			l = bb.sizes,
			m = h ? d : j < l.XXS[1] + 25 ? 0 : i < l.XS[0] + 25 ? 1 : i < l.S[0] + 25 || j < l.S[1] + 25 ? 2 : 3,
			n = k[m],
			o = !1,
			p = "";
		$.resizer !== n && (o = /XX/.test(n), e = bb.mode, !o || /hs/.test(e.type) && "h" !== e.z ? e.original && M.setMode(e.original) : (p = e.type + "-" + e.z, M.setMode(/hs/.test(e.type) ? e.type + "-s" : "hsv-s"), bb.mode.original = p), cb.colorPicker.className = cb.colorPicker.className.replace(/\s+(?:S|XS|XXS)/g, "") + n, bb.scale = o ? 4 : /S/.test(n) ? 2 : 1, bb.currentSize = m, $.resizer = n, Y = !0, w(), s()), cb.resizer.style.cssText = "display: block;width: " + (i > 10 ? i : 10) + "px;height: " + (j > 10 ? j : 10) + "px;"
	}

	function q(a) {
		var b = {
				rgb_r: {
					x: "b",
					y: "g"
				},
				rgb_g: {
					x: "b",
					y: "r"
				},
				rgb_b: {
					x: "r",
					y: "g"
				},
				hsv_h: {
					x: "s",
					y: "v"
				},
				hsv_s: {
					x: "h",
					y: "v"
				},
				hsv_v: {
					x: "h",
					y: "s"
				},
				hsl_h: {
					x: "s",
					y: "l"
				},
				hsl_s: {
					x: "h",
					y: "l"
				},
				hsl_l: {
					x: "h",
					y: "s"
				}
			},
			c = a.replace("-", "_"),
			d = "\\b(?:rg|hs)\\w\\-\\w\\b";
		return C(cb.panel, d, a), C(cb.slds, d, a), a = a.split("-"), bb.mode = {
			type: a[0],
			x: b[c].x,
			y: b[c].y,
			z: a[1]
		}
	}

	function r() {
		var a = /\s+(?:hue-)*(?:dark|light)/g,
			b = "className";
		cb.curl[b] = cb.curl[b].replace(a, ""), cb.curr[b] = cb.curr[b].replace(a, ""), cb.slds[b] = cb.slds[b].replace(a, ""), cb.sldr_2[b] = bb.CSSPrefix + "sldr-2", cb.sldr_4[b] = bb.CSSPrefix + "sldr-4", cb.sldl_3[b] = bb.CSSPrefix + "sldl-3";
		for(var c in cb.styles) c.indexOf("sld") || (cb.styles[c].cssText = "");
		$ = {}
	}

	function s() {
		cb.styles.curr.cssText = cb.styles.curl.cssText, cb.curl.className = bb.CSSPrefix + "curl" + (Z.noRGBZ ? " " + bb.CSSPrefix + "curl-" + Z.noRGBZ : ""), cb.curr.className = bb.CSSPrefix + "curr " + bb.CSSPrefix + "curr-" + ("h" === bb.mode.z ? Z.HUEContrast : Z.noRGBZ ? Z.noRGBZ : Z.RGBLuminance)
	}

	function t(a) {
		v(_.setColor(b, a || bb.mode.type)), Y = !0
	}

	function u(a) {
		return _.saveAsBackground(), cb.styles.col2.cssText = "background-color: " + y(ab.background.RGB) + ";" + A(ab.background.alpha), a && v(ab), ab
	}

	function v(a) {
		var c = Z,
			d = T[bb.alphaBG];
		c.hueDelta = Math.round(100 * a["rgbaMixBGMix" + d].hueDelta), c.luminanceDelta = Math.round(100 * a["rgbaMixBGMix" + d].luminanceDelta), c.RGBLuminance = a.RGBLuminance > .22 ? "light" : "dark", c.HUEContrast = a.HUELuminance > .22 ? "light" : "dark", c.contrast = c.luminanceDelta > c.hueDelta ? "contrast" : "", c.readabiltiy = a["rgbaMixBGMix" + d].WCAG2Ratio >= 7 ? "green" : a["rgbaMixBGMix" + d].WCAG2Ratio >= 4.5 ? "orange" : "", c.noRGBZ = bb["no" + bb.mode.type.toUpperCase() + bb.mode.z] ? "g" === bb.mode.z && a.rgb.g < .59 || "b" === bb.mode.z || "r" === bb.mode.z ? "dark" : "light" : b
	}

	function w() {
		if(I) {
			if(!Y) return L = a[eb](w);
			Y = !1
		}
		var c, d, e, f, g = bb,
			h = g.mode,
			i = g.scale,
			l = g.CSSPrefix,
			m = ab,
			n = cb,
			o = n.styles,
			p = n.textNodes,
			q = S,
			r = K,
			s = Z,
			t = $,
			u = 0,
			v = 0,
			x = m[h.type][h.x],
			z = Math.round(255 * x / (4 === i ? 2 : i)),
			B = m[h.type][h.y],
			C = 1 - B,
			D = Math.round(255 * C / i),
			E = 1 - m[h.type][h.z],
			F = Math.round(255 * E / i),
			G = [x, B],
			H = "rgb" === h.type,
			M = "h" === h.z,
			N = "hsl" === h.type,
			O = N && "s" === h.z,
			P = I === j,
			Q = I === k;
		H && (G[0] >= G[1] ? v = 1 : u = 1, t.sliderSwap !== u && (n.sldr_2.className = g.CSSPrefix + "sldr-" + (3 - u), t.sliderSwap = u)), (H && !Q || M && !P || !M && !Q) && (o[M ? "sldl_2" : "sldr_2"][H ? "cssText" : "backgroundColor"] = H ? A((G[u] - G[v]) / (1 - G[v] || 0)) : y(m.hueRGB)), M || (Q || (o.sldr_4.cssText = A(H ? G[v] : O ? Math.abs(1 - 2 * C) : C)), P || (o.sldl_3.cssText = A(N && "l" === h.z ? Math.abs(1 - 2 * E) : E)), N && (f = O ? "sldr_4" : "sldl_3", d = O ? "r-" : "l-", e = O ? C > .5 ? 4 : 3 : E > .5 ? 3 : 4, t[f] !== e && (n[f].className = g.CSSPrefix + "sld" + d + e, t[f] = e))), Q || (o.curm.cssText = "left: " + z + "px; top: " + D + "px;"), P || (o.curl.top = F + "px"), r && (o.curr.top = F + "px"), (r && "alpha" === r.type || J === n.opacity) && (o.opacity_slider.left = g.opacityPositionRelative ? m.alpha * ((X.width || n.opacity.offsetWidth) - (X.childWidth || n.opacity_slider.offsetWidth)) + "px" : 100 * m.alpha + "%"), o.col1.cssText = "background-color: " + y(m.RND.rgb) + "; " + (g.muteAlpha ? "" : A(m.alpha)), o.opacity.backgroundColor = y(m.RND.rgb), o.cold.width = s.hueDelta + "%", o.cont.width = s.luminanceDelta + "%";
		for(c in p) d = c.split("_"), g.cmyOnly && (d[0] = d[0].replace("k", "")), e = d[1] ? m.RND[d[0]][d[1]] : m.RND[d[0]] || m[d[0]], t[c] !== e && (t[c] = e, p[c].data = e > 359.5 && "HEX" !== c ? 0 : e, "HEX" === c || g.noRangeBackground || (e = m[d[0]][d[1]] !== b ? m[d[0]][d[1]] : m[d[0]], "Lab" === d[0] && (e = (e - q[d[0]][d[1]][0]) / (q[d[0]][d[1]][1] - q[d[0]][d[1]][0])), o[c].backgroundPosition = Math.round(100 * (1 - e)) + "% 0%"));
		d = m._rgb ? [m._rgb.r !== m.rgb.r, m._rgb.g !== m.rgb.g, m._rgb.b !== m.rgb.b] : [], d.join("") !== t.outOfGammut && (n.rgb_r_labl.firstChild.data = d[0] ? "!" : " ", n.rgb_g_labl.firstChild.data = d[1] ? "!" : " ", n.rgb_b_labl.firstChild.data = d[2] ? "!" : " ", t.outOfGammut = d.join("")), s.noRGBZ && t.noRGBZ !== s.noRGBZ && (n.curl.className = l + "curl " + l + "curl-" + s.noRGBZ, Q || (n.curr.className = l + "curr " + l + "curr-" + s.noRGBZ), t.noRGBZ = s.noRGBZ), t.HUEContrast !== s.HUEContrast && "h" === h.z ? (n.slds.className = n.slds.className.replace(/\s+hue-(?:dark|light)/, "") + " hue-" + s.HUEContrast, Q || (n.curr.className = l + "curr " + l + "curr-" + s.HUEContrast), t.HUEContrast = s.HUEContrast) : t.RGBLuminance !== s.RGBLuminance && (n.colorPicker.className = n.colorPicker.className.replace(/\s+(?:dark|light)/, "") + " " + s.RGBLuminance, Q || "h" === h.z || s.noRGBZ || (n.curr.className = l + "curr " + l + "curr-" + s.RGBLuminance), t.RGBLuminance = s.RGBLuminance), (t.contrast !== s.contrast || t.readabiltiy !== s.readabiltiy) && (n.ctrl.className = n.ctrl.className.replace(" contrast", "").replace(/\s*(?:orange|green)/, "") + (s.contrast ? " " + s.contrast : "") + (s.readabiltiy ? " " + s.readabiltiy : ""), t.contrast = s.contrast, t.readabiltiy = s.readabiltiy), t.saveColor !== m.saveColor && (n.HEX_labl.firstChild.data = m.saveColor ? "web save" === m.saveColor ? "W" : "M" : "!", t.saveColor = m.saveColor), g.renderCallback && g.renderCallback(m, h), I && (L = a[eb](w))
	}

	function x(a) {
		var b = {};
		for(var c in a) b[c] = a[c];
		return b
	}

	function y(a, b) {
		for(var c = "", d = (b || "rgb").split(""), e = d.length; e--;) c = ", " + a[d[e]] + c;
		return(b || "rgb") + "(" + c.substr(2) + ")"
	}

	function z(a, b, c) {
		return a > c ? c : b > a ? b : a
	}

	function A(a) {
		return a === b && (a = 1), R ? "opacity: " + Math.round(1e10 * a) / 1e10 + ";" : "filter: alpha(opacity=" + Math.round(100 * a) + ");"
	}

	function B(b, c) {
		return b.preventDefault ? b.preventDefault() : b.returnValue = !1, c || (a.getSelection ? a.getSelection().removeAllRanges() : document.selection.empty()), !1
	}

	function C(a, c, d) {
		return a ? a.className = d !== b ? a.className.replace(new RegExp("\\s+?" + c, "g"), d ? " " + d : "") : a.className + " " + c : !1
	}

	function D(b) {
		var c = b.getBoundingClientRect ? b.getBoundingClientRect() : {
				top: 0,
				left: 0
			},
			d = b && b.ownerDocument,
			e = d.body,
			f = d.defaultView || d.parentWindow || a,
			g = d.documentElement || e.parentNode,
			h = g.clientTop || e.clientTop || 0,
			i = g.clientLeft || e.clientLeft || 0;
		return {
			left: c.left + (f.pageXOffset || g.scrollLeft) - i,
			top: c.top + (f.pageYOffset || g.scrollTop) - h
		}
	}

	function E(a) {
		return {
			X: a.pageX || a.clientX + document.body.scrollLeft + document.documentElement.scrollLeft,
			Y: a.pageY || a.clientY + document.body.scrollTop + document.documentElement.scrollTop
		}
	}

	function F(a, b, c) {
		F.cache = F.cache || {
			_get: function(a, b, c, d) {
				for(var e = F.cache[b] || [], f = e.length; f--;)
					if(a === e[f].obj && "" + c == "" + e[f].func) return c = e[f].func, d || (e[f] = e[f].obj = e[f].func = null, e.splice(f, 1)), c
			},
			_set: function(a, b, c) {
				var d = F.cache[b] = F.cache[b] || [];
				return F.cache._get(a, b, c, !0) ? !0 : void d.push({
					func: c,
					obj: a
				})
			}
		}, !c.name && F.cache._set(a, b, c) || "function" != typeof c || (a.addEventListener ? a.addEventListener(b, c, !1) : a.attachEvent("on" + b, c))
	}

	function G(a, b, c) {
		"function" == typeof c && (c.name || (c = F.cache._get(a, b, c) || c), a.removeEventListener ? a.removeEventListener(b, c, !1) : a.detachEvent("on" + b, c))
	}

	function H(c, d) {
		var e = {};
		if(d === b) {
			if(a.getSelection) {
				c.focus();
				var f = a.getSelection().getRangeAt(0),
					g = f.cloneRange();
				g.selectNodeContents(c), g.setEnd(f.endContainer, f.endOffset), e = {
					end: g.toString().length,
					range: f.toString().length
				}
			} else {
				c.focus();
				var f = document.selection.createRange(),
					g = document.body.createTextRange();
				g.moveToElementText(c), g.setEndPoint("EndToEnd", f), e = {
					end: g.text.length,
					range: f.text.length
				}
			}
			return e.start = e.end - e.range, e
		}
		if(-1 == d && (d = c.text().length), a.getSelection) c.focus(), a.getSelection().collapse(c.firstChild, d);
		else {
			var h = document.body.createTextRange();
			h.moveToElementText(c), h.moveStart("character", d), h.collapse(!0), h.select()
		}
		return d
	}
	var I, J, K, L, M, N, O = a.ColorPicker,
		P = !O,
		Q = document.createStyleSheet !== b && document.getElementById || !!a.MSInputMethodContext,
		R = "undefined" != (document.body ? typeof document.body.style.opacity : "undefined"),
		S = {},
		T = {
			w: "White",
			b: "Black",
			c: "Custom"
		},
		U = "",
		V = 1,
		W = {},
		X = {},
		Y = !0,
		Z = {},
		$ = {},
		_ = {},
		ab = {},
		bb = {},
		cb = {},
		db = "AnimationFrame",
		eb = "request" + db,
		fb = "cancel" + db,
		gb = ["ms", "moz", "webkit", "o"],
		hb = function(a) {
			this.options = {
				color: "rgba(204, 82, 37, 0.8)",
				mode: "rgb-b",
				fps: 60,
				delayOffset: 8,
				CSSPrefix: "cp-",
				allMixDetails: !0,
				alphaBG: "w",
				imagePath: ""
			}, c(this, a || {})
		};
	a.ColorPicker = hb, hb.addEvent = F, hb.removeEvent = G, hb.getOrigin = D, hb.limitValue = z, hb.changeClass = C, hb.prototype.setColor = function(a, b, c, e) {
		d(this), K = !0, v(_.setColor.apply(_, arguments)), e && this.startRender(!0)
	}, hb.prototype.saveAsBackground = function() {
		return d(this), u(!0)
	}, hb.prototype.setCustomBackground = function(a) {
		return d(this), _.setCustomBackground(a)
	}, hb.prototype.startRender = function(b) {
		d(this), b ? (I = !1, w(), this.stopRender()) : (I = 1, L = a[eb](w))
	}, hb.prototype.stopRender = function() {
		d(this), a[fb](L), K && (I = 1, i(b, "external"))
	}, hb.prototype.setMode = function(a) {
		d(this), q(a), r(), w()
	}, hb.prototype.destroyAll = function() {
		var a = this.nodes.colorPicker,
			b = function(a) {
				for(var c in a)(a[c] && "[object Object]" === a[c].toString() || a[c] instanceof Array) && b(a[c]), a[c] = null, delete a[c]
			};
		this.stopRender(), h(this, !0), b(this), a.parentNode.removeChild(a), a = null
	}, hb.prototype.renderMemory = function(a) {
		var c = this.nodes.memos,
			d = [];
		"string" == typeof a && (a = a.replace(/^'|'$/g, "").replace(/\s*/, "").split("','"));
		for(var e = c.length; e--;) a && "string" == typeof a[e] && (d = a[e].replace("rgba(", "").replace(")", "").split(","), a[e] = {
			r: d[0],
			g: d[1],
			b: d[2],
			a: d[3]
		}), c[e].style.cssText = "background-color: " + (a && a[e] !== b ? y(a[e]) + ";" + A(a[e].a || 1) : "rgb(0,0,0);")
	}, F(Q ? document.body : a, "mouseup", i);
	for(var ib = gb.length; ib-- && !a[eb];) a[eb] = a[gb[ib] + "Request" + db], a[fb] = a[gb[ib] + "Cancel" + db] || a[gb[ib] + "CancelRequest" + db];
	a[eb] = a[eb] || function(b) {
		return a.setTimeout(b, 1e3 / bb.fps)
	}, a[fb] = a[fb] || function(b) {
		return a.clearTimeout(b), L = null
	}
}(window);;

(function($, window) {
	$.fn.extend({
		colorPicker: function(config) {
			var renderCallback = function(colors, mode) {
					var options = this,
						$input = $(options.input),
						$patch = $(options.patch),
						RGB = colors.RND.rgb,
						HSL = colors.RND.hsl,
						AHEX = options.isIE8 ? (colors.alpha < 0.16 ? '0' : '') +
						(Math.round(colors.alpha * 100)).toString(16).toUpperCase() + colors.HEX : '',
						RGBInnerText = RGB.r + ', ' + RGB.g + ', ' + RGB.b,
						RGBAText = 'rgba(' + RGBInnerText + ', ' + colors.alpha + ')',
						isAlpha = colors.alpha !== 1 && !options.isIE8,
						colorMode = $input.data('colorMode');
					$patch.css({
						'color': (colors.rgbaMixCustom.luminance > 0.22 ? '#222' : '#ddd'),
						'background-color': RGBAText,
						'filter': (options.isIE8 ? 'progid:DXImageTransform.Microsoft.gradient(' + 'startColorstr=#' + AHEX + ',' + 'endColorstr=#' + AHEX + ')' : '')
					});
					$input.val(colorMode === 'HEX' && !isAlpha ? '#' + (options.isIE8 ? AHEX : colors.HEX) : colorMode === 'rgb' || (colorMode === 'HEX' && isAlpha) ? (!isAlpha ? 'rgb(' + RGBInnerText + ')' : RGBAText) : ('hsl' + (isAlpha ? 'a(' : '(') + HSL.h + ', ' + HSL.s + '%, ' + HSL.l + '%' +
						(isAlpha ? ', ' + colors.alpha : '') + ')'));
					if(options.displayCallback) {
						options.displayCallback(colors, mode, options);
					}
				},
				actionCallback = function(event, action) {
					var options = this,
						$input = $(options.input),
						colorPicker = colorPickers.current;
					if($.inArray(action, ["changeXYValue", "changeZValue", "changeInputValue", "shiftColor", "setSavedColor", "changeOpacityValue"]) != -1) {
						var current_active_135item = current_editor.currentActive135Item();
						if((typeof(replace_full_color) != 'undefined' && replace_full_color) || typeof(current_active_135item) != 'undefined' && current_active_135item) {
							setBackgroundColor($input.val(), '#FFFFFF', false);
						}
						if(typeof(current_active_135item) != 'undefined' && !current_active_135item) {
							$('.editor-template-list li > .135editor').each(function() {
								parseObject($(this), $input.val(), '#FFFFFF');
							})
						}
					} else if(action == 'saveAsBackground') {} else if(action === 'toMemery') {
						var memos = colorPicker.nodes.memos,
							$memo, backgroundColor = '',
							opacity = 0,
							cookieTXT = [];
						for(var n = 0, m = memos.length; n < m; n++) {
							$memo = $(memos[n]);
							backgroundColor = $memo.css('background-color');
							opacity = Math.round($memo.css('opacity') * 100) / 100;
							cookieTXT.push(backgroundColor.replace(/, /g, ',').replace('rgb(', 'rgba(').replace(')', ',' + opacity + ')'));
						}
						cookieTXT = '\'' + cookieTXT.join('\',\'') + '\'';
						$.docCookies('colorPickerMemos' + (options.noAlpha ? 'NoAlpha' : ''), cookieTXT);
					} else if(action === 'resizeApp') {
						$.docCookies('colorPickerSize', colorPicker.color.options.currentSize);
					} else if(action === 'modeChange') {
						var mode = colorPicker.color.options.mode;
						$.docCookies('colorPickerMode', mode.type + '-' + mode.z);
					}
				},
				createInstance = function(elm, config) {
					var initConfig = {
						klass: window.ColorPicker,
						input: elm,
						patch: elm,
						isIE8: !!document.all && !document.addEventListener,
						animationSpeed: 200,
						draggable: true,
						margin: {
							left: -1,
							top: 2
						},
						customBG: '#FFFFFF',
						color: elm.value,
						initStyle: 'display: none',
						mode: $.docCookies('colorPickerMode') || 'hsv-h',
						memoryColors: $.docCookies('colorPickerMemos' + ((config || {}).noAlpha ? 'NoAlpha' : '')),
						size: $.docCookies('colorPickerSize') || 1,
						renderCallback: renderCallback,
						actionCallback: actionCallback
					};
					for(var n in config) {
						initConfig[n] = config[n];
					}
					return new initConfig.klass(initConfig);
				},
				doEventListeners = function(elm, multiple, off) {
					var onOff = off ? 'off' : 'on';
					$(elm)[onOff]('focus.colorPicker', function(e) {
						var $input = $(this),
							position = $input.position(),
							index = multiple ? $(that).index(this) : 0,
							colorPicker = colorPickers[index] || (colorPickers[index] = createInstance(this, config)),
							options = colorPicker.color.options,
							$colorPicker = $.ui && options.draggable ? $(colorPicker.nodes.colorPicker).draggable({
								cancel: '.' + options.CSSPrefix + 'app div'
							}) : $(colorPicker.nodes.colorPicker);
						options.color = elm.value;
						var left = position.left,
							top = position.top;
						if($($input).parents('#color-plan').size() > 0) {
							left += $('#color-plan').position().left - 260;
							top += $('#color-plan').position().top + 20 + $(window).scrollTop();
						} else if($($input).parents('.edui-popup').size() > 0) {
							var p_popup = $($input).parents('.edui-popup:first');
							left += p_popup.position().left - 165;
							top += p_popup.position().top - 150;
						}
						$colorPicker.css({
							'position': 'absolute',
							'z-index': 10000,
							'left': left + options.margin.left,
							'top': top + $input.outerHeight(true) + options.margin.top
						});
						if(!multiple) {
							options.input = elm;
							options.patch = elm;
							if(elm.value == "") {} else {
								colorPicker.setColor(elm.value, undefined, undefined, true);
								colorPicker.saveAsBackground();
							}
						}
						colorPickers.current = colorPickers[index];
						if(options.appenTo) {
							$(options.appenTo).append($colorPicker);
						} else {
							$($input).after($colorPicker);
						}
						setTimeout(function() {
							$colorPicker.show(colorPicker.color.options.animationSpeed);
						}, 0);
					});
					if(!colorPickers.evt || off) {
						colorPickers.evt = true;
						$(window)[onOff]('mousedown.colorPicker', function(e) {
							var colorPicker = colorPickers.current,
								$colorPicker = $(colorPicker ? colorPicker.nodes.colorPicker : undefined),
								animationSpeed = colorPicker ? colorPicker.color.options.animationSpeed : 0,
								isColorPicker = $(e.target).closest('.cp-app')[0],
								inputIndex = $(that).index(e.target);
							if(isColorPicker && $(colorPickers).index(isColorPicker)) {
								if(colorPicker && e.target === colorPicker.nodes.exit) {
									$colorPicker.hide(animationSpeed);
									$(':focus').trigger('blur');
								} else {}
							} else if(inputIndex !== -1) {} else {
								$colorPicker.hide(animationSpeed);
							}
						});
					}
				},
				that = this,
				colorPickers = this.colorPickers || [],
				testColors = new window.Colors({
					customBG: config.customBG,
					allMixDetails: true
				});
			this.colorPickers = colorPickers;
			$(this).each(function(idx, elm) {
				if(config === 'destroy') {
					$(elm).off('.colorPicker');
					$(window).off('.colorPicker');
					if(colorPickers[idx]) {
						colorPickers[idx].destroyAll();
					}
				} else {
					var color = elm.value;
					var value = color.split('(');
					$(elm).data('colorMode', value[1] ? value[0].substr(0, 3) : 'HEX');
					doEventListeners(elm, (config && config.multipleInstances), false);
					if(config && config.readOnly) {
						elm.readOnly = true;
					}
					if(color == "") {} else {
						testColors.setColor(color);
					}
					if(config && config.init) {
						config.init(elm, testColors.colors);
					}
				}
			});
			return this;
		}
	});
	$.docCookies = function(key, val, options) {
		var encode = encodeURIComponent,
			decode = decodeURIComponent,
			cookies, n, tmp, cache = {},
			days;
		if(val === undefined) {
			cookies = document.cookie.split('; ') || [];
			for(n = cookies.length; n--;) {
				tmp = cookies[n].split('=');
				if(tmp[0]) cache[decode(tmp.shift())] = decode(tmp.join('='));
			}
			if(!key) return cache;
			else return cache[key];
		} else {
			options = options || {};
			if(val === '' || options.expires < 0) {
				options.expires = -1;
			}
			if(options.expires !== undefined) {
				days = new Date();
				days.setDate(days.getDate() + options.expires);
			}
			document.cookie = encode(key) + '=' + encode(val) +
				(days ? '; expires=' + days.toUTCString() : '') +
				(options.path ? '; path=' + options.path : '') +
				(options.domain ? '; domain=' + options.domain : '') +
				(options.secure ? '; secure' : '');
		}
	};
})(jQuery, this);